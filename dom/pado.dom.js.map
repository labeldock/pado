{"version":3,"file":"pado.dom.js","sources":["../.src/functions/isLike.js","../.src/functions/cast.js","../.src/dom/plugins/jquery.js","../.src/dom/helper/dragHelper.js","../.src/dom/helper/repeatHelper.js","../.src/dom/index.js","../.src/pado.dom.js"],"sourcesContent":["export const isAbsoluteNaN = function(it){\n  return it!==it && typeof it === \"number\"\n}\n\nexport const isNone = function(data) {\n  return isAbsoluteNaN(data) || data === undefined || data === null\n}\n\nexport const isNumber = function(it){\n  return (typeof it === \"number\" && !isAbsoluteNaN(it))\n}\n\nexport const isInfinity = function(it){\n  return it === Number.POSITIVE_INFINITY || it === Number.NEGATIVE_INFINITY\n}\n\nexport const isInteger = function(value) {\n  //NaN, null, undefined\n  if(isNone(value) === true) return false\n  \n  if(typeof value === \"string\") {\n    value = value.trim()\n  }\n\n  if(!(/string|number/.test(typeof value)) || isInfinity(value) || isNaN(value)) {\n    return false\n  }\n\n  return value == parseInt(value, 10);\n}\n\nexport const isArray = function(data) {\n  return Array.isArray(data) || data instanceof Array;\n}\n\nexport const isObject   = it=>(it !== null && typeof it === \"object\") ? true : false\nexport const isFunction = (it)=>typeof it === \"function\"\n\n/*\n  * likeObject is have hasOwnProperty\n*/\nexport const likeObject = (it)=>isObject(it) || isFunction(it)\n\nexport const likeString = function(data) {\n  if(typeof data === \"string\") return true\n  if(isNumber(data)) return true\n  return false;\n}\n\nexport const likeNumber = function(data) {\n  if(isNumber(data) || isInfinity(data)) return true\n  if(typeof data === \"string\") return String(parseFloat(t)) === String(t)\n  return false;\n}\n\nexport const likeArray = (function(nodeFn,webFn){\n  let definedNodeList\n  \n  try {\n    definedNodeList = (0 instanceof NodeList)\n    definedNodeList = true\n  } catch(e) {\n    definedNodeList = false;\n  }\n  \n  return definedNodeList ? webFn : nodeFn;\n}(\n  //nodeFn\n  function(data){\n    return isArray(data)\n  },\n  //webFn\n  function(data){\n    return isArray(data) || data instanceof NodeList\n  }\n))\n\n//TODO : native isPlainObject\nexport const isNode = (a)=>isObject(a) && typeof a.nodeType === \"number\"\n\nexport const isEmpty = function(it){\n  if (typeof it === \"undefined\") return true;\n  if (typeof it === \"string\")return it.trim().length < 1 ? true : false;\n  if (typeof it === \"object\"){\n    if(it == null) return true;\n    if(it instanceof RegExp) return false;      \n    if(isArray(it)) {\n      return !it.length;\n    } else {\n      for (var prop in it) return false; return true;\n    }\n  }\n  if (typeof it === \"number\"){\n    //NaN check || false\n    return it!==it || false;\n  }\n  if (typeof it === \"function\")return false;\n  if (typeof it === \"boolean\")return false;\n  return true;\n}\n\nexport const likeRegexp = (s)=> (typeof s === \"string\") || (s instanceof RegExp)\n\nexport const isPlainObject = data => typeof data === \"object\" && data.constructor === Object\n\nexport const isEnumerableObject = data => isPlainObject(data) || isArray(data)\n\n// none(undfinec, null, NaN), value(1,\"1\"), hash({}), array([]), node, object(new, Date), function, boolean\nexport const eqof = function(it){\n  const typeIt = typeof it;\n  switch(typeIt){\n  case \"number\":\n    if(isAbsoluteNaN(it)) return \"none\";\n  case \"string\":\n    return \"value\";\n    break;\n  case \"object\":\n    if(isNone(it)) return \"none\";\n    if(likeArray(it)) return \"array\";\n    if(isNode(it)) return \"node\";\n    if(!isPlainObject(it)) return \"object\";\n    return \"hash\";\n    break;\n  case \"undefined\":\n    return \"none\";\n    break;\n  case \"function\":\n  case \"boolean\":\n  default:\n    return typeIt;\n    break;\n  }\n}\n\nconst baseEq = function(value, other, filter, depth=0, strict){\n  if(arguments.length < 2) return false;\n  \n  const valueType = eqof(value);\n  const otherType = eqof(other);\n  \n  if(valueType !== otherType) return false;\n  \n  switch(valueType){\n  case \"none\":\n    return true;\n  case \"array\":\n    if(value.length !== other.length){\n      return false;\n    }\n    return value.every((vValue,i)=>{\n      const oValue = other[i];\n      return (typeof filter === \"function\" && filter(i,[vValue,oValue],depth) === false) ? true : baseEq(vValue,oValue,filter,depth+1,strict);\n    });\n    break;\n  case \"hash\":\n    const vKeys = Object.keys(value), oKeys = Object.keys(other);\n    if(vKeys.length !== oKeys.length || !baseEq(vKeys.sort(),oKeys.sort())) return false;\n    return vKeys.every((key)=>{\n      const vValue = value[key];\n      const oValue = other[key];\n      return (typeof filter === \"function\" && filter(key,[vValue,oValue],depth) === false) ? true : baseEq(vValue,oValue,filter,depth+1,strict);\n    });\n    break;\n  case \"node\":\n  case \"object\":\n  case \"function\":\n  case \"boolean\":\n  case \"value\":\n  default:\n    return strict ? value === other : value == other;\n  }\n}\n\nexport const isEqual   = (value, other, filter, depth)=>baseEq(value, other, filter, depth, true);\nexport const likeEqual = (value, other, filter, depth)=>baseEq(\n  value,\n  other,\n  (key,values,depth)=>/^(\\$|\\_)/.test(key) ? false : typeof filter === \"function\" ? filter(key,values,depth) : true, \n  depth, \n  true\n);\nexport const eqeq      = (value, other, filter, depth)=>baseEq(value, other, filter, depth, false);\n\nexport const isExsist = function(value){\n  if(value === true){\n    return true;\n  }\n  if(value === false){\n    return false;\n  }\n  if(typeof value === \"string\" || typeof value === \"number\"){\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport const notExsist = value=>!isExsist(value)\n\nexport const likePromise = (target)=>(typeof target === \"object\" && target !== null && typeof target['then'] === \"function\" && typeof target['catch'] === \"function\");","import {\n  isArray,\n  isNone,\n  isAbsoluteNaN,\n  isPlainObject,\n  isObject\n} from './isLike'\n\nexport const asArray = function(data, defaultArray = undefined) {\n  if(isArray(data)) {\n    return data;\n  }\n  if(isNone(data)) {\n    return isArray(defaultArray) ? defaultArray\n      : isNone(defaultArray) ? [] : [defaultArray];\n  }\n  if(typeof data === \"object\" && typeof data.toArray === \"function\") {\n    return data.toArray();\n  }\n  return [data];\n};\n\nexport const toArray = function(data,option){\n  if(typeof data === \"undefined\" || data === null || data === NaN ) return [];\n  if(isArray(data)) return Array.prototype.slice.call(data);\n  if(typeof data === \"object\" && typeof data.toArray === \"function\") return data.toArray();\n  if(typeof data === \"string\", typeof option === \"string\") return data.split(option);\n  return [data];\n}\n\nexport const asObject = function(data, defaultKey = \"default\") {\n  if(isPlainObject(data)){\n    return data;\n  } else {\n    return { [defaultKey]:data }\n  }\n};\n\nexport const toNumber = function(v,d){\n  switch(typeof v){ case \"number\":return v;case \"string\":var r=v.replace(/[^.\\d\\-]/g,\"\")*1;return isAbsoluteNaN(r)?0:r;break; }\n  switch(typeof d){ case \"number\":return d;case \"string\":var r=d*1;return isAbsoluteNaN(r)?0:r;break; }\n  return 0;\n}\n\nexport const cleanObject = function(data){\n  if(data instanceof Array){\n    Array.prototype.splice.call(data,0,data.length)\n  } else if(typeof data == \"object\") {\n    Object.keys(data).forEach(key=>{ delete data[key] })\n  }\n  return data\n}\n\nexport const clone = function(target){\n  switch(typeof target){\n  case \"undefined\": case \"function\": case \"boolean\": case \"number\": case \"string\": return target; break;\n  case \"object\":\n    if(target === null) return target;\n    \n    if(isArray(target)){\n      let r=[];\n      for(let i=0,length=target.length;i<length;i++)r.push(target[i]);\n      return r;\n    }\n    \n    if(!isPlainObject(target)){\n      if(target instanceof Date){\n        let r=new Date();\n        r.setTime(target.getTime());\n        return r;\n      }\n      return target;\n    }\n    \n    let r={};\n    \n    Object.keys(target).forEach(k=>{\n      if(target.hasOwnProperty(k)) r[k]=target[k];\n    });\n    return r;\n    break;\n  default : \n    console.error(\"clone::copy failed : target => \",target);\n    return target; \n    break\n  }\n}\n\nexport const cloneDeep = function(target){\n  if(typeof target === \"object\"){\n    let d;\n    if(isArray(target)) {\n      if(!isArray(d)) { d = [] };\n      for (var i=0,l=target.length;i<l;i++) d.push( ((typeof target[i] === \"object\" && target[i] !== null ) ? clone(target[i]) : target[i]) )\n        return d;\n    } else {\n      d = {}\n      Object.keys(target).forEach(p=>{\n        (typeof target[p] === \"object\" && target[p] !== null && d[p]) ? clone(target[p],d[p]) : d[p] = target[p];\n      });\n      return d;\n    }\n  } else {\n    return clone(target);\n  }\n};\n\nexport const free = function(datum){\n  const dest = {}\n  Object.keys(datum).forEach(key=>{\n    if(!/^\\$/.test(key)){\n      dest[key] = cloneDeep(datum[key])\n    }\n  });\n  return dest;\n}\n\nconst getKeyWithValue = function(obj,value){\n  if(isArray(obj)){\n    for(var i=0,l=obj.length;i<l;i++) if(obj[i]===value) return i;\n  } \n  if(isObject(obj)){\n    for(var key in obj) if(obj[key]===value) return key;\n  }\n  return undefined;\n};\n\nexport const removeValue = function(obj,value){\n  var detect = true;\n  var array  = isArray(obj);\n\n  while(detect) {\n    var key = getKeyWithValue(obj,value);\n    if(typeof key === \"undefined\"){\n      detect = false;\n    } else {\n      if(array){\n        obj.splice(key,1);\n      } else {\n        delete obj[key];\n      }\n    }\n  }\n\n  return obj;\n};\n\nexport const instance = function(func,proto){\n  var ins,DummyInstance=function(param){ if(typeof param === \"object\") for(var k in param) this[k] = param[k]; };\n  if(typeof func == \"object\"){\n    if(typeof proto === \"object\") DummyInstance.prototype = proto;\n    ins = new DummyInstance(func);\n  }\n  if(typeof func == \"function\"){\n    if(typeof proto === \"object\") func.prototype = proto;\n    ins = (new func());\n  }\n  return ins;\n}\n\nexport const alloc = function(init) {\n  let fn = init();\n  const rn = function(...args) {\n    return fn.apply(this, args);\n  };\n  rn['reset'] = function() { fn = init(rn, rn); };\n  rn['$constructor'] = fn;\n  return rn;\n};\n\nconst syncData = (function(){\n  const ENTER_HOOK  = (newDatum)=>_.assign({}, newDatum);\n  const UPDATE_HOOK = (oldDatum, newDatum)=>_.assign({}, oldDatum, newDatum);\n  \n  return function(oldData, newData, getId, options) {\n    if(!/string|function/.test(typeof getId)) throw new Error(\"syncData need getId\");\n  \n    if(typeof getId === \"string\") {\n      const getIdString = getId;\n      getId = e=>_.get(e, getIdString);\n    }\n\n    oldData = asArray(oldData);\n    newData = asArray(newData);\n\n    const result = [];\n    const hooks  = asObject(options,\"afterEach\")\n    \n    if(typeof hooks[\"enter\"] !== \"function\"){\n      hooks[\"enter\"] = ENTER_HOOK;\n    }\n    \n    if(typeof hooks[\"update\"] !== \"function\"){\n      hooks[\"update\"] = UPDATE_HOOK;\n    }\n    \n    const oldDataMap = _.map(oldData, e=>{\n      return { id: getId(e), ref: e };\n    });\n    \n    \n    asArray(newData).forEach((newDatum, i)=>{\n      const newId = getId(newDatum);\n      let oldDatum = _.get(oldDataMap[_.findIndex(oldDataMap, e=>e.id === newId)], \"ref\");\n      let genDatum;\n      let dirty = false;\n\n      if(oldDatum) {\n        // change is not dirty, modify is dirty\n        if(typeof oldDatum !== typeof newDatum) {\n          dirty = false;\n        } else { // same type\n          const oldOwnKeys = Object.keys(oldDatum).filter(key=>!(key.indexOf(\"$\") === 0));\n          const newOwnKeys = Object.keys(newDatum).filter(key=>!(key.indexOf(\"$\") === 0));\n\n          // inspect key chnage\n          if(_.isEqual(oldOwnKeys, newOwnKeys)) {\n            dirty = !_.isEqual(_.pick(oldDatum, oldOwnKeys), _.pick(newDatum, newOwnKeys));\n          } else {\n            dirty = true;\n          }\n        }\n        \n        if(typeof hooks[\"beforeUpdate\"] === \"function\"){\n          if(hooks[\"beforeUpdate\"](oldDatum, newDatum) === false){\n            return;\n          }\n        }\n        \n        genDatum = hooks[\"update\"](oldDatum, newDatum);\n        \n        if(typeof hooks[\"afterUpdate\"] === \"function\"){\n          genDatum = hooks[\"afterUpdate\"](genDatum, oldDatum, newDatum);\n        }\n      } else {\n        if(typeof hooks[\"beforeEnter\"] === \"function\"){\n          if(hooks[\"beforeEnter\"](newDatum) === false){\n            return;\n          }\n        }\n        \n        genDatum = hooks[\"enter\"](newDatum);\n        \n        if(typeof hooks[\"afterEnter\"] === \"function\"){\n          genDatum = hooks[\"afterEnter\"](genDatum, newDatum);\n        }\n      }\n\n      if(typeof hooks[\"afterEach\"] === \"function\") {\n        hooks[\"afterEach\"](genDatum, i, dirty);\n      }\n\n      result.push(genDatum);\n    });\n\n    return result;\n  }\n}())","import { isPlainObject } from '../../functions';\n\nlet $;\n\ntry {\n  (window,document);\n  $ = require('jquery');\n} catch(e){\n  const { JSDOM } = jsdom;\n  const dom = new JSDOM('<html><head><meta charset=\"utf-8\"></head><body></body></html>',{\n    contentType: \"text/html\",\n    userAgent: \"Mellblomenator/9000\",\n    includeNodeLocations: true\n  });\n  global.window = dom.window;\n  global.document = dom.document;\n  $ = require('jquery');\n}\n\nconst isPointerEvent = $.isPointerEvent = function (e){\n  \n}\n\nconst getOriginalEvent = $.getOriginalEvent = function(e){\n  \n};\n\nconst getElementPosition = $.getElementPosition = function(el){\n  let [ element ] = $(el);\n  \n  if(!element) return null;\n  \n  let xPosition = 0, yPosition = 0;\n  while(element){\n    xPosition += (element.offsetLeft - element.scrollLeft + element.clientLeft);\n    yPosition += (element.offsetTop  - element.scrollTop  + element.clientTop );\n    element = element.offsetParent;\n  }\n  return {x:xPosition,y:yPosition};\n}\n\n\nconst getPointerPosition = $.getPointerPosition = function(e, root){\n  root = !root ? document.documentElement : root;\n\n  const evt = getOriginalEvent(e);\n  const pos = getElementPosition(root);\n  if(!pos) return;\n  \n  pos.x = e.touches ? e.touches[0].pageX : e.clientX - pos.x;\n  pos.y = e.touches ? e.touches[0].pageY : e.clientY - pos.y;\n  return pos;\n}\n\n$.fn.extend({\n  //파라메터 노드가 제이쿼리가 가진 노드 안에 있는지 확인\n  containsIn (node){\n    var [ target ] = $(node).eq(0);\n    if(target) for(var i=0,l=this.length;i<l;i++){\n      if(this[i] === target) return true;\n      if(this.eq(i).find(target).length) return true;\n    }\n    return false;\n  },\n  //파라메터 노드가 제이쿼리가 가진 노드 밖에 있는지 확인\n  containsOut (node){\n    return !this.containsIn(node);\n  },\n  /*\n    //\n    $(window).predict()\n    $(window).predict({center:20});\n    $(window).predict({center:event});\n    \n    //TODO\n    $(window).predict(element)\n    $(window).predict(element, {center:20});\n  */\n  predict (offset){\n    const [ element ] = this.eq(0);\n    if(!element) return;\n    \n    const { offsetTop, offsetLeft, offsetWidth, offsetHeight } = element[\"innerWidth\"] ? {\n      offsetTop   :0, \n      offsetLeft  :0, \n      offsetWidth :window.innerWidth, \n      offsetHeight:window.innerHeight\n    } : element;\n    \n    const result = {\n      top   :offsetTop,\n      left  :offsetLeft,\n      width :offsetWidth,\n      height:offsetHeight,\n      right :offsetLeft + offsetWidth,\n      bottom:offsetTop + offsetHeight,\n      center:(offsetWidth + offsetLeft) / 2,\n      middle:(offsetHeight + offsetTop) / 2\n    };\n      \n    if(isPointerEvent(offset)){\n      const { x:left, y:top } = getPointerPosition(offset);\n      offset = { left, top };\n    }\n      \n    if(offset && isPlainObject(offset)){\n      [\"top\", \"left\", \"width\", \"height\", \"right\", \"bottom\", \"center\", \"middle\"].forEach((key)=>{\n        if(typeof offset[key] !== \"number\") return;\n          \n        let equalize;\n          \n        switch(key){\n        case \"top\":\n        case \"middle\":\n          equalize = [\"y\", offset[key] - result[key]];\n          break;\n        case \"left\":\n        case \"center\":\n          equalize = [\"x\", offset[key] - result[key]];\n          break;\n        case \"width\":\n          equalize = [\"width\", offset[key] - result[key]];\n          break;\n        case \"height\":\n          equalize = [\"height\", offset[key] - result[key]];\n          break;\n        case \"right\":\n          break;\n        case \"bottom\":\n          break;\n        }\n          \n        switch(equalize && equalize[0]){\n        case \"x\":\n          result[\"left\"]   += equalize[1];\n          result[\"center\"] += equalize[1];\n          result[\"right\"]  += equalize[1];\n          break;\n        case \"y\":\n          result[\"top\"]    += equalize[1];\n          result[\"middle\"] += equalize[1];\n          result[\"bottom\"] += equalize[1];\n          break;\n        case \"width\":\n          result[\"width\"]  += equalize[1];\n          result[\"right\"]  += equalize[1];\n          result[\"center\"] += (result[\"right\"] - result[\"left\"] / 2);\n          break;\n        case \"height\":\n          result[\"height\"] += equalize[1];\n          result[\"bottom\"] += equalize[1];\n          result[\"middle\"] += (result[\"bottom\"] - result[\"top\"] / 2);\n          break;\n        }\n      });\n    }\n    \n    return result;\n  }\n});\n\nexport default $;","import $ from '../plugins/jquery';\n\n//드래그\nconst pointerParse = ({ clientX, clientY })=>{\n  return {\n    x:clientX,\n    y:clientY\n  };\n};\n\nexport default function DragHelper(element,option){\n  const $element = $(element).eq(0);\n  \n  let startFn;\n  let moveFn;\n  let endFn;\n  \n  let dragParams = null;\n  let firstDrag  = null;\n  let lastDrag   = null;\n  \n  const resetOptions = function(){\n    const getOptions = (typeof option === \"function\" ? option($element) : option);\n    startFn = getOptions[\"start\"];\n    moveFn = getOptions[\"move\"];\n    endFn = getOptions[\"end\"];\n  };\n  \n  const getCurrentPointerDrag = function(originalEvent){\n    const pointerDrag = pointerParse(originalEvent);\n  \n    //현재 이동한 거리\n    pointerDrag.moveX = pointerDrag.x - lastDrag.x;\n    pointerDrag.moveY = pointerDrag.y - lastDrag.y;\n    \n    //처음으로부터 변경된 거리\n    pointerDrag.offsetX = pointerDrag.x - firstDrag.x;\n    pointerDrag.offsetY = pointerDrag.y - firstDrag.y;\n    \n    //처음으로 부터 변경되어 엘리먼트 오프셋 크기\n    pointerDrag.leftValue = dragParams.offset.left + pointerDrag.offsetX;\n    pointerDrag.topValue  = dragParams.offset.top + pointerDrag.offsetY;\n    \n    pointerDrag.left = pointerDrag.leftValue + \"px\";\n    pointerDrag.top  = pointerDrag.topValue + pointerDrag.offsetY + \"px\";\n    \n    return pointerDrag;\n  }\n  \n  const dragEnter = function({ originalEvent }){\n    //init\n    resetOptions();\n    \n    //\n    const elementOffset = $element.predict();\n    const pointerDrag   = pointerParse(originalEvent);\n    \n    firstDrag = pointerDrag;\n    lastDrag  = pointerDrag;\n    \n    dragParams = { offset:elementOffset, pointer:undefined };\n    dragParams.pointer = getCurrentPointerDrag(originalEvent);\n    \n    startFn && startFn(dragParams);\n    \n    $(document)\n    .on(\"mousemove\",dragMove)\n    .on(\"mouseup\",dragExit);\n    \n    $(\"body\").attr(\"dragging\", \"\");\n  };\n  \n  const dragMove = function({ originalEvent }){\n    const pointerDrag = pointerParse(originalEvent);\n    if(!moveFn){\n      lastDrag = pointerDrag;\n      return;\n    } else {\n      dragParams.pointer = getCurrentPointerDrag(originalEvent);\n      moveFn(dragParams);\n      lastDrag = pointerDrag;\n    }\n  };\n  \n  const dragExit = function({ originalEvent }){\n    dragParams.pointer = getCurrentPointerDrag(originalEvent);\n    endFn && endFn(dragParams);\n    dragParams = undefined;\n    \n    $(document)\n    .off(\"mousemove\",dragMove)\n    .off(\"mouseup\",dragExit);\n    \n    $(\"body\").removeAttr(\"dragging\");\n  };\n  \n  $element.on(\"mousedown\",dragEnter);\n  \n  return $element;\n}","import { asArray } from '../../functions';\n\nexport default function RepeatHelper({ key, enter:enterFn, update:updateFn, exit:exitFn }){\n  // {key:string, vm:Component}\n  let oldBag = [];\n  \n  // 모델의 키를 얻는 함수\n  const getKey = typeof key === \"function\" ? key : function(datum){\n    return datum[key];\n  }\n  \n  // ng-repeat, v-for와 같은 리피터 구현체 (d3의 data().enter().exit() 컨샙이 비슷함)\n  const repeater = function(data){\n    let newData = asArray(data);\n    let newBag  = [];\n    \n    //새 데이터를 검사합니다.\n    newData.forEach((datum, index)=>{\n      //키를 추출합니다.\n      const newDatumKey = getKey(datum) || index;\n      \n      //키 샘플입니다.\n      const newMeta = {\n        key:newDatumKey,\n        datum:datum,\n      };\n      \n      //매치되는 오래된 메타를 확인합니다.\n      const matchOldMeta = oldBag.find(old=>old.key === newDatumKey);\n      \n      //오래된 메타가 확인될 시\n      if(matchOldMeta){\n        //exit를 하지 않고 살립니다.\n        newMeta.vm = matchOldMeta.vm;\n        matchOldMeta.$continue = true;\n      }\n      \n      newBag.push(newMeta);\n    });\n    \n    //exit (require)\n    oldBag.forEach(oldMeta=>{\n      if(!oldMeta.$continue){\n        exitFn(oldMeta);\n      }\n    });\n    \n    //메타에 추가 정보 입력 (prevVm)\n    newBag.forEach((newMeta, index)=>{\n      const prevMeta = newBag[index - 1];\n      if(prevMeta && prevMeta[\"vm\"]){\n        newMeta[\"prevVm\"] = prevMeta[\"vm\"];\n      }\n    });\n    \n    //enter (require)\n    newBag.forEach((newMeta, index)=>{\n      if(!newMeta.vm){\n        let result = enterFn(newMeta, index);\n        if(!result){\n          throw new Error(\"enter는 반드시 vm을 리턴해야합니다.\");\n        } else {\n          newMeta[\"vm\"] = result;\n        }\n      }\n    });\n    \n    //update (option)\n    updateFn && newBag.forEach((newMeta, index)=>{\n      updateFn(newMeta, index);\n    });\n    \n    //history change\n    oldBag = newBag;\n  }\n  \n  //컴포넌트에서 정렬된 데이터를 얻기위한 용도로 제작. Component에서 (개발 시간상) 한계로 이곳에서 수행\n  repeater[\"vm\"] = function(){\n    return oldBag.map(d=>d.vm);\n  }\n  \n  return repeater;\n};","import _dragHelper from './helper/dragHelper'\nimport _repeatHelper from './helper/repeatHelper'\n\nexport const dragHelper = _dragHelper;\nexport const repeatHelper = _repeatHelper;","import * as helpers from './dom/index.js'\nconst DEFAULT = { ...helpers }\nexport default DEFAULT;"],"names":["isAbsoluteNaN","it","isNone","data","undefined","isArray","Array","isPlainObject","constructor","Object","asArray","defaultArray","toArray","$","window","require","e","jsdom","JSDOM","dom","contentType","userAgent","includeNodeLocations","global","document","isPointerEvent","getOriginalEvent","getElementPosition","el","element","xPosition","yPosition","offsetLeft","scrollLeft","clientLeft","offsetTop","scrollTop","clientTop","offsetParent","x","y","getPointerPosition","root","documentElement","evt","pos","touches","pageX","clientX","pageY","clientY","fn","extend","containsIn","node","eq","target","i","l","length","find","containsOut","predict","offset","offsetWidth","innerWidth","offsetHeight","innerHeight","result","top","left","width","height","right","bottom","center","middle","forEach","key","equalize","pointerParse","DragHelper","option","$element","startFn","moveFn","endFn","dragParams","firstDrag","lastDrag","resetOptions","getOptions","getCurrentPointerDrag","originalEvent","pointerDrag","moveX","moveY","offsetX","offsetY","leftValue","topValue","dragEnter","elementOffset","pointer","on","dragMove","dragExit","attr","off","removeAttr","RepeatHelper","enterFn","enter","updateFn","update","exitFn","exit","oldBag","getKey","datum","repeater","newData","newBag","index","newDatumKey","newMeta","matchOldMeta","old","vm","$continue","push","oldMeta","prevMeta","Error","map","d","dragHelper","_dragHelper","repeatHelper","_repeatHelper","DEFAULT","helpers"],"mappings":"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"}