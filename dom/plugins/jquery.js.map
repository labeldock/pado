{"version":3,"sources":["../../.src/dom/plugins/jquery.js"],"names":["$","window","document","require","e","jsdom","JSDOM","dom","contentType","userAgent","includeNodeLocations","global","getCurrentTarget","originalEvent","fallbackElement","result","currentTarget","target","documentElement","isElementEvent","stopPropagation","getOriginalEvent","undefined","getElementPosition","el","element","xPosition","yPosition","offsetLeft","scrollLeft","clientLeft","offsetTop","scrollTop","clientTop","offsetParent","x","y","getPointerPosition","root","evt","pos","touches","pageX","clientX","pageY","clientY","fn","extend","containsIn","node","eq","i","l","length","find","containsOut","predict","option","offsetWidth","innerWidth","offsetHeight","innerHeight","top","left","width","height","right","bottom","center","middle","allProps","filter","hasOwnProperty","key","forEach","optionOfKey","pointerPosition","test","valueOfKey","equalize"],"mappings":"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","sourcesContent":["import { isPlainObject } from '../../functions';\n\nlet $;\n\ntry {\n  (window,document);\n  $ = require('jquery');\n} catch(e){\n  const { JSDOM } = jsdom;\n  const dom = new JSDOM('<html><head><meta charset=\"utf-8\"></head><body></body></html>',{\n    contentType: \"text/html\",\n    userAgent: \"Mellblomenator/9000\",\n    includeNodeLocations: true\n  });\n  global.window = dom.window;\n  global.document = dom.document;\n  $ = require('jquery');\n}\n\nconst getCurrentTarget = function(originalEvent, fallbackElement){\n  let result = originalEvent.currentTarget || originalEvent.target;\n  return (result && result.documentElement) ? (fallbackElement || result.documentElement) : document.documentElement;\n}\n\nconst isElementEvent = $.isElementEvent = function (e){\n  return typeof e.stopPropagation === \"function\";\n}\n\nconst getOriginalEvent = $.getOriginalEvent = function(e){\n  if(!isElementEvent(e)) return undefined;\n};\n\nconst getElementPosition = $.getElementPosition = function(el){\n  let [ element ] = $(el);\n  \n  if(!element) return null;\n  \n  let xPosition = 0;\n  let yPosition = 0;\n  \n  while(element && !element.documentElement){\n    xPosition += (element.offsetLeft - element.scrollLeft + element.clientLeft);\n    yPosition += (element.offsetTop  - element.scrollTop  + element.clientTop );\n    element   = element.offsetParent;\n  }\n  \n  return {x:xPosition,y:yPosition};\n}\n\n\nconst getPointerPosition = $.getPointerPosition = function(e, root){\n  \n  root = !root ? document.documentElement : root;\n\n  const evt = getOriginalEvent(e);\n  const pos = getElementPosition(root);\n  \n  if(!pos) return;\n  \n  pos.x = e.touches ? e.touches[0].pageX : e.clientX - pos.x;\n  pos.y = e.touches ? e.touches[0].pageY : e.clientY - pos.y;\n  return pos;\n}\n\n$.fn.extend({\n  //파라메터 노드가 제이쿼리가 가진 노드 안에 있는지 확인\n  containsIn (node){\n    var [ target ] = $(node).eq(0);\n    if(target) for(var i=0,l=this.length;i<l;i++){\n      if(this[i] === target) return true;\n      if(this.eq(i).find(target).length) return true;\n    }\n    return false;\n  },\n  //파라메터 노드가 제이쿼리가 가진 노드 밖에 있는지 확인\n  containsOut (node){\n    return !this.containsIn(node);\n  },\n  /*\n    //\n    $(window).predict()\n    $(window).predict({center:20});\n    $(window).predict({center:event});\n    \n    //TODO\n    $(window).predict(element)\n    $(window).predict(element, {center:20});\n  */\n  predict (option,root){\n    const [ element ] = this.eq(0);\n    if(!element) return;\n    \n    const { offsetTop, offsetLeft, offsetWidth, offsetHeight } = element[\"innerWidth\"] ? {\n      offsetTop   :0, \n      offsetLeft  :0, \n      offsetWidth :window.innerWidth, \n      offsetHeight:window.innerHeight\n    } : element;\n    \n    const result = {\n      top   :offsetTop,\n      left  :offsetLeft,\n      width :offsetWidth,\n      height:offsetHeight,\n      right :offsetLeft + offsetWidth,\n      bottom:offsetTop + offsetHeight,\n      center:offsetLeft + offsetWidth / 2,\n      middle:offsetTop + offsetHeight / 2\n    };\n    \n    \n    //if(isElementEvent(option)){\n    //  const { x:left, y:top } = getPointerPosition(offset);\n    //  option = { left, top };\n    //}\n      \n    if(isPlainObject(option)){\n      const allProps = [\"top\", \"left\", \"width\", \"height\", \"right\", \"bottom\", \"center\", \"middle\"].filter(key=>option.hasOwnProperty(key));\n      \n      //event option\n      allProps.forEach((key)=>{\n        const optionOfKey = option[key]\n        if(!isElementEvent(optionOfKey)) return;\n        const pointerPosition = getPointerPosition(optionOfKey,root || getCurrentTarget(optionOfKey, element) || element);\n        if(!pointerPosition) return;\n        \n        if(/left|width|right|center/.test(key)){\n          option[key] = pointerPosition[\"x\"]\n        }\n        \n        if(/top|middle|bottom|height/.test(key)){\n          option[key] = pointerPosition[\"y\"]\n        }\n      });\n      \n      allProps.forEach((key)=>{\n        if(typeof option[key] !== \"number\") return;\n\n        const valueOfKey = result[key];  \n        let equalize;\n        \n        switch(key){\n        case \"top\":\n        case \"middle\":\n          equalize = [\"y\", option[key] - valueOfKey];\n          break;\n        case \"left\":\n        case \"center\":\n          equalize = [\"x\", option[key] - valueOfKey];\n          break;\n        case \"width\":\n          equalize = [\"width\", option[key] - valueOfKey];\n          break;\n        case \"height\":\n          equalize = [\"height\", option[key] - valueOfKey];\n          break;\n        case \"right\":\n          break;\n        case \"bottom\":\n          break;\n        }\n          \n        switch(equalize && equalize[0]){\n        case \"x\":\n          result[\"left\"]   += equalize[1];\n          result[\"center\"] += equalize[1];\n          result[\"right\"]  += equalize[1];\n          break;\n        case \"y\":\n          result[\"top\"]    += equalize[1];\n          result[\"middle\"] += equalize[1];\n          result[\"bottom\"] += equalize[1];\n          break;\n        case \"width\":\n          result[\"width\"]  += equalize[1];\n          result[\"right\"]  += equalize[1];\n          result[\"center\"] += (result[\"right\"] - result[\"left\"] / 2);\n          break;\n        case \"height\":\n          result[\"height\"] += equalize[1];\n          result[\"bottom\"] += equalize[1];\n          result[\"middle\"] += (result[\"bottom\"] - result[\"top\"] / 2);\n          break;\n        }\n      });\n    }\n    \n    return result;\n  }\n});\n\nexport default $;"],"file":"jquery.js"}