{"version":3,"sources":["../packages/pado/modules/stance.js"],"names":["likePoint","p","hasOwnProperty","calcTransformedPoint","__ref","matrix","perspectiveOrigin","transformPoint","x","y","z","px","py","pz","w","Point","meta","__meta","__transformedPoint","Object","defineProperties","enumerable","get","transform","set","v","undefined","it","assign","configurable","writable","value","rx","rangeWidth","range","width","ry","rangeHeight","height","prototype","addMeta","obj","clone","call","fn","toJSON","withMeta","json","pull","angle","xHalf","Vertex","vertexWith","destPoint","points","unshift","rectWith","largeX","smallX","largeY","smallY","Rect","applyTransform","setTransform","matrix44","Error","add","subtract","pointArray","forEach","point","push","classFunction","methods","keys","key","start","end","length","result","eq","index","join","joins","refp","i","newp","splice","order","pw","sx","sy","sz","sw","ex","ey","ez","ew","rect","first","left","right","top","bottom","d","l","param","newValue","splitCountParser","split","columnOrder","rowOrder","column","parseInt","row","defaultPerspective","perspective","findPoint","findWord","trim","lineFind","pointFind","vertex","inheritMeta","middleY","centerX","transformRect","piecesWithCount","splitCount","eachResultHook","pieceWidth","pieceHeight","pacExt","Array","pacResult","colIndex","rowIndex","pacMeta","coords","diff","aleft","atop","awidth","aheight","aright","abottom","diffResult","original","offset","want","over","move","nleft","ntop","fitRatio","WHRatio","transformRatio","sort","fit","sticky","position","refX","refY","refWidth","refHeight","Movement","distance","rotate","time","angleValue","theta","Math","PI","from","object","cos","sin","setAngle","valid","movement"],"mappings":"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","sourcesContent":["import { isArray, isNumber } from '../functions/isLike'\nimport { asArray, toNumber } from '../functions/cast'\nimport { validMatrix, multiplyMatrix } from '../functions/matrix'\nimport { makeMatrixArray } from './matrix'\n\n\nconst likePoint = function (p){\n  return typeof p === \"object\" && p.hasOwnProperty(\"x\") && p.hasOwnProperty(\"y\")\n}\n\nconst calcTransformedPoint = (__ref, { matrix, perspectiveOrigin })=>{\n  // yet support affin\n  //let perspectiveVar = (this.meta && this.meta.perspective)\n  //perspectiveVar = !isNumber(perspectiveVar) ? 0 : perspectiveVar;\n  //perspectiveVar = -1/perspectiveVar;\n  //perspectiveVar = isInfinity(perspectiveVar) ? 0 : (perspectiveVar || 0) ;\n  if(!matrix) return\n  \n  const transformPoint = {}\n  const { x:px = 0, y:py = 0, z:pz = 0 } = perspectiveOrigin || { x: 0, y: 0, z: 0 }\n  const [[x], [y], [z], [w]] = multiplyMatrix(matrix, [[__ref.x - px], [__ref.y - py], [__ref.z - pz], [__ref.w]])\n  \n  transformPoint.x = x + px + matrix[0][3]\n  transformPoint.y = y + py + matrix[1][3]\n  transformPoint.z = z + pz + matrix[2][3]\n  transformPoint.w = w\n  \n  return transformPoint\n}\n\nconst Point = function (x = 0, y = 0, z = 0, w = 1, meta){\n  // base point config\n  const __ref = { x, y, z, w }\n  let __meta = {}\n  let __transformedPoint\n  \n  Object.defineProperties(this, {\n    x: { \n      enumerable: true,\n      get       : ()=>{\n        if(this.transform === true){\n          !__transformedPoint && (__transformedPoint = calcTransformedPoint(__ref, this.meta))\n          return __transformedPoint ? __transformedPoint.x : __ref.x\n        }\n        return __ref.x\n      }, \n      set: v=>{\n        __transformedPoint = undefined\n        __ref.x = v\n      }\n    },\n    y: { \n      enumerable: true,\n      get       : ()=>{\n        if(this.transform === true){\n          !__transformedPoint && (__transformedPoint = calcTransformedPoint(__ref, this.meta))\n          return __transformedPoint ? __transformedPoint.y : __ref.y\n        }\n        return __ref.y\n      }, \n      set: v=>{\n        __transformedPoint = undefined\n        __ref.y = v\n      }\n    },\n    z: { \n      enumerable: true,\n      get       : ()=>{\n        if(this.transform === true){\n          !__transformedPoint && (__transformedPoint = calcTransformedPoint(__ref, this.meta))\n          return __transformedPoint ? __transformedPoint.z : __ref.z\n        }\n        return __ref.z\n      }, \n      set: v=>{\n        __transformedPoint = undefined\n        __ref.z = v\n      }\n    },\n    w: { \n      enumerable: true,\n      get       : ()=>{\n        if(this.transform === true){\n          !__transformedPoint && (__transformedPoint = calcTransformedPoint(__ref, this.meta))\n          return __transformedPoint ? __transformedPoint.w : __ref.w\n        }\n        return __ref.w\n      }, \n      set: v=>{\n        __transformedPoint = undefined\n        __ref.w = v\n      }\n    },\n    meta: {\n      enumerable: false, \n      get (){ return __meta },\n      set (it){ \n        typeof it === \"object\" && Object.assign(__meta, it)\n        __transformedPoint = undefined\n        return __meta\n      }\n    },\n    transform: {\n      enumerable  : false,\n      configurable: false,\n      writable    : true,\n      value       : false\n    },\n    rx: { enumerable: false,\n      get       : ()=>{\n        const rangeWidth = (this.meta && this.meta.range && this.meta.range.width) || 0\n        return this.x / rangeWidth\n      }\n    },\n    ry: { \n      enumerable: false,\n      get       : ()=>{\n        const rangeHeight = (this.meta && this.meta.range && this.meta.range.height) || 0\n        return this.y / rangeHeight\n      }\n    }\n  })\n  \n  if(typeof meta === \"object\"){\n    this.meta = meta\n  }\n}\n\nPoint.prototype = {\n  addMeta (obj){\n    if(typeof obj === \"object\") this.meta = Object.assign(this.meta && this.meta || {}, obj)\n    return this\n  },\n  clone (){\n    return new Point(this.x, this.y, this.z, this.w, this.meta)\n  },\n  call (fn){\n    if(typeof fn === \"function\"){\n      return fn(this) || this\n    }\n    return this\n  },\n  toJSON (withMeta){\n    const json = { x: this.x, y: this.y, z: this.z, w: this.w }\n    if(withMeta === true && this.meta) json.meta = this.meta\n    return json\n  },\n  pull (width = 0, angle = \"horizontal\"){\n    const { x, y, z, w } = this\n    switch (angle){\n      case \"h\": case \"horizontal\":\n        const xHalf = width <= 0 ? 0 : width / 2\n        return new Vertex([{ x: x - xHalf, y, z, w }, { x: x + xHalf, y, z, w }])\n      default:\n    }\n  },\n  vertexWith (destPoint){\n    const points = asArray(destPoint)\n    points.unshift(this)\n    return new Vertex(points)\n  },\n  rectWith ({ x, y }){\n    const [largeX, smallX] = this.x > x ? [ this.x, x ] : [ x, this.x ]\n    const [largeY, smallY] = this.y > y ? [ this.y, y ] : [ y, this.y ]\n    return new Rect(smallX, smallY, largeX - smallX, largeY - smallY, 0, 0)\n  },\n  applyTransform (){\n    const { x, y, z, w } = this\n    this.transform = false\n    this.x = x\n    this.y = y\n    this.z = z\n    this.w = w\n    return this\n  },\n  setTransform (matrix44 = this.meta.matrix){\n    if(!validMatrix(matrix44)){\n      this.transform = false\n      throw new Error('Point::setTransform invalid matrix', matrix44)\n      return this\n    }\n    \n    this.meta.matrix = matrix44\n    this.transform = true\n    \n    return this\n  },\n  add ({ x, y, z, w }){\n    isNumber(x) && x && (this.x += x)\n    isNumber(y) && y && (this.y += y)\n    isNumber(z) && z && (this.z += z)\n    isNumber(w) && w && (this.w += w)\n    return this\n  },\n  subtract ({ x, y, z, w }){\n    isNumber(x) && x && (this.x -= x)\n    isNumber(y) && y && (this.y -= y)\n    isNumber(z) && z && (this.z -= z)\n    isNumber(w) && w && (this.w -= w)\n    return this\n  }\n}\n\nconst Vertex = function (pointArray, meta){\n  let __meta\n  \n  Object.defineProperties(this, {\n    meta: {\n      enumerable: false, \n      get (){ return __meta },\n      set (it){ __meta = typeof it === \"object\" ? it : null; return __meta }\n    }\n  })\n  \n  this.meta = meta\n  \n  asArray(pointArray).forEach(point=>{\n    if(!likePoint(point)) return\n    const { x, y, z, w } = point\n    this.push(new Point(x, y, z, w, __meta))\n  })\n};\n\n(function (classFunction, methods){\n  const prototype = []\n  \n  classFunction.prototype = prototype\n  \n  Object.keys(methods).forEach(key=>{\n    prototype[key] = methods[key]\n  })\n  \n  Object.defineProperties(prototype, {\n    start: {\n      enumerable: false,\n      get (){\n        return this[0]\n      }\n    },\n    end: {\n      enumerable: false,\n      get (){\n        return !this.length ? void 0 : this[this.length - 1]\n      }\n    }\n  })\n}(Vertex, {\n  addMeta (obj){\n    if(typeof obj === \"object\") this.meta = Object.assign(this.meta && this.meta || {}, obj)\n    return this\n  },\n  toJSON (withMeta){\n    const result = []\n    this.forEach(p=>result.push(p.toJSON(withMeta)))\n    return result\n  },\n  clone (){\n    return new Vertex(this)\n  },\n  eq (index){\n    return this[index]\n  },\n  join: function (fn){\n    const joins = []\n    this.forEach((refp, i)=>{\n      joins.push(refp)\n      if(!this[i + 1]) return\n      const newp = fn(refp, this[i + 1], i)\n      if(!likePoint(newp)) return\n      const { x, y, z, w, meta } = newp\n      joins.push(new Point(x, y, z, w, meta))\n    })\n    this.splice(0, this.length)\n    joins.forEach(p=>this.push(p))\n    return this\n  },\n  point (order){\n    switch (order){\n      case \"e\": case \"end\":\n      case \"d\": case \"down\": case \"r\": case \"right\":\n        const { x:px, y:py, z:pz, w:pw } = this.end\n        return new Point(\n          px,\n          py,\n          pz,\n          pw,\n          this.meta\n        )\n      case \"c\": case \"m\": case \"center\": case \"middle\":\n        const { x:sx, y:sy, z:sz, w:sw } = this.start\n        const { x:ex, y:ey, z:ez, w:ew } = this.end\n        return new Point(\n          sx / 2 + ex / 2,\n          sy / 2 + ey / 2,\n          sz / 2 + ez / 2,\n          sw / 2 + ew / 2,\n          this.meta\n        )\n      case \"s\": case \"start\":\n      case \"u\": case \"up\": case \"l\": case \"left\":\n      default:\n        const { x, y, z, w } = this.start\n        return new Point(\n          x,\n          y,\n          z,\n          w,\n          this.meta\n        )\n    }\n  },\n  rect (){\n    const first = this[0]\n    \n    if(!first){\n      return new Rect(0, 0, 0, 0)\n    }\n    \n    let left = first.x\n    let right = first.x\n    let top = first.y\n    let bottom = first.y\n    \n    for(let d = this, i = 1, l = this.length; i < l; i++){\n      const p = d[i]\n      p.x < left && (left = p.x)\n      p.x > right && (right = p.x)\n      p.y < top && (top = p.y)\n      p.y > bottom && (bottom = p.y)\n    }\n    \n    return new Rect(left, top, right - left, bottom - top)\n  },\n  setTransform (param){\n    this.forEach(p=>p.setTransform(param))\n    return this\n  }\n}))\n\n\nconst Rect = function (left = 0, top = 0, width = 0, height = 0, meta = null){\n  const __ref = { left, top, width, height }\n  let __meta = {}\n  \n  Object.defineProperties(this, {\n    width: { \n      enumerable: true, \n      get (){ return __ref.width },\n      set (newValue){\n        __ref.width = newValue\n        return newValue\n      }\n    },\n    height: { \n      enumerable: true, \n      get (){ return __ref.height },\n      set (newValue){\n        __ref.height = newValue\n        return newValue\n      }\n    },\n    left: { enumerable: true,\n      get (){ return __ref.left },\n      set (newValue){\n        __ref.left = newValue\n        return newValue\n      }\n    },\n    top: { enumerable: true,\n      get (){ return __ref.top },\n      set (newValue){\n        __ref.top = newValue\n        return newValue\n      }\n    },\n    right : { enumerable: true, get (){ return this.left + this.width } },\n    bottom: { enumerable: true, get (){ return this.top + this.height } },\n    meta  : {\n      enumerable: false, \n      get (){ return __meta },\n      set (it){ \n        typeof it === \"object\" && Object.assign(__meta, it)\n        return __meta\n      }\n    }\n  })\n  \n  if(typeof meta === \"object\"){\n    this.meta = meta\n  }\n}\n\nconst splitCountParser = (split)=>{\n    //splitCount [ horizental, vertical ]\n    //1 = [ 1 ]\n    //[1, 2] = [1, 2]\n  const [ columnOrder, rowOrder ] = asArray(split)\n  return {\n    column: isNumber(columnOrder) && columnOrder > 0 ? parseInt(columnOrder, 10) : 1,\n    row   : isNumber(rowOrder) && rowOrder > 0 ? parseInt(rowOrder, 10) : 1\n  }\n}\n\nRect.prototype = {\n  addMeta (obj){\n    if(typeof obj === \"object\") this.meta = Object.assign(this.meta && this.meta || {}, obj)\n    return this\n  },\n  clone (){\n    return new Rect(this.left, this.top, this.width, this.height, this.meta)\n  },\n  toJSON (withMeta){\n    const json = { width: this.width, height: this.height, left: this.left, top: this.top, right: this.right, bottom: this.bottom }\n    if(withMeta === true && this.meta) json.meta = this.meta\n    return json\n  },\n  defaultPerspective (){\n    return {\n      perspective      : 0,\n      perspectiveOrigin: {\n        x: this.left + (this.width / 2),\n        y: this.top + (this.height / 2),\n        z: 0\n      }\n    }\n  },\n  findPoint (findWord){\n    const [ lineFind, pointFind ] = isArray(findWord) ? findWord : findWord.trim().split(/\\s+/)\n    return this.vertex(lineFind).point(pointFind)\n  },\n  vertex (order){\n    const inheritMeta = Object.assign(this.defaultPerspective(), this.meta)\n    \n    switch (order){\n      case \"right\": case \"r\":\n        return new Vertex([{ x: this.right, y: this.top, z: 0, w: 0 }, { x: this.right, y: this.bottom, z: 0, w: 0 }], inheritMeta)\n      case \"bottom\": case \"b\":\n        return new Vertex([{ x: this.left, y: this.bottom, z: 0, w: 0 }, { x: this.right, y: this.bottom, z: 0, w: 0 }], inheritMeta)\n      case \"left\": case \"l\":\n        return new Vertex([{ x: this.left, y: this.top, z: 0, w: 0 }, { x: this.left, y: this.bottom, z: 0, w: 0 }], inheritMeta)\n      case \"top\": case \"t\":\n        return new Vertex([{ x: this.left, y: this.top, z: 0, w: 0 }, { x: this.right, y: this.top, z: 0, w: 0 }], inheritMeta)\n      case \"middle\": case \"m\":\n        const middleY = this.height / 2 + this.top\n        return new Vertex(\n          [\n            { x: this.left, y: middleY, z: 0, w: 0 },\n            { x: this.right, y: middleY, z: 0, w: 0 }\n          ],\n          inheritMeta\n        )\n      case \"center\": case \"c\":\n        const centerX = this.width / 2 + this.x\n        return new Vertex(\n          [\n            { x: centerX, y: this.top, z: 0, w: 0 },\n            { x: centerX, y: this.bottom, z: 0, w: 0 }\n          ],\n          inheritMeta\n        )\n      default:\n        return new Vertex(\n          [\n            { x: this.left, y: this.top, z: 0, w: 0 },\n            { x: this.left, y: this.bottom, z: 0, w: 0 },\n            { x: this.right, y: this.bottom, z: 0, w: 0 },\n            { x: this.right, y: this.top, z: 0, w: 0 }\n          ],\n          inheritMeta\n        )\n    }\n  },\n  transformRect (){\n    this.vertex()\n  },\n  piecesWithCount (splitCount, eachResultHook){\n    const { column, row } = splitCountParser(splitCount)\n    const width = this.width\n    const height = this.height\n    const pieceWidth = width / column\n    const pieceHeight = height / row\n    eachResultHook = typeof eachResultHook === \"function\" ? eachResultHook : undefined\n    \n    \n    const pacExt = { ...this.defaultPerspective() }\n    \n    if(this.meta.matrix && this.meta.matrix instanceof Array){\n      Object.assign(pacExt, {\n        matrix: this.meta.matrix\n      })\n    }\n    \n    const pacResult = makeMatrixArray(column, row, (index, colIndex, rowIndex)=>{\n      const pacMeta = { \n        column: colIndex,\n        row   : rowIndex,\n        coords: [colIndex, rowIndex], \n        range : { width, height },\n        ...pacExt\n      }\n      \n      //\n      const result = new Rect(colIndex * pieceWidth, rowIndex * pieceHeight, pieceWidth, pieceHeight, pacMeta)\n      return eachResultHook ? eachResultHook(result, index, colIndex, rowIndex) : result\n    })\n    \n    return pacResult\n  },\n  diff ({ left:aleft = 0, top:atop = 0, width:awidth = 0, height:aheight = 0, right:aright, bottom:abottom }){\n    const diffResult = {}\n    const original = this.toJSON()\n    const offset = { left: 0, top: 0 }\n    Object.defineProperties(diffResult, {\n      left: {\n        enumerable: true, \n        get       : ()=>original.left - aleft + offset.left,\n        set       : (want)=>{ offset.left = typeof want === \"number\" ? -original.left + want : 0 }\n      },\n      top: {\n        enumerable: true,\n        get       : ()=>original.top - atop + offset.top,\n        set       : (want)=>{ offset.top = typeof want === \"number\" ? -original.top + want : 0 }\n      },\n      width : { enumerable: true, get: ()=>original.width - awidth },\n      height: { enumerable: true, get: ()=>original.height - aheight },\n      right : { enumerable: true, get: ()=>original.right - aright + offset.left },\n      bottom: { enumerable: true, get: ()=>original.bottom - abottom + offset.top },\n      x     : { enumerable: false, get: ()=>offset.left },\n      y     : { enumerable: false, get: ()=>offset.top },\n      offset: {\n        enumerable: false,\n        get       : ()=>()=>({\n          x     : offset.left,\n          y     : offset.top,\n          right : diffResult.right,\n          bottom: diffResult.bottom,\n          over  : diffResult.right > diffResult.bottom ? diffResult.right : diffResult.bottom\n        })\n      },\n      move: {\n        enumerable: false,\n        get       : ()=>(nleft, ntop)=>{\n          diffResult.left = typeof nleft === \"number\" ? nleft : aleft\n          diffResult.top = typeof ntop === \"number\" ? ntop : atop\n          return diffResult\n        }\n      },\n      toJSON: {\n        enumerable: false,\n        get       : ()=>()=>({ ...diffResult })\n      }\n    })\n    \n    return diffResult\n  },\n  fitRatio (rect){\n    if(typeof rect !== \"object\"){ throw new Error(\"fit::argument[0] is not object\") }\n    const { width, height } = rect\n    \n    if(!isNumber(width) || !isNumber(height)){ throw new Error(\"fit::argument[0] is not { width:Number, height:Number }\") }\n    const WHRatio = [ width / this.width, height / this.height ]\n    const transformRatio = WHRatio.sort()[0]\n    return transformRatio\n  },\n  fit (rect){\n    const transformRatio = this.fitRatio(rect)\n    \n    this.width = (this.width * transformRatio) || 0\n    this.height = (this.height * transformRatio) || 0\n    \n    return this\n  },\n  //TODO : incompleted sticky(parent, position, offset);\n  sticky ({ left:refX, top:refY, width:refWidth, height:refHeight }, position = \"bottom left\"){\n    const { left, top, width, height } = this\n    switch (position){\n      case \"bl\": case \"obl\": case \"bottom left\": case \"outer bottom left\":\n        return rect({\n          left: refX,\n          top : refY + refHeight,\n          width,\n          height\n        })\n      case \"c\": case \"m\": case \"mc\": case \"center\": case \"middle\": case \"middle center\":\n        return rect({\n          left: refX + refWidth / 2 - width / 2,\n          top : refY + refHeight / 2 - height / 2,\n          width,\n          height\n        })\n      default:\n        return rect({ left, top, width, height })\n    }\n  },\n  add ({ left, top, width, height }){\n    isNumber(left) && left && (this.left += left)\n    isNumber(top) && top && (this.top += top)\n    isNumber(width) && width && (this.width += width)\n    isNumber(height) && height && (this.height += height)\n    return this\n  },\n  subtract ({ left, top, width, height }){\n    isNumber(left) && left && (this.left -= left)\n    isNumber(top) && top && (this.top -= top)\n    isNumber(width) && width && (this.width -= width)\n    isNumber(height) && height && (this.height -= height)\n    return this\n  }\n}\n\nconst Movement = function (distance, rotate, time){\n  \n  const __ref = {\n    rotate  : toNumber(rotate),\n    distance: toNumber(distance),\n    time    : toNumber(time)\n  }\n  \n  Object.defineProperties(this, {\n    rotate: {\n      enumerable: true,\n      get (){\n        return __ref.rotate\n      }\n    },\n    distance: {\n      enumerable: true,\n      get (){\n        return __ref.distance\n      }\n    },\n    time: {\n      enumerable: true,\n      get (){\n        return __ref.time\n      }\n    },\n    angle: {\n      enumerable: false,\n      get (){\n        const { rotate } = this\n        return !rotate ? 0 : 360 * (rotate + 0)\n      },\n      set (angle){\n        const angleValue = toNumber(angle)\n        __ref.rotate = !isNumber(angleValue) ? 0 : angleValue / 360\n        !isNumber(__ref.rotate) && (__ref.rotate = 0)\n        return this\n      }\n    },\n    theta: {\n      enumerable: false,\n      get (){\n        const { angle } = this\n        return angle * Math.PI / 180.0\n      }\n    }\n  })\n}\n\nMovement.prototype = {\n  clone (){\n    return new Movement(this.distance, this.rotate, this.time)\n  },\n  from (object){\n    const { theta, distance } = this\n    \n    if(object instanceof Point){\n      const { x, y } = object\n      return new Point(\n        x + distance * Math.cos(theta),\n        y + distance * Math.sin(theta)\n      )\n    }\n    return null\n  },\n  setAngle (angle){\n    this.angle = angle\n    return this\n  }\n}\n\nexport const point = function (x, y, z, w){\n  return typeof x === \"object\" \n    ? new Point(x.x, x.y, x.z, x.w) \n    : new Point(x, y, z, w)\n}\n\nexport const vertex = function (start, end){\n  return new Vertex([{ x: start.x, y: start.y, z: start.z, w: start.w }, { x: end.x, y: end.y, z: end.z, w: end.w }])\n}\n\nexport const rect = function (left, top, width, height, x, y, valid){\n  return typeof left === \"object\"\n    ? new Rect(left.left, left.top, left.width, left.height, left.x, left.y, left.valid)\n    : new Rect(left, top, width, height, x, y, valid)\n}\n\nexport const movement = function (distance, rotate, time){\n  return new Movement(distance, rotate, time)\n}\n"],"file":"stance.js"}