{"version":3,"sources":["../packages/pado/modules/paginate.js"],"names":["PaginateClass","opts","page","pagePer","paginatePer","totalItems","parameters","pagesOutputStyle","$pending","$fetchFn","fetch","$renderFn","render","update","$fetchState","console","error","prototype","isAllowPaginate","needTo","paginateLimit","isAllowIndex","pagelimit","pageLimit","payload","promise","reject","Error","Object","assign","pageState","resolve","valueOf","then","e","warn","catch","updateOpts","hasOwnProperty","params","refresh","fetchIndex","pageIndex","fetchNext","fetchPrev","fetchTo","command","action","defineProperty","get","fixIndex","isFinite","Math","floor","ceil","paginate","startPageIndex","endPageIndex","numberItems","push","index","number","$disabled","$active","splice","Number","POSITIVE_INFINITY","disabledStartIndex","d","i","l","length","enumerable","allowNext","allowPrev","allowNextPaginate","allowPrevPaginate","pages","keys","reduce","dest","name","paginateFactory","constructor","Paginate"],"mappings":"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","sourcesContent":["import { promise } from './promise'\n\nconst PaginateClass = function (opts){\n  // current page index\n  this.page = 0\n  // page per display item length\n  this.pagePer = 10\n  // paginate per display page length\n  this.paginatePer = 10\n  // totalItem count\n  this.totalItems = 0\n  // extra payload\n  this.parameters = {}\n  // pages ouput style ( all | existOnly )\n  this.pagesOutputStyle = 'existOnly'\n\n  this.$pending = false\n  this.$fetchFn = opts.fetch\n  this.$renderFn = opts.render\n\n  this.update(opts)\n  this.$fetchState = -1\n\n  if(typeof this.$fetchFn !== \"function\"){\n    console.error(\"paginate::fetch 초기 옵션에 반드시 합수를 선언해 주세요\")\n  }\n\n  if(typeof this.$renderFn !== \"function\"){\n    console.error(\"paginate::render 초기 옵션에 반드시 함수를 선언해 주세요\")\n  }\n}\n\nPaginateClass.prototype = {\n  isAllowPaginate (needTo){\n    return needTo > -1 && needTo < this.paginateLimit\n  },\n  isAllowIndex (needTo, pagelimit){\n    pagelimit = (typeof pagelimit === \"number\") ? pagelimit : this.pageLimit\n    if(pagelimit < 0) return false\n    return (needTo > -1 && needTo <= pagelimit)\n  },\n  fetch (payload){\n    if(this.$fetchState != -1){\n      return promise.reject(new Error(\"paginate::다른 페이징 작업 중에 페이징 처리를 할 수 없습니다.\"))\n    }\n\n    if(typeof payload === \"object\"){\n      payload = Object.assign(this.pageState, this.parameters, payload)\n    }\n\n    this.$fetchState = 0\n    this.$pending = true\n\n    return promise((resolve, reject)=>{\n      promise.valueOf(this.$fetchFn(payload))\n      .then(e=>{\n        if(this.$fetchState == 0){\n          console.warn(\"paginate::fetch중엔 반드시 update를 해 주십시오\")\n        }\n        this.$fetchState = -1\n        this.$pending = true\n        resolve(e)\n      })\n      .catch(e=>{\n        this.$fetchState = -1\n        this.$pending = true\n        reject(e)\n      })\n    })\n  },\n  update (updateOpts){\n    this.hasOwnProperty(\"$fetchState\") && this.$fetchState++\n\n    if(updateOpts === null || updateOpts === \"abort\"){\n      return\n    }\n\n    this.page = updateOpts.page > -1 ? updateOpts.page : this.page\n    this.pagePer = updateOpts.pagePer || this.pagePer\n    this.paginatePer = updateOpts.paginatePer || this.paginatePer\n    this.totalItems = (typeof updateOpts.totalItems === \"number\") ? updateOpts.totalItems : this.totalItems\n\n    if(typeof updateOpts.parameters === \"object\"){\n      this.parameters = Object.assign({}, this.parameters, updateOpts.parameters)\n    }\n\n    if(typeof this.$renderFn === \"function\"){\n      this.$renderFn(this)\n    } else {\n      console.warn(\"paginate::render 함수를 찾을수 없습니다. 반드시 설정해주세요.\")\n    }\n  },\n  params (parameters){\n    if(parameters === null){\n      this.parameters = {}\n    } else if(typeof parameters === \"object\"){\n      this.parameters = parameters\n    } else {\n      console.warn(\"paginate:parameters는 object 파라메터만 받을수 있습니다.\")\n    }\n    return this\n  },\n  refresh (){\n    return this.fetch({ page: this.page })\n  },\n  fetchIndex (pageIndex){\n    // 설정할수 있는 페이지보다 너무 높으면\n    if(pageIndex < 0){\n      return promise.reject(\"paginate::-1 이하로 페이지네이션에 접근 할 수 없습니다.\")\n    }\n\n    if(this.pageLimit < pageIndex){\n      pageIndex = this.pageLimit\n      if(pageIndex < 0){\n        pageIndex = 0\n      }\n    }\n    return this.fetch({ page: pageIndex })\n  },\n  fetchNext (){\n    return this.fetchIndex(this.page + 1)\n  },\n  fetchPrev (){\n    return this.fetchIndex(this.page - 1)\n  },\n  fetchTo (command){\n    let action\n    switch (command){\n      case \"next\": case \"nextPage\":\n        action = e=>this.fetchNext()\n        break\n      case \"prev\": case \"prevPage\":\n        action = e=>this.fetchPrev()\n        break\n      case \"firstPage\":\n        action = e=>this.fetchIndex(0)\n        break\n      case \"lastPage\":\n        action = e=>this.fetchIndex(this.pageLimit)\n        break\n      /* TODO : if needed\n      case \"nextPaginate\":\n        break;\n      case \"prevPaginate\":\n        break;\n        */\n      default:\n        if(typeof command === \"number\"){\n          action = e=>this.fetchIndex(command)\n        }\n    }\n    if(action){\n      return action()\n    } else {\n      return promise.reject(\"paginate::unknown command\", command)\n    }\n  }\n}\n\n// pagenation에서 이동 가능한 index의 크기를 반환함\nObject.defineProperty(PaginateClass.prototype, \"pageLimit\", {\n  get (){\n    const fixIndex = this.totalItems / this.pagePer\n    // polyfill Number.isInteger\n    if(typeof fixIndex === \"number\" && isFinite(fixIndex) && Math.floor(fixIndex) === fixIndex){\n      return fixIndex - 1\n    } else {\n      return Math.floor(fixIndex)\n    }\n  }\n})\n\n// pagenation에서 이동 가능한 paginate의 크기를 반환함\nObject.defineProperty(PaginateClass.prototype, \"paginateLimit\", {\n  get (){\n    return Math.ceil(this.totalItems / (this.pagePer * this.paginatePer))\n  }\n})\n\n// pagenation에서 이동 가능한 index의 크기를 반환함\nObject.defineProperty(PaginateClass.prototype, \"paginate\", {\n  get (){\n    let paginate = Math.floor((this.page) / this.paginatePer)\n    if(paginate < 0){ paginate = 0 }\n    return paginate\n  }\n})\n\n\nObject.defineProperty(PaginateClass.prototype, \"pageState\", {\n  get (){\n    return {\n      page       : this.page,\n      pagePer    : this.pagePer,\n      paginatePer: this.paginatePer,\n      totalItems : this.totalItems\n    }\n  }\n})\n\nObject.defineProperty(PaginateClass.prototype, \"pages\", {\n  get (){\n    // paginate 설정\n    var startPageIndex = (this.paginatePer * this.paginate)\n    var endPageIndex = startPageIndex + this.paginatePer\n\n    // 렌더링에 필요한 numberItems 생성\n    const numberItems = []\n    const pageLimit = this.pageLimit\n\n    for(;startPageIndex < endPageIndex; startPageIndex++){\n      numberItems.push({\n        index    : startPageIndex,\n        number   : startPageIndex + 1,\n        $disabled: !this.isAllowIndex(startPageIndex, pageLimit),\n        $active  : this.page == startPageIndex\n      })\n    }\n\n    // ui 페이지 번호 출력 보정\n    switch (this.pagesOutputStyle){\n      case \"existOnly\":\n        if(pageLimit < 1){\n          numberItems.splice(1, Number.POSITIVE_INFINITY)\n        } else {\n          var disabledStartIndex = 0\n          for(var d = numberItems, i = 0, l = d.length; i < l; i++){\n            if(d[i].$disabled == false) disabledStartIndex = i + 1\n          }\n          if(disabledStartIndex){\n            numberItems.splice(disabledStartIndex, Number.POSITIVE_INFINITY)\n          }\n        }\n        break\n      case \"all\":\n      default:\n      // is ok\n        break\n    }\n\n    return numberItems\n  }\n})\n\nObject.defineProperty(PaginateClass.prototype, \"allowNext\", {\n  get (){\n    return this.isAllowIndex(this.page + 1, this.pageLimit)\n  }\n})\n\nObject.defineProperty(PaginateClass.prototype, \"allowPrev\", {\n  get (){\n    return this.isAllowIndex(this.page - 1, this.pageLimit)\n  }\n})\n\nObject.defineProperty(PaginateClass.prototype, \"allowNextPaginate\", {\n  get (){\n    return this.isAllowPaginate(this.paginate + 1)\n  }\n})\n\nObject.defineProperty(PaginateClass.prototype, \"allowPrevPaginate\", {\n  get (){\n    return this.isAllowPaginate(this.paginate - 1)\n  }\n})\n\nObject.defineProperty(PaginateClass.prototype, \"viewmodel\", {\n  enumerable: false,\n  get (){\n    return {\n      page             : this.page,\n      pagePer          : this.pagePer,\n      paginatePer      : this.paginatePer,\n      totalItems       : this.totalItems,\n      allowNext        : this.allowNext,\n      allowPrev        : this.allowPrev,\n      allowNextPaginate: this.allowNextPaginate,\n      allowPrevPaginate: this.allowPrevPaginate,\n      pages            : this.pages,\n      parameters       : Object.keys(this.parameters).reduce((dest, name)=>{\n        dest[name] = this.parameters[name]\n        return dest\n      }, {})\n    }\n  }\n})\n\nconst paginateFactory = e=>new PaginateClass(e)\npaginateFactory.constructor = PaginateClass\n\nexport const Paginate = PaginateClass\nexport const paginate = paginateFactory\n"],"file":"paginate.js"}