{"version":3,"sources":["../../.src/web/env/dom.js"],"names":["getNode","el","select","undefined","isElement","Element","getElementOffsetRect","x","y","left","top","width","height","right","bottom","valid","offsetLeft","offsetTop","offsetWidth","offsetHeight","offsetParent","html","body","test","window","getComputedStyle","getPropertyValue","getBoundingRect","doc","document","win","offsetX","pageXOffset","documentElement","parentNode","scrollLeft","offsetY","pageYOffset","scrollTop","boundingRect","getBoundingClientRect","parent","getElementBoundingRect","elRect","toJSON","current","windowRect","screenLeft","screenX","screenTop","screenY","outerWidth","outerHeight","screenRect","screen"],"mappings":"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","sourcesContent":["import { rect } from \"../../modules/stance\"\nimport { likeArray, isNode } from \"../../functions/isLike\"\n\nexport const getNode = function (el){\n  let select = likeArray(el) ? el[0] : el\n  return isNode(select) ? select : undefined\n}\n\nexport const isElement = function (el){\n  return el instanceof Element\n}\n\nexport const getElementOffsetRect = function (el){\n  el = getNode(el)\n  \n  if(!isElement(el)){\n    return rect({\n      x     : 0, y     : 0, left  : 0, top   : 0, width : 0, height: 0, right : 0, bottom: 0, valid : false\n    })\n  }\n  \n  let offsetLeft = 0\n  let offsetTop  = 0\n  let offsetWidth = el.offsetWidth\n  let offsetHeight = el.offsetHeight\n  \n  do {\n    offsetLeft += el.offsetLeft\n    offsetTop += el.offsetTop\n    el = el.offsetParent\n      \n    if((!el.html && !el.body) && /absoute|relative|fixed/.test(window.getComputedStyle(el).getPropertyValue(\"position\"))){\n      el = null\n    }\n  } while(el)\n  \n  \n  return rect({\n    x     : offsetLeft,\n    y     : offsetTop,\n    left  : offsetLeft,\n    top   : offsetTop,\n    width : offsetWidth,\n    height: offsetHeight,\n    valid : true\n  })\n}\n\nconst getBoundingRect = function (el){\n  el = getNode(el)\n  \n  if(!isElement(el)){\n    return rect({\n      x     : 0, y     : 0, left  : 0, top   : 0, width : 0, height: 0, right : 0, bottom: 0, valid : false\n    })\n  }\n  \n  const doc = document\n  const win = window\n  const body = doc.body\n\n  let offsetX = win.pageXOffset !== undefined ? win.pageXOffset\n    : (doc.documentElement || body.parentNode || body).scrollLeft\n  let offsetY = win.pageYOffset !== undefined ? win.pageYOffset\n    : (doc.documentElement || body.parentNode || body).scrollTop\n  \n  const boundingRect = el.getBoundingClientRect()\n\n  if(el !== body){\n    let parent = el.parentNode\n    while(parent && parent !== body){\n      offsetX += parent.scrollLeft\n      offsetY += parent.scrollTop\n      parent = parent.parentNode\n    }\n  }\n  \n  return rect({\n    x     : boundingRect.left + offsetX,\n    y     : boundingRect.top + offsetY,\n    left  : boundingRect.left + offsetX,\n    top   : boundingRect.top + offsetY,\n    width : boundingRect.width,\n    height: boundingRect.height,\n    right : boundingRect.right + offsetX,\n    bottom: boundingRect.bottom + offsetY,\n    valid : true\n  })\n}\n\nexport const getElementBoundingRect = function (el){\n  el = getNode(el)\n  \n  //const doc  = document\n  const win  = window\n  \n  const elRect = getBoundingRect(el).toJSON()\n  \n  if(elRect.valid === false){\n    return rect(elRect)\n  }\n  \n  let current = el\n  let parent  = el.parentNode\n  \n  do {\n    if(parent && (!parent.html && !parent.body) && /absoute|relative|fixed/.test(win.getComputedStyle(parent).getPropertyValue(\"position\"))){\n      const { top, left } = getBoundingRect(parent)\n      elRect.top -= top\n      elRect.left -= left\n      elRect.right = elRect.left + elRect.width\n      elRect.bottom = elRect.top + elRect.height\n      current = parent = null\n    } else if(!parent){\n      current = null\n    } else {\n      current = parent\n      parent = current.parentNode\n    }\n  } while(parent)\n  \n  return rect(elRect)\n}\n\nexport const windowRect = function (){\n  return rect({\n    left  : window.screenLeft || window.screenX,\n    top   : window.screenTop || window.screenY,\n    width : window.outerWidth,\n    height: window.outerHeight\n  })\n}\n\nexport const screenRect = function (){\n  return rect({\n    left  : 0,\n    top   : 0,\n    width : screen.width,\n    height: screen.height\n  })\n}\n"],"file":"dom.js"}