{"version":3,"sources":["../../.src/web/env/dom.js"],"names":["getBoundingRect","el","doc","document","win","window","body","offsetX","pageXOffset","undefined","documentElement","parentNode","scrollLeft","offsetY","pageYOffset","scrollTop","rect","getBoundingClientRect","parent","x","left","y","top","width","height","right","bottom","getElementBoundingRect","result","current","html","test","getComputedStyle","getPropertyValue"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAO,MAAMA,kBAAkB,SAAlBA,eAAkB,CAASC,EAAT,EAAY;AACzC,QAAMC,MAAMC,QAAZ;AACA,QAAMC,MAAMC,MAAZ;AACA,QAAMC,OAAOJ,IAAII,IAAjB;AAEA,QAAIC,UAAUH,IAAII,WAAJ,KAAoBC,SAApB,GAAgCL,IAAII,WAApC,GACd,CAACN,IAAIQ,eAAJ,IAAuBJ,KAAKK,UAA5B,IAA0CL,IAA3C,EAAiDM,UADjD;AAEA,QAAIC,UAAUT,IAAIU,WAAJ,KAAoBL,SAApB,GAAgCL,IAAIU,WAApC,GACd,CAACZ,IAAIQ,eAAJ,IAAuBJ,KAAKK,UAA5B,IAA0CL,IAA3C,EAAiDS,SADjD;AAGA,QAAMC,OAAOf,GAAGgB,qBAAH,EAAb;;AAEA,QAAIhB,OAAOK,IAAX,EAAiB;AACf,UAAIY,SAASjB,GAAGU,UAAhB;;AAEA,aAAOO,WAAWZ,IAAlB,EAAwB;AACtBC,mBAAWW,OAAON,UAAlB;AACAC,mBAAWK,OAAOH,SAAlB;AACAG,iBAAWA,OAAOP,UAAlB;AACD;AACF;;AAED,WAAO;AACLQ,SAAQH,KAAKI,IAAL,GAAYb,OADf;AAELc,SAAQL,KAAKM,GAAL,GAAWT,OAFd;AAGLO,YAAQJ,KAAKI,IAAL,GAAYb,OAHf;AAILe,WAAQN,KAAKM,GAAL,GAAWT,OAJd;AAKLU,aAAQP,KAAKO,KALR;AAMLC,cAAQR,KAAKQ,MANR;AAOLC,aAAQT,KAAKS,KAAL,GAAalB,OAPhB;AAQLmB,cAAQV,KAAKU,MAAL,GAAcb;AARjB,KAAP;AAUD,GAhCM;;;;AAkCA,MAAMc,yBAAyB,SAAzBA,sBAAyB,CAAS1B,EAAT,EAAY;AAChD,QAAMC,MAAOC,QAAb;AACA,QAAMC,MAAOC,MAAb;AACA,QAAMC,OAAOJ,IAAII,IAAjB;AACA,QAAMsB,SAAS5B,gBAAgBC,EAAhB,CAAf;AAEA,QAAI4B,UAAU5B,EAAd;AACA,QAAIiB,SAAUjB,GAAGU,UAAjB;;AAEA,OAAG;AACD,UAAGO,UAAW,CAACA,OAAOY,IAAR,IAAgB,CAACZ,OAAOZ,IAAnC,IAA6C,yBAAyByB,IAAzB,CAA8B3B,IAAI4B,gBAAJ,CAAqBd,MAArB,EAA6Be,gBAA7B,CAA8C,UAA9C,CAA9B,CAAhD,EAAyI;AAAA,+BACjHjC,gBAAgBkB,MAAhB,CADiH;AAAA,YAC/HI,GAD+H,oBAC/HA,GAD+H;AAAA,YAC1HF,IAD0H,oBAC1HA,IAD0H;;AAEvIQ,eAAON,GAAP,IAAgBA,GAAhB;AACAM,eAAOR,IAAP,IAAgBA,IAAhB;AACAQ,eAAOH,KAAP,GAAgBG,OAAOR,IAAP,GAAcQ,OAAOL,KAArC;AACAK,eAAOF,MAAP,GAAgBE,OAAON,GAAP,GAAaM,OAAOJ,MAApC;AACAK,kBAAUX,SAAS,IAAnB;AACD,OAPD,MAOO,IAAG,CAACA,MAAJ,EAAY;AACjBW,kBAAU,IAAV;AACD,OAFM,MAEA;AACLA,kBAAUX,MAAV;AACAA,iBAASW,QAAQlB,UAAjB;AACD;AACF,KAdD,QAcS,CAAC,CAACO,MAdX;;AAgBA,WAAOU,MAAP;AACD,GA1BM","sourcesContent":["export const getBoundingRect = function(el){\n  const doc = document;\n  const win = window;\n  const body = doc.body;\n\n  let offsetX = win.pageXOffset !== undefined ? win.pageXOffset :\n  (doc.documentElement || body.parentNode || body).scrollLeft;\n  let offsetY = win.pageYOffset !== undefined ? win.pageYOffset :\n  (doc.documentElement || body.parentNode || body).scrollTop;\n\n  const rect = el.getBoundingClientRect();\n\n  if (el !== body) {\n    var parent = el.parentNode;\n\n    while (parent !== body) {\n      offsetX += parent.scrollLeft;\n      offsetY += parent.scrollTop;\n      parent   = parent.parentNode;\n    }\n  }\n\n  return {\n    x     : rect.left + offsetX,\n    y     : rect.top + offsetY,\n    left  : rect.left + offsetX,\n    top   : rect.top + offsetY,\n    width : rect.width,\n    height: rect.height,\n    right : rect.right + offsetX,\n    bottom: rect.bottom + offsetY\n  };\n}\n\nexport const getElementBoundingRect = function(el){\n  const doc  = document;\n  const win  = window;\n  const body = doc.body;\n  const result = getBoundingRect(el);\n  \n  let current = el;\n  let parent  = el.parentNode;\n  \n  do {\n    if(parent && (!parent.html && !parent.body)  && /absoute|relative|fixed/.test(win.getComputedStyle(parent).getPropertyValue(\"position\"))){\n      const { top, left } = getBoundingRect(parent);\n      result.top   -= top;\n      result.left  -= left;\n      result.right  = result.left + result.width;\n      result.bottom = result.top + result.height;\n      current = parent = null;\n    } else if(!parent) {\n      current = null;\n    } else {\n      current = parent;\n      parent = current.parentNode;\n    }\n  } while( !!parent )\n  \n  return result;\n}"],"file":"dom.js"}