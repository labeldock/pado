{"version":3,"sources":["../../.src/web/env/dom.js"],"names":["getNode","el","select","undefined","isElement","Element","getElementOffsetRect","x","y","left","top","width","height","right","bottom","valid","offsetLeft","offsetTop","offsetWidth","offsetHeight","offsetParent","html","body","test","window","getComputedStyle","getPropertyValue","getBoundingRect","doc","document","win","offsetX","pageXOffset","documentElement","parentNode","scrollLeft","offsetY","pageYOffset","scrollTop","boundingRect","getBoundingClientRect","parent","getElementBoundingRect","elRect","toJSON","current","windowRect","screenLeft","screenX","screenTop","screenY","outerWidth","outerHeight","screenRect","screen"],"mappings":"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","sourcesContent":["import { rect } from \"../../modules/stance\"\nimport { likeArray, isNode } from \"../../functions/isLike\"\n\nexport const getNode = function (el){\n  let select = likeArray(el) ? el[0] : el\n  return isNode(select) ? select : undefined\n}\n\nexport const isElement = function (el){\n  return el instanceof Element\n}\n\nexport const getElementOffsetRect = function (el){\n  el = getNode(el)\n  \n  if(!isElement(el)){\n    return rect({\n      x     : 0, y     : 0, left  : 0, top   : 0, width : 0, height: 0, right : 0, bottom: 0, valid : false\n    })\n  }\n  \n  let offsetLeft = 0\n  let offsetTop  = 0\n  let offsetWidth = el.offsetWidth\n  let offsetHeight = el.offsetHeight\n  \n  do {\n    offsetLeft += el.offsetLeft\n    offsetTop += el.offsetTop\n    el = el.offsetParent\n      \n    if((!el.html && !el.body) && /absoute|relative|fixed/.test(window.getComputedStyle(el).getPropertyValue(\"position\"))){\n      el = null\n    }\n  } while(el)\n  \n  \n  return rect({\n    x     : offsetLeft,\n    y     : offsetTop,\n    left  : offsetLeft,\n    top   : offsetTop,\n    width : offsetWidth,\n    height: offsetHeight,\n    valid : true\n  })\n}\n\nconst getBoundingRect = function (el){\n  el = getNode(el)\n  \n  if(!isElement(el)){\n    return rect({\n      x     : 0, y     : 0, left  : 0, top   : 0, width : 0, height: 0, right : 0, bottom: 0, valid : false\n    })\n  }\n  \n  const doc = document\n  const win = window\n  const body = doc.body\n\n  let offsetX = win.pageXOffset !== undefined ? win.pageXOffset\n    : (doc.documentElement || body.parentNode || body).scrollLeft\n  let offsetY = win.pageYOffset !== undefined ? win.pageYOffset\n    : (doc.documentElement || body.parentNode || body).scrollTop\n  \n  const boundingRect = el.getBoundingClientRect()\n\n  if(el !== body){\n    let parent = el.parentNode\n    while(parent && parent !== body){\n      offsetX += parent.scrollLeft\n      offsetY += parent.scrollTop\n      parent = parent.parentNode\n    }\n  }\n  \n  return rect({\n    x     : boundingRect.left + offsetX,\n    y     : boundingRect.top + offsetY,\n    left  : boundingRect.left + offsetX,\n    top   : boundingRect.top + offsetY,\n    width : boundingRect.width,\n    height: boundingRect.height,\n    right : boundingRect.right + offsetX,\n    bottom: boundingRect.bottom + offsetY,\n    valid : true\n  })\n}\n\nexport const getElementBoundingRect = function (el){\n  el = getNode(el)\n  \n  //const doc  = document\n  const win  = window\n  \n  const elRect = getBoundingRect(el).toJSON()\n  \n  if(elRect.valid === false){\n    return rect(elRect)\n  }\n  \n  let current = el\n  let parent  = el.parentNode\n  \n  do {\n    if(parent && (!parent.html && !parent.body) && /absoute|relative|fixed/.test(win.getComputedStyle(parent).getPropertyValue(\"position\"))){\n      const { top, left } = getBoundingRect(parent)\n      elRect.top -= top\n      elRect.left -= left\n      elRect.right = elRect.left + elRect.width\n      elRect.bottom = elRect.top + elRect.height\n      current = parent = null\n    } else if(!parent){\n      current = null\n    } else {\n      current = parent\n      parent = current.parentNode\n    }\n  } while(parent)\n  \n  return rect(elRect)\n}\n\nexport const windowRect = function (){\n  return rect({\n    left  : window.screenLeft || window.screenX,\n    top   : window.screenTop || window.screenY,\n    width : window.outerWidth,\n    height: window.outerHeight\n  })\n}\n\nexport const screenRect = function (){\n  return rect({\n    left  : 0,\n    top   : 0,\n    width : screen.width,\n    height: screen.height\n  })\n}\n"],"file":"dom.js"}