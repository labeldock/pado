{"version":3,"sources":["../../.src/web/env/dom.js"],"names":["getNode","el","select","undefined","isElement","Element","getElementOffsetRect","x","y","left","top","width","height","right","bottom","valid","offsetLeft","offsetTop","offsetWidth","offsetHeight","offsetParent","html","body","test","window","getComputedStyle","getPropertyValue","getBoundingRect","doc","document","win","offsetX","pageXOffset","documentElement","parentNode","scrollLeft","offsetY","pageYOffset","scrollTop","boundingRect","getBoundingClientRect","parent","getElementBoundingRect","elRect","toJSON","current","getElementTransformMatrix","computedStyle","computedMatrixParam","transform","webkitTransform","MozTransform","msTransform","c","split","slice","length","parseMatrix","DEFAULT_MATRIX","m11","m21","m31","m41","m12","m22","m32","m42","m13","m23","m33","m43","m14","m24","m34","m44","matrixParam","matrix","Object","assign","getElementTransform","val","rotateY","Math","asin","rotateX","atan2","rotateZ","rotate","z","translate","transformStyle","windowRect","screenLeft","screenX","screenTop","screenY","outerWidth","outerHeight","screenRect","screen","transformVariant","TRANSFORM_UNDEFINED","parseTransformValue","value","matched","parseTransformMultivalue","valueProcess","unit","trim","singleValueHook","bag","i","parseValue","multiValueHook","multiValue","forEach","oneNumberToTwoArray","one","props","translateX","translateY","scaleX","scaleY","scaleZ","translate3d","scale","scale3d","rotate3d","translateVars","Array","fill","scaleVars","rotateVars","perspective","result","push","some","v","join","svgPathWithVertex","vertex","close","dValue","point","index","prefix","SVGBuilder","drawVariants","prototype","addPath","points","attributes","tag","params","createElement","svgTag","createElementNS","realMaxWidth","realMaxHeigth","pathElement","setAttribute","appendChild","makeSVG"],"mappings":";;;;;;;;;;;;;;;;;;;;AAIO,MAAMA,UAAU,SAAVA,OAAU,CAASC,EAAT,EAAY;AACjC,QAAIC,SAAS,uBAAUD,EAAV,IAAgBA,GAAG,CAAH,CAAhB,GAAwBA,EAArC;AACA,WAAO,oBAAOC,MAAP,IAAiBA,MAAjB,GAA0BC,SAAjC;AACD,GAHM;;;;AAKA,MAAMC,YAAY,SAAZA,SAAY,CAASH,EAAT,EAAY;AACnC,WAAOA,cAAcI,OAArB;AACD,GAFM;;;;AAIA,MAAMC,uBAAuB,SAAvBA,oBAAuB,CAASL,EAAT,EAAY;AAC9CA,SAAKD,QAAQC,EAAR,CAAL;;AAEA,QAAG,CAACG,UAAUH,EAAV,CAAJ,EAAkB;AAChB,aAAO,qBAAK;AACVM,WAAE,CADQ;AACNC,WAAE,CADI;AACFC,cAAK,CADH;AACKC,aAAI,CADT;AACWC,eAAM,CADjB;AACmBC,gBAAO,CAD1B;AAC4BC,eAAM,CADlC;AACoCC,gBAAO,CAD3C;AAC6CC,eAAM;AADnD,OAAL,CAAP;AAGD;;AAED,QAAIC,aAAa,CAAjB;AACA,QAAIC,YAAa,CAAjB;AACA,QAAIC,cAAcjB,GAAGiB,WAArB;AACA,QAAIC,eAAelB,GAAGkB,YAAtB;;AAEA,OAAE;AACEH,oBAAcf,GAAGe,UAAjB;AACAC,mBAAchB,GAAGgB,SAAjB;AACAhB,WAAKA,GAAGmB,YAAR;;AAEA,UAAI,CAACnB,GAAGoB,IAAJ,IAAY,CAACpB,GAAGqB,IAAjB,IAA0B,yBAAyBC,IAAzB,CAA8BC,OAAOC,gBAAP,CAAwBxB,EAAxB,EAA4ByB,gBAA5B,CAA6C,UAA7C,CAA9B,CAA7B,EAAqH;AACnHzB,aAAK,IAAL;AACD;AACJ,KARD,QAQSA,EART;;AAWA,WAAO,qBAAK;AACVM,SAAES,UADQ;AAEVR,SAAES,SAFQ;AAGVR,YAAKO,UAHK;AAIVN,WAAIO,SAJM;AAKVN,aAAMO,WALI;AAMVN,cAAOO,YANG;AAOVJ,aAAM;AAPI,KAAL,CAAP;AAUD,GAnCM;;;;AAqCP,MAAMY,kBAAkB,SAAlBA,eAAkB,CAAS1B,EAAT,EAAY;AAClCA,SAAKD,QAAQC,EAAR,CAAL;;AAEA,QAAG,CAACG,UAAUH,EAAV,CAAJ,EAAkB;AAChB,aAAO,qBAAK;AACVM,WAAE,CADQ;AACNC,WAAE,CADI;AACFC,cAAK,CADH;AACKC,aAAI,CADT;AACWC,eAAM,CADjB;AACmBC,gBAAO,CAD1B;AAC4BC,eAAM,CADlC;AACoCC,gBAAO,CAD3C;AAC6CC,eAAM;AADnD,OAAL,CAAP;AAGD;;AAED,QAAMa,MAAMC,QAAZ;AACA,QAAMC,MAAMN,MAAZ;AACA,QAAMF,OAAOM,IAAIN,IAAjB;AAEA,QAAIS,UAAUD,IAAIE,WAAJ,KAAoB7B,SAApB,GAAgC2B,IAAIE,WAApC,GACd,CAACJ,IAAIK,eAAJ,IAAuBX,KAAKY,UAA5B,IAA0CZ,IAA3C,EAAiDa,UADjD;AAEA,QAAIC,UAAUN,IAAIO,WAAJ,KAAoBlC,SAApB,GAAgC2B,IAAIO,WAApC,GACd,CAACT,IAAIK,eAAJ,IAAuBX,KAAKY,UAA5B,IAA0CZ,IAA3C,EAAiDgB,SADjD;AAGA,QAAMC,eAAetC,GAAGuC,qBAAH,EAArB;;AAEA,QAAIvC,OAAOqB,IAAX,EAAiB;AACf,UAAImB,SAASxC,GAAGiC,UAAhB;;AACA,aAAOO,UAAUA,WAAWnB,IAA5B,EAAkC;AAChCS,mBAAWU,OAAON,UAAlB;AACAC,mBAAWK,OAAOH,SAAlB;AACAG,iBAAWA,OAAOP,UAAlB;AACD;AACF;;AAED,WAAO,qBAAK;AACV3B,SAAQgC,aAAa9B,IAAb,GAAoBsB,OADlB;AAEVvB,SAAQ+B,aAAa7B,GAAb,GAAmB0B,OAFjB;AAGV3B,YAAQ8B,aAAa9B,IAAb,GAAoBsB,OAHlB;AAIVrB,WAAQ6B,aAAa7B,GAAb,GAAmB0B,OAJjB;AAKVzB,aAAQ4B,aAAa5B,KALX;AAMVC,cAAQ2B,aAAa3B,MANX;AAOVC,aAAQ0B,aAAa1B,KAAb,GAAqBkB,OAPnB;AAQVjB,cAAQyB,aAAazB,MAAb,GAAsBsB,OARpB;AASVrB,aAAQ;AATE,KAAL,CAAP;AAWD,GAxCD;;AA0CO,MAAM2B,yBAAyB,SAAzBA,sBAAyB,CAASzC,EAAT,EAAY;AAChDA,SAAKD,QAAQC,EAAR,CAAL;AAEA,QAAM2B,MAAOC,QAAb;AACA,QAAMC,MAAON,MAAb;AAEA,QAAMmB,SAAShB,gBAAgB1B,EAAhB,EAAoB2C,MAApB,EAAf;;AAEA,QAAGD,OAAO5B,KAAP,KAAiB,KAApB,EAA0B;AACxB,aAAO,qBAAK4B,MAAL,CAAP;AACD;;AAED,QAAIE,UAAU5C,EAAd;AACA,QAAIwC,SAAUxC,GAAGiC,UAAjB;;AAEA,OAAG;AACD,UAAGO,UAAW,CAACA,OAAOpB,IAAR,IAAgB,CAACoB,OAAOnB,IAAnC,IAA6C,yBAAyBC,IAAzB,CAA8BO,IAAIL,gBAAJ,CAAqBgB,MAArB,EAA6Bf,gBAA7B,CAA8C,UAA9C,CAA9B,CAAhD,EAAyI;AAAA,+BACjHC,gBAAgBc,MAAhB,CADiH;AAAA,YAC/H/B,GAD+H,oBAC/HA,GAD+H;AAAA,YAC1HD,IAD0H,oBAC1HA,IAD0H;;AAEvIkC,eAAOjC,GAAP,IAAgBA,GAAhB;AACAiC,eAAOlC,IAAP,IAAgBA,IAAhB;AACAkC,eAAO9B,KAAP,GAAgB8B,OAAOlC,IAAP,GAAckC,OAAOhC,KAArC;AACAgC,eAAO7B,MAAP,GAAgB6B,OAAOjC,GAAP,GAAaiC,OAAO/B,MAApC;AACAiC,kBAAUJ,SAAS,IAAnB;AACD,OAPD,MAOO,IAAG,CAACA,MAAJ,EAAY;AACjBI,kBAAU,IAAV;AACD,OAFM,MAEA;AACLA,kBAAUJ,MAAV;AACAA,iBAASI,QAAQX,UAAjB;AACD;AACF,KAdD,QAcS,CAAC,CAACO,MAdX;;AAgBA,WAAO,qBAAKE,MAAL,CAAP;AACD,GAhCM;;;;AAkCA,MAAMG,4BAA4B,SAA5BA,yBAA4B,CAAS7C,EAAT,EAAY;AACnD,QAAM8C,gBAAsBtB,iBAAiBxB,EAAjB,EAAqB,IAArB,CAA5B;AACA,QAAM+C,sBAAsBD,cAAcE,SAAd,IAA2BF,cAAcG,eAAzC,IAA4DH,cAAcI,YAA1E,IAA0FJ,cAAcK,WAApI;AACA,QAAMC,IAAIL,oBAAoBM,KAApB,CAA0B,aAA1B,EAAyCC,KAAzC,CAA+C,CAA/C,EAAiD,CAAC,CAAlD,CAAV;;AACA,QAAIF,EAAEG,MAAF,KAAa,CAAjB,EAAoB;AAClB,aAAO,CACL,CAAC,CAACH,EAAE,CAAF,CAAF,EAAO,CAACA,EAAE,CAAF,CAAR,EAAa,CAAb,EAAe,CAACA,EAAE,CAAF,CAAhB,CADK,EAEL,CAAC,CAACA,EAAE,CAAF,CAAF,EAAO,CAACA,EAAE,CAAF,CAAR,EAAa,CAAb,EAAe,CAACA,EAAE,CAAF,CAAhB,CAFK,EAGL,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,CAHK,EAIL,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,CAJK,CAAP;AAMD,KAPD,MAOO,IAAIA,EAAEG,MAAF,KAAa,EAAjB,EAAqB;AAC1B,aAAO,CACL,CAAC,CAACH,EAAE,CAAF,CAAF,EAAO,CAACA,EAAE,CAAF,CAAR,EAAa,CAACA,EAAE,CAAF,CAAd,EAAmB,CAACA,EAAE,EAAF,CAApB,CADK,EAEL,CAAC,CAACA,EAAE,CAAF,CAAF,EAAO,CAACA,EAAE,CAAF,CAAR,EAAa,CAACA,EAAE,CAAF,CAAd,EAAmB,CAACA,EAAE,EAAF,CAApB,CAFK,EAGL,CAAC,CAACA,EAAE,CAAF,CAAF,EAAO,CAACA,EAAE,CAAF,CAAR,EAAa,CAACA,EAAE,EAAF,CAAd,EAAoB,CAACA,EAAE,EAAF,CAArB,CAHK,EAIL,CAAC,CAACA,EAAE,CAAF,CAAF,EAAO,CAACA,EAAE,CAAF,CAAR,EAAa,CAACA,EAAE,EAAF,CAAd,EAAoB,CAACA,EAAE,EAAF,CAArB,CAJK,CAAP;AAMD;;AACD,WAAO,IAAP;AACD,GApBM;AAsBP;;;;;AACA,MAAMI,cAAe,YAAU;AAC7B,QAAMC,iBAAiB;AAErBC,WAAK,CAFgB;AAEbC,WAAK,CAFQ;AAELC,WAAK,CAFA;AAEGC,WAAK,CAFR;AAGrBC,WAAK,CAHgB;AAGbC,WAAK,CAHQ;AAGLC,WAAK,CAHA;AAGGC,WAAK,CAHR;AAIrBC,WAAK,CAJgB;AAIbC,WAAK,CAJQ;AAILC,WAAK,CAJA;AAIGC,WAAK,CAJR;AAKrBC,WAAK,CALgB;AAKbC,WAAK,CALQ;AAKLC,WAAK,CALA;AAKGC,WAAK;AALR,KAAvB;AAQA,WAAO,UAASC,WAAT,EAAsB;AAC3B,UAAItB,IAAIsB,YAAYrB,KAAZ,CAAkB,aAAlB,EAAiCC,KAAjC,CAAuC,CAAvC,EAAyC,CAAC,CAA1C,CAAR;AACA,UAAIqB,MAAJ;;AAEA,UAAIvB,EAAEG,MAAF,KAAa,CAAjB,EAAoB;AAClB;AACAoB,iBAAS;AACPjB,eAAK,CAACN,EAAE,CAAF,CADC;AACKO,eAAK,CAACP,EAAE,CAAF,CADX;AACiBQ,eAAK,CADtB;AACyBC,eAAK,CAACT,EAAE,CAAF,CAD/B;AAEPU,eAAK,CAACV,EAAE,CAAF,CAFC;AAEKW,eAAK,CAACX,EAAE,CAAF,CAFX;AAEiBY,eAAK,CAFtB;AAEyBC,eAAK,CAACb,EAAE,CAAF,CAF/B;AAGPc,eAAK,CAHE;AAGKC,eAAK,CAHV;AAGiBC,eAAK,CAHtB;AAGyBC,eAAK,CAH9B;AAIPC,eAAK,CAJE;AAIKC,eAAK,CAJV;AAIiBC,eAAK,CAJtB;AAIyBC,eAAK;AAJ9B,SAAT;AAMD,OARD,MAQO,IAAIrB,EAAEG,MAAF,KAAa,EAAjB,EAAqB;AAC1B;AACAoB,iBAAS;AACPjB,eAAK,CAACN,EAAE,CAAF,CADC;AACKO,eAAK,CAACP,EAAE,CAAF,CADX;AACiBQ,eAAK,CAACR,EAAE,CAAF,CADvB;AAC6BS,eAAK,CAACT,EAAE,EAAF,CADnC;AAEPU,eAAK,CAACV,EAAE,CAAF,CAFC;AAEKW,eAAK,CAACX,EAAE,CAAF,CAFX;AAEiBY,eAAK,CAACZ,EAAE,CAAF,CAFvB;AAE6Ba,eAAK,CAACb,EAAE,EAAF,CAFnC;AAGPc,eAAK,CAACd,EAAE,CAAF,CAHC;AAGKe,eAAK,CAACf,EAAE,CAAF,CAHX;AAGiBgB,eAAK,CAAChB,EAAE,EAAF,CAHvB;AAG8BiB,eAAK,CAACjB,EAAE,EAAF,CAHpC;AAIPkB,eAAK,CAAClB,EAAE,CAAF,CAJC;AAIKmB,eAAK,CAACnB,EAAE,CAAF,CAJX;AAIiBoB,eAAK,CAACpB,EAAE,EAAF,CAJvB;AAI8BqB,eAAK,CAACrB,EAAE,EAAF;AAJpC,SAAT;AAOD,OATM,MASA;AACL;AACAuB,iBAASC,OAAOC,MAAP,CAAc,EAAd,EAAiBpB,cAAjB,CAAT;AACD;;AACD,aAAOkB,MAAP;AACD,KA1BD;AA2BD,GApCoB,EAArB;AAsCA;;;AACO,MAAMG,sBAAsB,SAAtBA,mBAAsB,CAAS9E,EAAT,EAAY;AAC7C,QAAI8C,gBAAgBtB,iBAAiBxB,EAAjB,EAAqB,IAArB,CAApB;AACA,QAAI+E,MAAUjC,cAAcE,SAAd,IAA2BF,cAAcG,eAAzC,IAA4DH,cAAcI,YAA1E,IAA0FJ,cAAcK,WAAtH;AACA,QAAIwB,SAAUnB,YAAYuB,GAAZ,CAAd;AACA,QAAIC,UAAUC,KAAKC,IAAL,CAAU,CAACP,OAAOT,GAAlB,CAAd;AACA,QAAIiB,UAAUF,KAAKG,KAAL,CAAWT,OAAOR,GAAlB,EAAuBQ,OAAOP,GAA9B,CAAd;AACA,QAAIiB,UAAUJ,KAAKG,KAAL,CAAWT,OAAOb,GAAlB,EAAuBa,OAAOjB,GAA9B,CAAd;AAEA,WAAO;AACL4B,cAAQ;AACNhF,WAAG6E,OADG;AAEN5E,WAAGyE,OAFG;AAGNO,WAAGF;AAHG,OADH;AAMLG,iBAAW;AACTlF,WAAGqE,OAAOd,GADD;AAETtD,WAAGoE,OAAOV,GAFD;AAGTsB,WAAGZ,OAAON;AAHD,OANN;AAWLM,cAAQA,MAXH;AAYLc,sBAAgBV;AAZX,KAAP;AAcD,GAtBM;;;;AAwBA,MAAMW,aAAa,SAAbA,UAAa,GAAU;AAClC,WAAO,qBAAK;AACVlF,YAAKe,OAAOoE,UAAP,IAAqBpE,OAAOqE,OADvB;AAEVnF,WAAIc,OAAOsE,SAAP,IAAoBtE,OAAOuE,OAFrB;AAGVpF,aAAMa,OAAOwE,UAHH;AAIVpF,cAAOY,OAAOyE;AAJJ,KAAL,CAAP;AAMD,GAPM;;;;AASA,MAAMC,aAAa,SAAbA,UAAa,GAAU;AAClC,WAAO,qBAAK;AACVzF,YAAK,CADK;AAEVC,WAAI,CAFM;AAGVC,aAAMwF,OAAOxF,KAHH;AAIVC,cAAOuF,OAAOvF;AAJJ,KAAL,CAAP;AAMD,GAPM;;;;AAUA,MAAMwF,mBAAoB,YAAU;AACzC,QAAMC,sBAAsB,GAA5B;;AAEA,QAAMC,sBAAsB,SAAtBA,mBAAsB,CAASC,KAAT,EAAeC,OAAf,EAAuB;AACjD,8BAAWD,KAAX,KAAqBC,QAAQD,KAAR,CAArB;AACD,KAFD;;AAIA,QAAME,2BAA2B,SAA3BA,wBAA2B,CAASF,KAAT,EAAeC,OAAf,EAAuB;AACtD,2BAAQD,KAAR,KAAkBC,QAAQD,KAAR,CAAlB;AACD,KAFD;;AAIA,QAAMG,eAAe,SAAfA,YAAe,CAASH,KAAT,EAAeI,IAAf,EAAoB;AACvC,UAAG,OAAOJ,KAAP,KAAiB,QAApB,EAA6B;AAC3B,oBAAUA,KAAV,GAAkBI,IAAlB;AACD;;AACD,UAAG,OAAOJ,KAAP,KAAiB,QAAjB,IAA6BA,MAAMK,IAAN,OAAiB,EAAjD,EAAoD;AAClD,eAAOL,KAAP;AACD;;AACD,aAAOpG,SAAP;AACD,KARD;;AAUA,QAAM0G,kBAAkB,SAAlBA,eAAkB,CAASC,GAAT,EAAaH,IAAb,EAAkBI,CAAlB,EAAoB;AAC1C,aAAO,UAACR,KAAD,EAAS;AACd,YAAMS,aAAaN,aAAaH,KAAb,EAAmBI,IAAnB,CAAnB;AACA,YAAGK,eAAe7G,SAAlB,EAA6B;AAC7B2G,YAAIC,CAAJ,IAASC,UAAT;AACD,OAJD;AAKD,KAND;;AAQA,QAAMC,iBAAiB,SAAjBA,cAAiB,CAASH,GAAT,EAAaH,IAAb,EAAkB;AACvC,aAAO,UAACO,UAAD,EAAc;AACnBA,mBAAWC,OAAX,CAAmB,UAACZ,KAAD,EAAOQ,CAAP,EAAW;AAC5B,cAAMC,aAAaN,aAAaH,KAAb,EAAmBI,IAAnB,CAAnB;AACA,cAAGK,eAAe7G,SAAlB,EAA6B;AAC7B2G,cAAIC,CAAJ,IAASC,UAAT;AACD,SAJD;AAKD,OAND;AAOD,KARD;;AAUA,QAAMI,sBAAsB,SAAtBA,mBAAsB,CAASC,GAAT,EAAa;AACvC,aAAO,OAAOA,GAAP,KAAe,QAAf,GAA0B,CAACA,GAAD,EAAMA,GAAN,CAA1B,GAAuCA,GAA9C;AACD,KAFD;;AAIA,WAAO,UAASC,KAAT,EAAe;AACpB,UAAG,OAAOA,KAAP,KAAiB,QAApB,EAA6B;AAC3B,eAAO,EAAP;AACD;;AAHmB,UAIZC,UAJY,GAIkED,KAJlE,CAIZC,UAJY;AAAA,UAIAC,UAJA,GAIkEF,KAJlE,CAIAE,UAJA;AAAA,UAIYC,MAJZ,GAIkEH,KAJlE,CAIYG,MAJZ;AAAA,UAIoBC,MAJpB,GAIkEJ,KAJlE,CAIoBI,MAJpB;AAAA,UAI4BC,MAJ5B,GAIkEL,KAJlE,CAI4BK,MAJ5B;AAAA,UAIoCvC,OAJpC,GAIkEkC,KAJlE,CAIoClC,OAJpC;AAAA,UAI6CH,OAJ7C,GAIkEqC,KAJlE,CAI6CrC,OAJ7C;AAAA,UAIsDK,OAJtD,GAIkEgC,KAJlE,CAIsDhC,OAJtD;AAAA,UAKdG,SALc,GAK+C6B,KAL/C,CAKd7B,SALc;AAAA,UAKHmC,WALG,GAK+CN,KAL/C,CAKHM,WALG;AAAA,UAKUC,KALV,GAK+CP,KAL/C,CAKUO,KALV;AAAA,UAKiBC,OALjB,GAK+CR,KAL/C,CAKiBQ,OALjB;AAAA,UAK0BvC,MAL1B,GAK+C+B,KAL/C,CAK0B/B,MAL1B;AAAA,UAKkCwC,QALlC,GAK+CT,KAL/C,CAKkCS,QALlC;AAMpBtC,kBAAc2B,oBAAoB3B,SAApB,CAAd;AACAmC,oBAAcR,oBAAoBQ,WAApB,CAAd;AACAC,cAAcT,oBAAoBS,KAApB,CAAd;AACAC,gBAAcV,oBAAoBU,OAApB,CAAd;;AACA,UAAG,OAAOvC,MAAP,KAAkB,QAArB,EAA8B;AAC5BA,iBAAS,CAACpF,SAAD,EAAWA,SAAX,EAAqBoF,MAArB,CAAT;AACD;;AACD,UAAG,OAAOwC,QAAP,KAAoB,QAAvB,EAAgC;AAC9BA,mBAAW,CAACA,QAAD,CAAX;AACD;;AAED,UAAMC,gBAAgBC,MAAM,CAAN,EAASC,IAAT,CAAc7B,mBAAd,CAAtB;AACA,UAAM8B,YAAaF,MAAM,CAAN,EAASC,IAAT,CAAc7B,mBAAd,CAAnB;AACA,UAAM+B,aAAaH,MAAM,CAAN,EAASC,IAAT,CAAc7B,mBAAd,CAAnB;AACA,UAAMgC,cAAc3B,aAAaY,MAAMe,WAAnB,EAA+B,IAA/B,CAApB;AACA,UAAMC,SAAS,EAAf;AAEA7B,+BAAyBhB,SAAzB,EAAmCwB,eAAee,aAAf,EAA6B,IAA7B,CAAnC;AACAvB,+BAAyBmB,WAAzB,EAAqCX,eAAee,aAAf,EAA6B,IAA7B,CAArC;AACAvB,+BAAyBoB,KAAzB,EAA+BZ,eAAekB,SAAf,EAAyB,GAAzB,CAA/B;AACA1B,+BAAyBqB,OAAzB,EAAiCb,eAAekB,SAAf,EAAyB,GAAzB,CAAjC;AACA1B,+BAAyBlB,MAAzB,EAAgC0B,eAAemB,UAAf,EAA0B,KAA1B,CAAhC;AACA3B,+BAAyBsB,QAAzB,EAAkCd,eAAemB,UAAf,EAA0B,KAA1B,CAAlC;AACA9B,0BAAoBiB,UAApB,EAA+BV,gBAAgBmB,aAAhB,EAA8B,IAA9B,EAAmC,CAAnC,CAA/B;AACA1B,0BAAoBkB,UAApB,EAA+BX,gBAAgBmB,aAAhB,EAA8B,IAA9B,EAAmC,CAAnC,CAA/B;AACA1B,0BAAoBmB,MAApB,EAA2BZ,gBAAgBsB,SAAhB,EAA0B,GAA1B,EAA8B,CAA9B,CAA3B;AACA7B,0BAAoBoB,MAApB,EAA2Bb,gBAAgBsB,SAAhB,EAA0B,GAA1B,EAA8B,CAA9B,CAA3B;AACA7B,0BAAoBqB,MAApB,EAA2Bd,gBAAgBsB,SAAhB,EAA0B,GAA1B,EAA8B,CAA9B,CAA3B;AACA7B,0BAAoBlB,OAApB,EAA4ByB,gBAAgBuB,UAAhB,EAA2B,KAA3B,EAAiC,CAAjC,CAA5B;AACA9B,0BAAoBrB,OAApB,EAA4B4B,gBAAgBuB,UAAhB,EAA2B,KAA3B,EAAiC,CAAjC,CAA5B;AACA9B,0BAAoBhB,OAApB,EAA4BuB,gBAAgBuB,UAAhB,EAA2B,KAA3B,EAAiC,CAAjC,CAA5B;AAEAC,qBAAeC,OAAOC,IAAP,kBAA2BF,WAA3B,OAAf;;AAEA,UAAGL,cAAcQ,IAAd,CAAmB;AAAA,eAAGC,MAAMpC,mBAAT;AAAA,OAAnB,CAAH,EAAoD;AAClD2B,sBAAc,CAAd,MAAqB3B,mBAArB,GACAiC,OAAOC,IAAP,gBAAyBP,cAAc,CAAd,CAAzB,SAA6CA,cAAc,CAAd,CAA7C,OADA,GAEAM,OAAOC,IAAP,kBAA2BP,cAAc,CAAd,CAA3B,SAA+CA,cAAc,CAAd,CAA/C,SAAmEA,cAAc,CAAd,CAAnE,OAFA;AAGD;;AACD,UAAGG,UAAUK,IAAV,CAAe;AAAA,eAAGC,MAAMpC,mBAAT;AAAA,OAAf,CAAH,EAAgD;AAC9C8B,kBAAU,CAAV,MAAiB9B,mBAAjB,GACAiC,OAAOC,IAAP,YAAqBJ,UAAU,CAAV,CAArB,SAAqCA,UAAU,CAAV,CAArC,OADA,GAEAG,OAAOC,IAAP,cAAuBJ,UAAU,CAAV,CAAvB,SAAuCA,UAAU,CAAV,CAAvC,SAAuDA,UAAU,CAAV,CAAvD,OAFA;AAGD;;AACD,UAAGC,WAAWI,IAAX,CAAgB;AAAA,eAAGC,MAAMpC,mBAAT;AAAA,OAAhB,CAAH,EAAiD;AAC/C,YAAG+B,WAAW,CAAX,MAAkB/B,mBAAlB,IAAyC+B,WAAW,CAAX,MAAkB/B,mBAA3D,IAAkF+B,WAAW,CAAX,MAAkB/B,mBAAvG,EAA4H;AAC1H,iBAAOiC,OAAOC,IAAP,aAAsBH,WAAW,CAAX,CAAtB,OAAP;AACD;;AACD,YAAGA,WAAW,CAAX,MAAkB/B,mBAArB,EAAyC;AACvCiC,iBAAOC,IAAP,qBAA8BH,WAAW,CAAX,CAA9B;AACD;;AACD,YAAGA,WAAW,CAAX,MAAkB/B,mBAArB,EAAyC;AACvCiC,iBAAOC,IAAP,qBAA8BH,WAAW,CAAX,CAA9B;AACD;;AACD,YAAGA,WAAW,CAAX,MAAkB/B,mBAArB,EAAyC;AACvCiC,iBAAOC,IAAP,qBAA8BH,WAAW,CAAX,CAA9B;AACD;AACF;;AAED,aAAOE,OAAOI,IAAP,CAAY,GAAZ,CAAP;AACD,KAlED;AAmED,GA9GgC,EAA1B;;;;AAgHA,MAAMC,oBAAoB,SAApBA,iBAAoB,CAASC,MAAT,EAAiBC,KAAjB,EAAuB;AACtD,QAAIC,SAAS,EAAb;AAEAF,WAAOzB,OAAP,CAAe,UAAC4B,KAAD,EAAQC,KAAR,EAAgB;AAC7B,UAAMC,SAASD,UAAU,CAAV,GAAc,GAAd,GAAoB,GAAnC;AACAF,qBAAaG,MAAb,GAAsBF,MAAMxI,CAA5B,SAAiCwI,MAAMvI,CAAvC;AACD,KAHD;;AAKA,QAAG,CAAC,CAACsI,MAAF,IAAYD,UAAU,IAAzB,EAA8B;AAC5BC,gBAAU,IAAV;AACD;;AAED,WAAOA,MAAP;AACD,GAbM;;;;AAeP,MAAMI,aAAa,SAAbA,UAAa,GAAU;AAC3B,SAAKC,YAAL,GAAoB,EAApB;AACD,GAFD;;AAIAD,aAAWE,SAAX,GAAuB;AACrBC,WADqB,mBACZC,MADY,EACLC,UADK,EACM;AACzB,WAAKJ,YAAL,CAAkBZ,IAAlB,CAAuB;AACrBiB,aAAI,MADiB;AAErBD,8BAFqB;AAGrBE,gBAAOH;AAHc,OAAvB;AAKA,aAAO,IAAP;AACD,KARoB;AASrBI,iBATqB,2BASL;AACd,UAAMC,SAAS9H,SAAS+H,eAAT,CAAyB,4BAAzB,EAAuD,KAAvD,CAAf;AACA,UAAIC,eAAgB,CAApB;AACA,UAAIC,gBAAgB,CAApB;AAEA,WAAKX,YAAL,CAAkBhC,OAAlB,CAA0B,gBAA8B;AAAA,YAA3BqC,GAA2B,QAA3BA,GAA2B;AAAA,YAAtBD,UAAsB,QAAtBA,UAAsB;AAAA,YAAVE,MAAU,QAAVA,MAAU;;AACtD,YAAID,QAAQ,MAAZ,EAAmB;AACjB,cAAMO,cAAclI,SAAS+H,eAAT,CAAyB,4BAAzB,EAAuD,MAAvD,CAApB;;AAEA,cAAG,OAAOL,UAAP,KAAsB,QAAzB,EAAkC;AAChCA,yBAAa,EAAb;AACD;;AAEDQ,sBAAYC,YAAZ,CAAyB,MAAzB,EAAiCT,WAAW,MAAX,KAAsB,aAAvD;AACAQ,sBAAYC,YAAZ,CAAyB,QAAzB,EAAmCT,WAAW,QAAX,KAAwB,MAA3D;AACAQ,sBAAYC,YAAZ,CAAyB,cAAzB,EAAyCT,WAAW,aAAX,KAA6BA,WAAW,cAAX,CAA7B,IAA2D,GAApG;AACAQ,sBAAYC,YAAZ,CAAyB,gBAAzB,EAA0C,MAA1C;AACAD,sBAAYC,YAAZ,CAAyB,iBAAzB,EAA2C,OAA3C;AAEA,cAAMlB,SAASH,kBAAkBc,MAAlB,CAAf;AACAA,iBAAOtC,OAAP,CAAe,iBAAO;AACpB,gBAAG4B,MAAMxI,CAAN,GAAUsJ,YAAb,EAA2BA,eAAed,MAAMxI,CAArB;AAC3B,gBAAGwI,MAAMvI,CAAN,GAAUsJ,aAAb,EAA4BA,gBAAgBf,MAAMvI,CAAtB;AAC7B,WAHD;AAKAuJ,sBAAYC,YAAZ,CAAyB,GAAzB,EAA6BlB,MAA7B;AACAa,iBAAOM,WAAP,CAAmBF,WAAnB;AACD;AACF,OAvBD;AAwBAJ,aAAOK,YAAP,CAAoB,OAApB,EAA4B,mBAA5B;AACAL,aAAOK,YAAP,CAAoB,OAApB,EAA4BH,YAA5B;AACAF,aAAOK,YAAP,CAAoB,QAApB,EAA6BF,aAA7B;AACA,aAAOH,MAAP;AACD;AA1CoB,GAAvB;;AA6CO,MAAMO,UAAU,SAAVA,OAAU,GAAU;AAC/B,WAAO,IAAIhB,UAAJ,EAAP;AACD,GAFM","sourcesContent":["import { rect } from \"../../modules/dimension\";\nimport { likeString, isArray, likeArray, isNode } from \"../../functions/isLike\";\nimport { asArray } from \"../../functions/cast\";\n\nexport const getNode = function(el){\n  let select = likeArray(el) ? el[0] : el;\n  return isNode(select) ? select : undefined;\n};\n\nexport const isElement = function(el){\n  return el instanceof Element;\n};\n\nexport const getElementOffsetRect = function(el){\n  el = getNode(el);\n  \n  if(!isElement(el)){\n    return rect({\n      x:0,y:0,left:0,top:0,width:0,height:0,right:0,bottom:0,valid:false\n    });\n  }\n  \n  let offsetLeft = 0;\n  let offsetTop  = 0;\n  let offsetWidth = el.offsetWidth;\n  let offsetHeight = el.offsetHeight;\n  \n  do{\n      offsetLeft += el.offsetLeft;\n      offsetTop  += el.offsetTop;\n      el = el.offsetParent;\n      \n      if((!el.html && !el.body) && /absoute|relative|fixed/.test(window.getComputedStyle(el).getPropertyValue(\"position\"))){\n        el = null;\n      }\n  } while( el );\n  \n  \n  return rect({\n    x:offsetLeft,\n    y:offsetTop,\n    left:offsetLeft,\n    top:offsetTop,\n    width:offsetWidth,\n    height:offsetHeight,\n    valid:true\n  });\n  \n}\n\nconst getBoundingRect = function(el){\n  el = getNode(el);\n  \n  if(!isElement(el)){\n    return rect({\n      x:0,y:0,left:0,top:0,width:0,height:0,right:0,bottom:0,valid:false\n    });\n  }\n  \n  const doc = document;\n  const win = window;\n  const body = doc.body;\n\n  let offsetX = win.pageXOffset !== undefined ? win.pageXOffset :\n  (doc.documentElement || body.parentNode || body).scrollLeft;\n  let offsetY = win.pageYOffset !== undefined ? win.pageYOffset :\n  (doc.documentElement || body.parentNode || body).scrollTop;\n  \n  const boundingRect = el.getBoundingClientRect();\n\n  if (el !== body) {\n    let parent = el.parentNode;\n    while (parent && parent !== body) {\n      offsetX += parent.scrollLeft;\n      offsetY += parent.scrollTop;\n      parent   = parent.parentNode;\n    }\n  }\n  \n  return rect({\n    x     : boundingRect.left + offsetX,\n    y     : boundingRect.top + offsetY,\n    left  : boundingRect.left + offsetX,\n    top   : boundingRect.top + offsetY,\n    width : boundingRect.width,\n    height: boundingRect.height,\n    right : boundingRect.right + offsetX,\n    bottom: boundingRect.bottom + offsetY,\n    valid : true\n  });\n}\n\nexport const getElementBoundingRect = function(el){\n  el = getNode(el);\n  \n  const doc  = document;\n  const win  = window;\n  \n  const elRect = getBoundingRect(el).toJSON();\n  \n  if(elRect.valid === false){\n    return rect(elRect);\n  }\n  \n  let current = el;\n  let parent  = el.parentNode;\n  \n  do {\n    if(parent && (!parent.html && !parent.body)  && /absoute|relative|fixed/.test(win.getComputedStyle(parent).getPropertyValue(\"position\"))){\n      const { top, left } = getBoundingRect(parent);\n      elRect.top   -= top;\n      elRect.left  -= left;\n      elRect.right  = elRect.left + elRect.width;\n      elRect.bottom = elRect.top + elRect.height;\n      current = parent = null;\n    } else if(!parent) {\n      current = null;\n    } else {\n      current = parent;\n      parent = current.parentNode;\n    }\n  } while( !!parent )\n  \n  return rect(elRect);\n}\n\nexport const getElementTransformMatrix = function(el){\n  const computedStyle       = getComputedStyle(el, null);\n  const computedMatrixParam = computedStyle.transform || computedStyle.webkitTransform || computedStyle.MozTransform || computedStyle.msTransform;\n  const c = computedMatrixParam.split(/\\s*[(),]\\s*/).slice(1,-1);\n  if (c.length === 6) {\n    return [\n      [+c[0],+c[2],0,+c[4]],\n      [+c[1],+c[3],0,+c[5]],\n      [0,0,1,0],\n      [0,0,0,1]\n    ];\n  } else if (c.length === 16) {\n    return [\n      [+c[0],+c[4],+c[8],+c[12]],\n      [+c[1],+c[5],+c[9],+c[13]],\n      [+c[2],+c[6],+c[10],+c[14]],\n      [+c[3],+c[7],+c[11],+c[15]]\n    ];\n  }\n  return null;\n};\n\n/* https://keithclark.co.uk/articles/calculating-element-vertex-data-from-css-transforms/ */\nconst parseMatrix = (function(){\n  const DEFAULT_MATRIX = {\n    \n    m11: 1, m21: 0, m31: 0, m41: 0,\n    m12: 0, m22: 1, m32: 0, m42: 0,\n    m13: 0, m23: 0, m33: 1, m43: 0,\n    m14: 0, m24: 0, m34: 0, m44: 1\n  };\n  \n  return function(matrixParam) {\n    let c = matrixParam.split(/\\s*[(),]\\s*/).slice(1,-1);\n    let matrix;\n\n    if (c.length === 6) {\n      // 'matrix()' (3x2)\n      matrix = {\n        m11: +c[0], m21: +c[2], m31: 0, m41: +c[4],\n        m12: +c[1], m22: +c[3], m32: 0, m42: +c[5],\n        m13: 0,     m23: 0,     m33: 1, m43: 0,\n        m14: 0,     m24: 0,     m34: 0, m44: 1\n      };\n    } else if (c.length === 16) {\n      // matrix3d() (4x4)\n      matrix = {\n        m11: +c[0], m21: +c[4], m31: +c[8], m41: +c[12],\n        m12: +c[1], m22: +c[5], m32: +c[9], m42: +c[13],\n        m13: +c[2], m23: +c[6], m33: +c[10], m43: +c[14],\n        m14: +c[3], m24: +c[7], m34: +c[11], m44: +c[15]\n      };\n\n    } else {\n      // handle 'none' or invalid values.\n      matrix = Object.assign({},DEFAULT_MATRIX);\n    }\n    return matrix;\n  }\n}());\n\n/* https://keithclark.co.uk/articles/calculating-element-vertex-data-from-css-transforms/ */\nexport const getElementTransform = function(el){\n  let computedStyle = getComputedStyle(el, null);\n  let val     = computedStyle.transform || computedStyle.webkitTransform || computedStyle.MozTransform || computedStyle.msTransform;\n  let matrix  = parseMatrix(val);\n  let rotateY = Math.asin(-matrix.m13);\n  let rotateX = Math.atan2(matrix.m23, matrix.m33)\n  let rotateZ = Math.atan2(matrix.m12, matrix.m11);\n  \n  return {\n    rotate: {\n      x: rotateX,\n      y: rotateY,\n      z: rotateZ\n    },\n    translate: {\n      x: matrix.m41,\n      y: matrix.m42,\n      z: matrix.m43\n    },\n    matrix: matrix,\n    transformStyle: val\n  };\n};\n\nexport const windowRect = function(){\n  return rect({\n    left:window.screenLeft || window.screenX,\n    top:window.screenTop || window.screenY,\n    width:window.outerWidth,\n    height:window.outerHeight\n  });\n}\n\nexport const screenRect = function(){\n  return rect({\n    left:0,\n    top:0,\n    width:screen.width,\n    height:screen.height\n  });\n}\n\n\nexport const transformVariant = (function(){\n  const TRANSFORM_UNDEFINED = \"0\";\n  \n  const parseTransformValue = function(value,matched){\n    likeString(value) && matched(value);\n  };\n  \n  const parseTransformMultivalue = function(value,matched){\n    isArray(value) && matched(value);\n  };\n  \n  const valueProcess = function(value,unit){\n    if(typeof value === \"number\"){\n      return `${value}${unit}`;\n    }\n    if(typeof value === \"string\" && value.trim() !== \"\"){\n      return value;\n    }\n    return undefined;\n  };\n  \n  const singleValueHook = function(bag,unit,i){\n    return (value)=>{\n      const parseValue = valueProcess(value,unit);\n      if(parseValue === undefined) return;\n      bag[i] = parseValue;\n    }\n  };\n  \n  const multiValueHook = function(bag,unit){\n    return (multiValue)=>{\n      multiValue.forEach((value,i)=>{\n        const parseValue = valueProcess(value,unit);\n        if(parseValue === undefined) return;\n        bag[i] = parseValue;\n      })\n    }\n  };\n  \n  const oneNumberToTwoArray = function(one){\n    return typeof one === \"number\" ? [one, one] : one;\n  };\n  \n  return function(props){\n    if(typeof props !== \"object\"){\n      return \"\";\n    }\n    const { translateX, translateY, scaleX, scaleY, scaleZ, rotateX, rotateY, rotateZ } = props;\n    let { translate, translate3d, scale, scale3d, rotate, rotate3d } = props;\n    translate   = oneNumberToTwoArray(translate);\n    translate3d = oneNumberToTwoArray(translate3d);\n    scale       = oneNumberToTwoArray(scale);\n    scale3d     = oneNumberToTwoArray(scale3d);\n    if(typeof rotate === \"number\"){\n      rotate = [undefined,undefined,rotate];\n    }\n    if(typeof rotate3d === \"number\"){\n      rotate3d = [rotate3d];\n    }\n    \n    const translateVars = Array(3).fill(TRANSFORM_UNDEFINED);\n    const scaleVars  = Array(3).fill(TRANSFORM_UNDEFINED);\n    const rotateVars = Array(4).fill(TRANSFORM_UNDEFINED);\n    const perspective = valueProcess(props.perspective,\"px\");\n    const result = [];\n    \n    parseTransformMultivalue(translate,multiValueHook(translateVars,\"px\"));\n    parseTransformMultivalue(translate3d,multiValueHook(translateVars,\"px\"));\n    parseTransformMultivalue(scale,multiValueHook(scaleVars,\"%\"));\n    parseTransformMultivalue(scale3d,multiValueHook(scaleVars,\"%\"));\n    parseTransformMultivalue(rotate,multiValueHook(rotateVars,\"deg\"));\n    parseTransformMultivalue(rotate3d,multiValueHook(rotateVars,\"deg\"));\n    parseTransformValue(translateX,singleValueHook(translateVars,\"px\",0))\n    parseTransformValue(translateY,singleValueHook(translateVars,\"px\",1))\n    parseTransformValue(scaleX,singleValueHook(scaleVars,\"%\",0))\n    parseTransformValue(scaleY,singleValueHook(scaleVars,\"%\",1))\n    parseTransformValue(scaleZ,singleValueHook(scaleVars,\"%\",2))\n    parseTransformValue(rotateX,singleValueHook(rotateVars,\"deg\",0))\n    parseTransformValue(rotateY,singleValueHook(rotateVars,\"deg\",1))\n    parseTransformValue(rotateZ,singleValueHook(rotateVars,\"deg\",2))\n    \n    perspective && result.push(`perspective(${perspective})`);\n    \n    if(translateVars.some(v=>v !== TRANSFORM_UNDEFINED)){\n      translateVars[2] === TRANSFORM_UNDEFINED ? \n      result.push(`translate(${translateVars[0]},${translateVars[1]})`) :\n      result.push(`translate3d(${translateVars[0]},${translateVars[1]},${translateVars[2]})`)\n    }\n    if(scaleVars.some(v=>v !== TRANSFORM_UNDEFINED)){\n      scaleVars[2] === TRANSFORM_UNDEFINED ? \n      result.push(`scale(${scaleVars[0]},${scaleVars[1]})`) :\n      result.push(`scale3d(${scaleVars[0]},${scaleVars[1]},${scaleVars[2]})`)\n    }\n    if(rotateVars.some(v=>v !== TRANSFORM_UNDEFINED)){\n      if(rotateVars[0] === TRANSFORM_UNDEFINED && rotateVars[1] === TRANSFORM_UNDEFINED && rotateVars[2] !== TRANSFORM_UNDEFINED ){\n        return result.push(`rotate(${rotateVars[2]})`);\n      }\n      if(rotateVars[0] !== TRANSFORM_UNDEFINED){\n        result.push(`rotate3d(1,0,0,${rotateVars[0]})`)\n      }\n      if(rotateVars[1] !== TRANSFORM_UNDEFINED){\n        result.push(`rotate3d(0,1,0,${rotateVars[1]})`)\n      }\n      if(rotateVars[2] !== TRANSFORM_UNDEFINED){\n        result.push(`rotate3d(0,0,1,${rotateVars[2]})`)\n      }\n    }\n    \n    return result.join(\" \");\n  }\n}())\n\nexport const svgPathWithVertex = function(vertex, close){\n  let dValue = \"\";\n  \n  vertex.forEach((point, index)=>{\n    const prefix = index === 0 ? 'M' : 'L';\n    dValue += `${prefix}${point.x} ${point.y} `;\n  });\n  \n  if(!!dValue && close === true){\n    dValue += \" Z\";\n  }\n  \n  return dValue;\n}\n\nconst SVGBuilder = function(){\n  this.drawVariants = [];\n};\n\nSVGBuilder.prototype = {\n  addPath (points,attributes){\n    this.drawVariants.push({\n      tag:\"path\",\n      attributes,\n      params:points\n    })\n    return this;\n  },\n  createElement (){\n    const svgTag = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\n    let realMaxWidth  = 0;\n    let realMaxHeigth = 0; \n    \n    this.drawVariants.forEach(({ tag, attributes, params})=>{\n      if( tag === \"path\"){\n        const pathElement = document.createElementNS('http://www.w3.org/2000/svg', \"path\");\n        \n        if(typeof attributes !== \"object\"){\n          attributes = {};\n        }\n        \n        pathElement.setAttribute(\"fill\", attributes['fill'] || \"transparent\");\n        pathElement.setAttribute(\"stroke\", attributes['stroke'] || \"gray\");\n        pathElement.setAttribute(\"stroke-width\", attributes['strokeWidth'] || attributes['stroke-width'] || \"1\");\n        pathElement.setAttribute(\"stroke-linecap\",\"butt\");\n        pathElement.setAttribute(\"stroke-linejoin\",\"miter\");\n        \n        const dValue = svgPathWithVertex(params);\n        params.forEach(point=>{\n          if(point.x > realMaxWidth) realMaxWidth = point.x;\n          if(point.y > realMaxHeigth) realMaxHeigth = point.y;\n        });\n        \n        pathElement.setAttribute(\"d\",dValue);\n        svgTag.appendChild(pathElement);\n      }\n    });\n    svgTag.setAttribute(\"style\",\"overflow:visible;\");\n    svgTag.setAttribute(\"width\",realMaxWidth);\n    svgTag.setAttribute(\"height\",realMaxHeigth);\n    return svgTag;\n  }\n}\n\nexport const makeSVG = function(){\n  return new SVGBuilder();\n}"],"file":"dom.js"}