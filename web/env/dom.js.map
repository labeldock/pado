{"version":3,"sources":["../../.src/web/env/dom.js"],"names":["isElement","el","Element","getBoundingRect","x","y","left","top","width","height","right","bottom","valid","doc","document","win","window","body","offsetX","pageXOffset","undefined","documentElement","parentNode","scrollLeft","offsetY","pageYOffset","scrollTop","rect","getBoundingClientRect","parent","getElementBoundingRect","result","current","html","test","getComputedStyle","getPropertyValue"],"mappings":"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","sourcesContent":["export const isElement = function(el){\n  return el instanceof Element;\n};\n\nexport const getBoundingRect = function(el){\n  \n  if(!isElement(el)){\n    return {\n      x:0,y:0,left:0,top:0,width:0,height:0,right:0,bottom:0,valid:false\n    };\n  }\n  \n  const doc = document;\n  const win = window;\n  const body = doc.body;\n\n  let offsetX = win.pageXOffset !== undefined ? win.pageXOffset :\n  (doc.documentElement || body.parentNode || body).scrollLeft;\n  let offsetY = win.pageYOffset !== undefined ? win.pageYOffset :\n  (doc.documentElement || body.parentNode || body).scrollTop;\n\n  const rect = el.getBoundingClientRect();\n\n  if (el !== body) {\n    var parent = el.parentNode;\n\n    while (parent !== body) {\n      offsetX += parent.scrollLeft;\n      offsetY += parent.scrollTop;\n      parent   = parent.parentNode;\n    }\n  }\n\n  return {\n    x     : rect.left + offsetX,\n    y     : rect.top + offsetY,\n    left  : rect.left + offsetX,\n    top   : rect.top + offsetY,\n    width : rect.width,\n    height: rect.height,\n    right : rect.right + offsetX,\n    bottom: rect.bottom + offsetY,\n    valid : true\n  };\n}\n\nexport const getElementBoundingRect = function(el){\n  const doc  = document;\n  const win  = window;\n  const body = doc.body;\n  const result = getBoundingRect(el);\n  \n  let current = el;\n  let parent  = el.parentNode;\n  \n  do {\n    if(parent && (!parent.html && !parent.body)  && /absoute|relative|fixed/.test(win.getComputedStyle(parent).getPropertyValue(\"position\"))){\n      const { top, left } = getBoundingRect(parent);\n      result.top   -= top;\n      result.left  -= left;\n      result.right  = result.left + result.width;\n      result.bottom = result.top + result.height;\n      current = parent = null;\n    } else if(!parent) {\n      current = null;\n    } else {\n      current = parent;\n      parent = current.parentNode;\n    }\n  } while( !!parent )\n  \n  return result;\n}"],"file":"dom.js"}