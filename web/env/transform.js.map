{"version":3,"sources":["../../packages/pado/web/env/transform.js"],"names":["getElementTransformMatrix","el","computedStyle","getComputedStyle","computedMatrixParam","transform","webkitTransform","MozTransform","msTransform","c","split","slice","length","parseMatrix","DEFAULT_MATRIX","m11","m21","m31","m41","m12","m22","m32","m42","m13","m23","m33","m43","m14","m24","m34","m44","matrixParam","matrix","Object","assign","getElementTransform","transformStyle","rotateY","Math","asin","rotateX","atan2","rotateZ","rotate","x","y","z","translate","transformStyleVariant","likeString","isArray","TRANSFORM_UNDEFINED","parseTransformValue","value","matched","parseTransformMultivalue","valueProcess","unit","trim","undefined","singleValueHook","bag","i","parseValue","multiValueHook","multiValue","forEach","oneNumberToTwoArray","one","props","translateX","translateY","translateZ","scaleX","scaleY","scaleZ","translate3d","scale","scale3d","rotate3d","translateVars","Array","fill","scaleVars","rotateVars","perspective","result","push","some","v","join","transformMatrixVariant","variant","UDF","multiplyMatrixList","RSIN","sin","PI","RCOS","cos","reduce","dest"],"mappings":"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","sourcesContent":["import { likeString, isArray } from \"../../functions/isLike\"\nimport { multiplyMatrix } from \"../../functions/matrix\"\n\nexport const getElementTransformMatrix = function (el){\n  const computedStyle       = getComputedStyle(el, null)\n  const computedMatrixParam = computedStyle.transform || computedStyle.webkitTransform || computedStyle.MozTransform || computedStyle.msTransform\n  const c = computedMatrixParam.split(/\\s*[(),]\\s*/).slice(1, -1)\n  if(c.length === 6){\n    return [\n      [+c[0], +c[2], 0, +c[4]],\n      [+c[1], +c[3], 0, +c[5]],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1]\n    ]\n  } else if(c.length === 16){\n    return [\n      [+c[0], +c[4], +c[8], +c[12]],\n      [+c[1], +c[5], +c[9], +c[13]],\n      [+c[2], +c[6], +c[10], +c[14]],\n      [+c[3], +c[7], +c[11], +c[15]]\n    ]\n  }\n  return null\n}\n\n/* https://keithclark.co.uk/articles/calculating-element-vertex-data-from-css-transforms/ */\nconst parseMatrix = (function (){\n  const DEFAULT_MATRIX = {\n    m11: 1,\n    m21: 0,\n    m31: 0,\n    m41: 0,\n    m12: 0,\n    m22: 1,\n    m32: 0,\n    m42: 0,\n    m13: 0,\n    m23: 0,\n    m33: 1,\n    m43: 0,\n    m14: 0,\n    m24: 0,\n    m34: 0,\n    m44: 1\n  }\n  \n  return function (matrixParam){\n    let c = matrixParam.split(/\\s*[(),]\\s*/).slice(1, -1)\n    let matrix\n\n    if(c.length === 6){\n      // 'matrix()' (3x2)\n      matrix = {\n        m11: +c[0],\n        m21: +c[2],\n        m31: 0,\n        m41: +c[4],\n        m12: +c[1],\n        m22: +c[3],\n        m32: 0,\n        m42: +c[5],\n        m13: 0,\n        m23: 0,\n        m33: 1,\n        m43: 0,\n        m14: 0,\n        m24: 0,\n        m34: 0,\n        m44: 1\n      }\n    } else if(c.length === 16){\n      // matrix3d() (4x4)\n      matrix = {\n        m11: +c[0],\n        m21: +c[4],\n        m31: +c[8],\n        m41: +c[12],\n        m12: +c[1],\n        m22: +c[5],\n        m32: +c[9],\n        m42: +c[13],\n        m13: +c[2],\n        m23: +c[6],\n        m33: +c[10],\n        m43: +c[14],\n        m14: +c[3],\n        m24: +c[7],\n        m34: +c[11],\n        m44: +c[15]\n      }\n    } else {\n      // handle 'none' or invalid values.\n      matrix = Object.assign({}, DEFAULT_MATRIX)\n    }\n    return matrix\n  }\n}())\n\n/* https://keithclark.co.uk/articles/calculating-element-vertex-data-from-css-transforms/ */\nexport const getElementTransform = function (el){\n  let computedStyle = getComputedStyle(el, null)\n  let transformStyle     = computedStyle.transform || computedStyle.webkitTransform || computedStyle.MozTransform || computedStyle.msTransform\n  let matrix  = parseMatrix(transformStyle)\n  let rotateY = Math.asin(-matrix.m13)\n  let rotateX = Math.atan2(matrix.m23, matrix.m33)\n  let rotateZ = Math.atan2(matrix.m12, matrix.m11)\n  \n  return {\n    rotate: {\n      x: rotateX,\n      y: rotateY,\n      z: rotateZ\n    },\n    translate: {\n      x: matrix.m41,\n      y: matrix.m42,\n      z: matrix.m43\n    },\n    transformStyle\n  }\n}\n\nexport const transformStyleVariant = (function (likeString, isArray){\n  const TRANSFORM_UNDEFINED = \"0\"\n  \n  const parseTransformValue = function (value, matched){\n    likeString(value) && matched(value)\n  }\n  \n  const parseTransformMultivalue = function (value, matched){\n    isArray(value) && matched(value)\n  }\n  \n  const valueProcess = function (value, unit){\n    if(typeof value === \"number\"){\n      return `${value}${unit}`\n    }\n    if(typeof value === \"string\" && value.trim() !== \"\"){\n      return value\n    }\n    return undefined\n  }\n  \n  const singleValueHook = function (bag, unit, i){\n    return (value)=>{\n      const parseValue = valueProcess(value, unit)\n      if(parseValue === undefined) return\n      bag[i] = parseValue\n    }\n  }\n  \n  const multiValueHook = function (bag, unit){\n    return (multiValue)=>{\n      multiValue.forEach((value, i)=>{\n        const parseValue = valueProcess(value, unit)\n        if(parseValue === undefined) return\n        bag[i] = parseValue\n      })\n    }\n  }\n  \n  const oneNumberToTwoArray = function (one){\n    return typeof one === \"number\" ? [one, one] : one\n  }\n  \n  return function (props){\n    if(typeof props !== \"object\"){\n      return \"\"\n    }\n    \n    const { translateX, translateY, translateZ, scaleX, scaleY, scaleZ, rotateX, rotateY, rotateZ } = props\n    let { translate, translate3d, scale, scale3d, rotate, rotate3d } = props\n    \n    translate = oneNumberToTwoArray(translate)\n    translate3d = oneNumberToTwoArray(translate3d)\n    scale = oneNumberToTwoArray(scale)\n    scale3d = oneNumberToTwoArray(scale3d)\n    if(typeof rotate === \"number\"){\n      rotate = [undefined, undefined, rotate]\n    }\n    if(typeof rotate3d === \"number\"){\n      rotate3d = [rotate3d]\n    }\n    \n    const translateVars = Array(3).fill(TRANSFORM_UNDEFINED)\n    const scaleVars  = Array(3).fill(TRANSFORM_UNDEFINED)\n    const rotateVars = Array(4).fill(TRANSFORM_UNDEFINED)\n    const perspective = valueProcess(props.perspective, \"px\")\n    const result = []\n    \n    parseTransformMultivalue(translate, multiValueHook(translateVars, \"px\"))\n    parseTransformMultivalue(translate3d, multiValueHook(translateVars, \"px\"))\n    parseTransformMultivalue(scale, multiValueHook(scaleVars, \"%\"))\n    parseTransformMultivalue(scale3d, multiValueHook(scaleVars, \"%\"))\n    parseTransformMultivalue(rotate, multiValueHook(rotateVars, \"deg\"))\n    parseTransformMultivalue(rotate3d, multiValueHook(rotateVars, \"deg\"))\n    parseTransformValue(translateX, singleValueHook(translateVars, \"px\", 0))\n    parseTransformValue(translateY, singleValueHook(translateVars, \"px\", 1))\n    parseTransformValue(translateZ, singleValueHook(translateVars, \"px\", 2))\n    parseTransformValue(scaleX, singleValueHook(scaleVars, \"\", 0))\n    parseTransformValue(scaleY, singleValueHook(scaleVars, \"\", 1))\n    parseTransformValue(scaleZ, singleValueHook(scaleVars, \"\", 2))\n    parseTransformValue(rotateX, singleValueHook(rotateVars, \"deg\", 0))\n    parseTransformValue(rotateY, singleValueHook(rotateVars, \"deg\", 1))\n    parseTransformValue(rotateZ, singleValueHook(rotateVars, \"deg\", 2))\n    \n    perspective && result.push(`perspective(${perspective})`)\n    \n    if(translateVars.some(v=>v !== TRANSFORM_UNDEFINED)){\n      translateVars[2] === TRANSFORM_UNDEFINED \n        ? result.push(`translate(${translateVars[0]},${translateVars[1]})`)\n        : result.push(`translate3d(${translateVars[0]},${translateVars[1]},${translateVars[2]})`)\n    }\n    \n    if(scaleVars.some(v=>v !== TRANSFORM_UNDEFINED)){\n      scaleVars[2] === TRANSFORM_UNDEFINED \n        ? result.push(`scale(${scaleVars[0]},${scaleVars[1]})`)\n        : result.push(`scale3d(${scaleVars[0]},${scaleVars[1]},${scaleVars[2]})`)\n    }\n    \n    if(rotateVars.some(v=>v !== TRANSFORM_UNDEFINED)){\n      if(rotateVars[0] === TRANSFORM_UNDEFINED && rotateVars[1] === TRANSFORM_UNDEFINED && rotateVars[2] !== TRANSFORM_UNDEFINED){\n        return result.push(`rotate(${rotateVars[2]})`)\n      }\n      if(rotateVars[0] !== TRANSFORM_UNDEFINED){\n        result.push(`rotate3d(1,0,0,${rotateVars[0]})`)\n      }\n      if(rotateVars[1] !== TRANSFORM_UNDEFINED){\n        result.push(`rotate3d(0,1,0,${rotateVars[1]})`)\n      }\n      if(rotateVars[2] !== TRANSFORM_UNDEFINED){\n        result.push(`rotate3d(0,0,1,${rotateVars[2]})`)\n      }\n    }\n    return result.join(\" \")\n  }\n}(likeString, isArray))\n\n\nexport const transformMatrixVariant = function (variant){\n  const UDF = undefined\n  const multiplyMatrixList = []\n  \n  let {\n    translateX = 0,\n    translateY = 0,\n    translateZ = 0,\n    scale = 1,\n    scaleX = UDF,\n    scaleY = UDF,\n    scaleZ = UDF,\n    rotateX = 0,\n    rotateY = 0,\n    rotateZ = 0\n  } = variant\n  \n  scaleX = scaleX === UDF ? scale : scaleX\n  scaleY = scaleY === UDF ? scale : scaleY\n  scaleZ = scaleZ === UDF ? scale : scaleZ\n  \n  const RSIN = (v)=>{\n    return Math.sin(Math.PI * (v / 180))\n  }\n  const RCOS = (v)=>{\n    return Math.cos(Math.PI * (v / 180))\n  }\n  \n  multiplyMatrixList.push([\n    [1, 0, 0, translateX / scaleX],\n    [0, 1, 0, translateY / scaleY],\n    [0, 0, 1, translateZ / scaleZ],\n    [0, 0, 0, 1]\n  ])\n  \n  multiplyMatrixList.push([\n    [scaleX, 0, 0, 0],\n    [0, scaleY, 0, 0],\n    [0, 0, scaleZ, 0],\n    [0, 0, 0, 1]\n  ])\n  \n  rotateX && multiplyMatrixList.push([\n    [1, 0, 0, 0],\n    [0, RCOS(rotateX), -RSIN(rotateX), 0],\n    [0, RSIN(rotateX), RCOS(rotateX), 0],\n    [0, 0, 0, 1]\n  ])\n  \n  rotateY && multiplyMatrixList.push([\n    [RCOS(rotateY), 0, RSIN(rotateY), 0],\n    [0, 1, 0, 0],\n    [-RSIN(rotateY), 0, RCOS(rotateY), 0],\n    [0, 0, 0, 1]\n  ])\n  \n  rotateZ && multiplyMatrixList.push([\n    [RCOS(rotateZ), -RSIN(rotateZ), 0, 0],\n    [RSIN(rotateZ), RCOS(rotateZ), 0, 0],\n    [0, 0, 1, 0],\n    [0, 0, 0, 1]\n  ])\n  \n  return multiplyMatrixList.reduce((dest, matrix)=>{\n    if(!dest) return matrix\n    return multiplyMatrix(dest, matrix)\n  })\n}\n"],"file":"transform.js"}