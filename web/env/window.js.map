{"version":3,"sources":["../../.src/web/env/window.js"],"names":["WINDOW_POPUP_DEFAULT_WIDTH","WINDOW_POPUP_DEFAULT_HEIGHT","openWindow","href","windowParam","hasParam","windowName","useResize","destWindowWidth","destWindowHeight","destWindowTop","destWindowLeft","availMaxWidth","screen","availWidth","availMaxHeight","availHeight","navigator","platform","indexOf","newWindow","window","open","closeWindow","close","openTab","focus","historyBack","catchFallback","history","initialPage","length","location","back","e"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,MAAMA,6BAA6B,IAAnC;AACA,MAAMC,8BAA8B,GAApC;;AAEO,MAAMC,aAAa,SAAbA,UAAa,CAASC,IAAT,EAAeC,WAAf,EAA4B;AACpD,QAAMC,WAAa,OAAOD,WAAP,KAAuB,QAA1C;AACA,QAAME,aAAaD,YAAYD,YAAY,MAAZ,CAAZ,IAAmC,QAAtD;AACA,QAAMG,YAAa,CAACF,YAAYD,YAAY,QAAZ,IAAsB,EAAnC,MAA2C,OAA9D;AAEA,QAAII,kBAAoBH,YAAYD,YAAY,OAAZ,CAAZ,IAAoCJ,0BAA5D;AACA,QAAIS,mBAAoBJ,YAAYD,YAAY,QAAZ,CAAZ,IAAqCH,2BAA7D;AACA,QAAIS,gBAAoBL,YAAYD,YAAY,KAAZ,CAAZ,IAAkCA,YAAY,GAAZ,CAAlC,IAAsD,CAA9E;AACA,QAAIO,iBAAoBN,YAAYD,YAAY,MAAZ,CAAZ,IAAmCA,YAAY,GAAZ,CAAnC,IAAuD,CAA/E;AAEA,QAAMQ,gBAAgBC,OAAOC,UAA7B;AACA,QAAIC,iBAAiBF,OAAOG,WAA5B,CAXoD,CAapD;;AACA,QAAGC,UAAUC,QAAV,CAAmBC,OAAnB,CAA2B,KAA3B,MAAsC,CAAzC,EAA4C;AAC1CJ,wBAAkB,EAAlB;AACD;;AAED,QAAGP,kBAAkBI,aAArB,EAAoCJ,kBAAkBI,aAAlB;AACpC,QAAGH,mBAAmBM,cAAtB,EAAsCN,mBAAmBM,cAAnB;AAEtC,QAAMK,YAAYC,OAAOC,IAAP,CAChBnB,IADgB,EAEhBG,UAFgB,WAGTI,aAHS,cAGaC,cAHb,eAGqCH,eAHrC,gBAG+DC,gBAH/D,IAGkFF,YAAY,cAAZ,GAA6B,cAH/G,+BAAlB;AAMA,WAAOa,SAAP;AACD,GA5BM;;;;AA8BA,MAAMG,cAAc,SAAdA,WAAc,GAAU;AACnCF,WAAOG,KAAP;AACD,GAFM;;;;AAIA,MAAMC,UAAU,SAAVA,OAAU,CAAStB,IAAT,EAAe;AACpC,QAAMiB,YAAYC,OAAOC,IAAP,CAAYnB,IAAZ,EAAkB,QAAlB,CAAlB;AACAiB,cAAUM,KAAV;AACA,WAAON,SAAP;AACD,GAJM;;;;AAMA,MAAMO,cAAc,SAAdA,WAAc,OAA4B;AAAA,QAAjBC,aAAiB,QAAjBA,aAAiB;;AACrD,QAAI;AACF,UAAMC,UAAUR,OAAOQ,OAAvB;AACA,UAAMC,cAAcD,QAAQE,MAAR,GAAiB,CAArC;;AAEA,UAAGD,eAAeF,aAAlB,EAAiC;AAC/B,YAAG,OAAOA,aAAP,KAAyB,QAA5B,EAAsC;AACpCI,mBAAS7B,IAAT,GAAgByB,aAAhB;AACD;;AACD,YAAG,OAAOA,aAAP,KAAyB,UAA5B,EAAwC;AACtC,iBAAOA,eAAP;AACD;AACF,OAPD,MAOO;AACLC,gBAAQI,IAAR;AACD;AACF,KAdD,CAcE,OAAOC,CAAP,EAAU;AACV,aAAO,IAAP;AACD;AACF,GAlBM","sourcesContent":["const WINDOW_POPUP_DEFAULT_WIDTH = 1100;\nconst WINDOW_POPUP_DEFAULT_HEIGHT = 900;\n\nexport const openWindow = function(href, windowParam) {\n  const hasParam   = typeof windowParam === \"object\";\n  const windowName = hasParam && windowParam[\"name\"] || \"_blank\";\n  const useResize  = (hasParam && windowParam[\"resize\"]+\"\") !== \"false\";\n\n  let destWindowWidth  = (hasParam && windowParam[\"width\"] || WINDOW_POPUP_DEFAULT_WIDTH);\n  let destWindowHeight = (hasParam && windowParam[\"height\"] || WINDOW_POPUP_DEFAULT_HEIGHT);\n  let destWindowTop    = (hasParam && windowParam[\"top\"] || windowParam[\"y\"] || 0);\n  let destWindowLeft   = (hasParam && windowParam[\"left\"] || windowParam[\"x\"] || 0);\n\n  const availMaxWidth = screen.availWidth;\n  let availMaxHeight = screen.availHeight;\n\n  // IE bottom bar\n  if(navigator.platform.indexOf(\"Win\") === 0) {\n    availMaxHeight -= 65;\n  }\n\n  if(destWindowWidth > availMaxWidth) destWindowWidth = availMaxWidth;\n  if(destWindowHeight > availMaxHeight) destWindowHeight = availMaxHeight;\n\n  const newWindow = window.open(\n    href,\n    windowName,\n    `top=${destWindowTop},left=${destWindowLeft},width=${destWindowWidth},height=${destWindowHeight}${useResize ? \",resizable=1\" : \",resizable=0\"},scrollbars=yes,status=1`\n  );\n\n  return newWindow;\n};\n\nexport const closeWindow = function(){\n  window.close();\n};\n\nexport const openTab = function(href) {\n  const newWindow = window.open(href, '_blank');\n  newWindow.focus();\n  return newWindow;\n};\n\nexport const historyBack = function({ catchFallback }) {\n  try {\n    const history = window.history;\n    const initialPage = history.length < 2;\n\n    if(initialPage && catchFallback) {\n      if(typeof catchFallback === \"string\") {\n        location.href = catchFallback;\n      }\n      if(typeof catchFallback === \"function\") {\n        return catchFallback();\n      }\n    } else {\n      history.back();\n    }\n  } catch (e) {\n    return null;\n  }\n};"],"file":"window.js"}