{"version":3,"sources":["../../.src/web/env/window.js"],"names":["WINDOW_POPUP_DEFAULT_WIDTH","WINDOW_POPUP_DEFAULT_HEIGHT","openWindow","href","windowParam","hasParam","windowName","useResize","destWindowWidth","destWindowHeight","availMaxWidth","screen","availWidth","availMaxHeight","availHeight","navigator","platform","indexOf","newWindow","window","open","openTab","focus","historyBack","catchFallback","history","initialPage","length","location","back","e"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,MAAMA,6BAA6B,IAAnC;AACA,MAAMC,8BAA8B,GAApC;;AAEO,MAAMC,aAAa,SAAbA,UAAa,CAASC,IAAT,EAAeC,WAAf,EAA4B;AACpD,QAAMC,WAAa,OAAOD,WAAP,KAAuB,QAA1C;AACA,QAAME,aAAaD,YAAYD,YAAY,MAAZ,CAAZ,IAAmC,QAAtD;AACA,QAAMG,YAAa,CAACF,YAAYD,YAAY,QAAZ,CAAb,IAAoC,EAApC,KAA2C,OAA9D;AAEA,QAAII,kBAAoBH,YAAYD,YAAY,OAAZ,CAAZ,IAAoCJ,0BAA5D;AACA,QAAIS,mBAAoBJ,YAAYD,YAAY,QAAZ,CAAZ,IAAqCH,2BAA7D;AAEA,QAAMS,gBAAgBC,OAAOC,UAA7B;AACA,QAAIC,iBAAiBF,OAAOG,WAA5B,CAToD,CAWpD;;AACA,QAAGC,UAAUC,QAAV,CAAmBC,OAAnB,CAA2B,KAA3B,MAAsC,CAAzC,EAA4C;AAC1CJ,wBAAkB,EAAlB;AACD;;AAED,QAAGL,kBAAkBE,aAArB,EAAoCF,kBAAkBE,aAAlB;AACpC,QAAGD,mBAAmBI,cAAtB,EAAsCJ,mBAAmBI,cAAnB;AAEtC,QAAMK,YAAYC,OAAOC,IAAP,CAChBjB,IADgB,EAEhBG,UAFgB,aAGPE,eAHO,gBAGmBC,gBAHnB,IAGsCF,YAAY,cAAZ,GAA6B,EAHnE,+BAAlB;AAMA,WAAOW,SAAP;AACD,GA1BM;;;;AA4BA,MAAMG,UAAU,SAAVA,OAAU,CAASlB,IAAT,EAAe;AACpC,QAAMe,YAAYC,OAAOC,IAAP,CAAYjB,IAAZ,EAAkB,QAAlB,CAAlB;AACAe,cAAUI,KAAV;AACA,WAAOJ,SAAP;AACD,GAJM;;;;AAMA,MAAMK,cAAc,SAAdA,WAAc,OAA4B;AAAA,QAAjBC,aAAiB,QAAjBA,aAAiB;;AACrD,QAAI;AACF,UAAMC,UAAUN,OAAOM,OAAvB;AACA,UAAMC,cAAcD,QAAQE,MAAR,GAAiB,CAArC;;AAEA,UAAGD,eAAeF,aAAlB,EAAiC;AAC/B,YAAG,OAAOA,aAAP,KAAyB,QAA5B,EAAsC;AACpCI,mBAASzB,IAAT,GAAgBqB,aAAhB;AACD;;AACD,YAAG,OAAOA,aAAP,KAAyB,UAA5B,EAAwC;AACtC,iBAAOA,eAAP;AACD;AACF,OAPD,MAOO;AACLC,gBAAQI,IAAR;AACD;AACF,KAdD,CAcE,OAAOC,CAAP,EAAU;AACV,aAAO,IAAP;AACD;AACF,GAlBM","sourcesContent":["const WINDOW_POPUP_DEFAULT_WIDTH = 1100;\nconst WINDOW_POPUP_DEFAULT_HEIGHT = 900;\n\nexport const openWindow = function(href, windowParam) {\n  const hasParam   = typeof windowParam === \"object\";\n  const windowName = hasParam && windowParam[\"name\"] || \"_blank\";\n  const useResize  = (hasParam && windowParam[\"resize\"])+\"\" !== \"false\";\n  \n  let destWindowWidth  = (hasParam && windowParam[\"width\"] || WINDOW_POPUP_DEFAULT_WIDTH);\n  let destWindowHeight = (hasParam && windowParam[\"height\"] || WINDOW_POPUP_DEFAULT_HEIGHT);\n\n  const availMaxWidth = screen.availWidth;\n  let availMaxHeight = screen.availHeight;\n\n  // IE bottom bar\n  if(navigator.platform.indexOf(\"Win\") === 0) {\n    availMaxHeight -= 65;\n  }\n\n  if(destWindowWidth > availMaxWidth) destWindowWidth = availMaxWidth;\n  if(destWindowHeight > availMaxHeight) destWindowHeight = availMaxHeight;\n\n  const newWindow = window.open(\n    href,\n    windowName,\n    `width=${destWindowWidth},height=${destWindowHeight}${useResize ? \",resizable=1\" : \"\"},scrollbars=yes,status=1`\n  );\n\n  return newWindow;\n};\n\nexport const openTab = function(href) {\n  const newWindow = window.open(href, '_blank');\n  newWindow.focus();\n  return newWindow;\n};\n\nexport const historyBack = function({ catchFallback }) {\n  try {\n    const history = window.history;\n    const initialPage = history.length < 2;\n\n    if(initialPage && catchFallback) {\n      if(typeof catchFallback === \"string\") {\n        location.href = catchFallback;\n      }\n      if(typeof catchFallback === \"function\") {\n        return catchFallback();\n      }\n    } else {\n      history.back();\n    }\n  } catch (e) {\n    return null;\n  }\n};"],"file":"window.js"}