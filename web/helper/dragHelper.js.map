{"version":3,"sources":["../../.src/web/helper/dragHelper.js"],"names":["pointerParse","clientX","clientY","x","y","DragHelper","element","option","$element","eq","startFn","moveFn","endFn","dragParams","firstDrag","lastDrag","resetOptions","getOptions","getCurrentPointerDrag","originalEvent","pointerDrag","moveX","moveY","offsetX","offsetY","leftValue","offset","left","topValue","top","dragEnter","elementOffset","predict","pointer","undefined","event","document","on","dragMove","dragExit","attr","off","removeAttr"],"mappings":"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","sourcesContent":["import $ from '../plugins/jquery';\nimport { rebase } from '../../functions';\n\n//드래그\nconst pointerParse = ({ clientX, clientY })=>{\n  return {\n    x:clientX,\n    y:clientY\n  };\n};\n\nexport default function DragHelper(element,option){\n  const $element = $(element).eq(0);\n  let startFn;\n  let moveFn;\n  let endFn;\n  \n  let dragParams = null;\n  let firstDrag  = null;\n  let lastDrag   = null;\n  \n  const resetOptions = function(){\n    const getOptions = rebase(typeof option === \"function\" ? option({ element:$element }) : option);\n    startFn = getOptions[\"start\"];\n    moveFn = getOptions[\"move\"];\n    endFn = getOptions[\"end\"];\n  };\n  \n  const getCurrentPointerDrag = function(originalEvent){\n    const pointerDrag = pointerParse(originalEvent);\n  \n    //현재 이동한 거리\n    pointerDrag.moveX = pointerDrag.x - lastDrag.x;\n    pointerDrag.moveY = pointerDrag.y - lastDrag.y;\n    \n    //처음으로부터 변경된 거리\n    pointerDrag.offsetX = pointerDrag.x - firstDrag.x;\n    pointerDrag.offsetY = pointerDrag.y - firstDrag.y;\n    \n    //처음으로 부터 변경되어 엘리먼트 오프셋 크기\n    pointerDrag.leftValue = dragParams.offset.left + pointerDrag.offsetX;\n    pointerDrag.topValue  = dragParams.offset.top + pointerDrag.offsetY;\n    \n    pointerDrag.left = pointerDrag.leftValue + \"px\";\n    pointerDrag.top  = pointerDrag.topValue + pointerDrag.offsetY + \"px\";\n    \n    return pointerDrag;\n  }\n  \n  const dragEnter = function({ originalEvent }){\n    //init\n    resetOptions();\n    \n    //\n    const elementOffset = $element.predict();\n    const pointerDrag   = pointerParse(originalEvent);\n    \n    firstDrag = pointerDrag;\n    lastDrag  = pointerDrag;\n    \n    dragParams = { offset:elementOffset, pointer:undefined, event:originalEvent };\n    dragParams.pointer = getCurrentPointerDrag(originalEvent);\n    \n    startFn && startFn(dragParams);\n    \n    $(document)\n    .on(\"mousemove\",dragMove)\n    .on(\"mouseup\",dragExit);\n    \n    $(\"body\").attr(\"dragging\", \"\");\n  };\n  \n  const dragMove = function({ originalEvent }){\n    const pointerDrag = pointerParse(originalEvent);\n    if(!moveFn){\n      lastDrag = pointerDrag;\n      return;\n    } else {\n      dragParams.pointer = getCurrentPointerDrag(originalEvent);\n      dragParams.event   = originalEvent;\n      moveFn(dragParams);\n      lastDrag = pointerDrag;\n    }\n  };\n  \n  const dragExit = function({ originalEvent }){\n    dragParams.pointer = getCurrentPointerDrag(originalEvent);\n    dragParams.event   = originalEvent;\n    endFn && endFn(dragParams);\n    dragParams = undefined;\n    \n    $(document)\n    .off(\"mousemove\",dragMove)\n    .off(\"mouseup\",dragExit);\n    \n    $(\"body\").removeAttr(\"dragging\");\n  };\n  \n  $element.on(\"mousedown\",dragEnter);\n  \n  return $element;\n}"],"file":"dragHelper.js"}