{"version":3,"file":"pado.web.js","sources":["../.src/web/env/window.js","../.src/web/env/storage.js","../.src/functions/isLike.js","../.src/functions/cast.js","../.src/functions/enumerable.js","../.src/functions/nice.js","../.src/functions/matrix.js","../.src/modules/matrix.js","../.src/modules/stance.js","../.src/web/env/dom.js","../.src/functions/functions.js","../.src/functions/draw.js","../.src/web/env/url.js","../.src/web/env/transform.js","../.src/web/env/svg.js","../.src/web/plugins/jquery.js","../.src/web/helper/dragHelper.js","../.src/web/helper/repeatHelper.js","../.src/web/helper/index.js","../.src/pado.web.js"],"sourcesContent":["const { windowServiceReserveSession, getOpenerPresenceProperties } = (function (){\n  //to children\n  const reservedSessionStorage = {}\n  \n  //my window\n  let pulledWindowToken\n  let pulledWindowSession\n  let openerPresenceProps\n  \n  //(부모) 윈도우의 정보를 저장\n  const windowServiceReserveSession = function (name, data, listenHandshake){\n    if(listenHandshake === true){\n      window.windowServiceHandshake = function (){\n        delete window.windowServiceHandshake\n        return name\n      }\n    }\n    reservedSessionStorage[name] = data\n    return reservedSessionStorage[name]\n  }\n\n  //자식에게 세션을 당겨올수 있도록 지원\n  const windowServicePullSession = function (name){\n    //console.log(\"windowServicePullSession\",name);\n    var data = reservedSessionStorage[name]\n    delete reservedSessionStorage[name]\n    return data\n  }\n  \n  //\n  const getOpenerPresenceProperties = function (){\n    if(typeof openerPresenceProps === \"function\"){\n      return openerPresenceProps()\n    }\n    return openerPresenceProps\n  }\n  \n  window.windowServiceReserveSession = windowServiceReserveSession\n  window.windowServicePullSession = windowServicePullSession\n\n  try {\n    if(window.opener && window.opener.windowServiceHandshake){\n      pulledWindowToken = window.opener.windowServiceHandshake()\n    }\n  } catch (e){\n    console.warn(\"window.opener.windowServiceHandshake error\")\n  }\n    \n  if(pulledWindowToken && window.opener && window.opener.windowServicePullSession){\n    pulledWindowSession = window.opener.windowServicePullSession(pulledWindowToken)\n    openerPresenceProps = pulledWindowSession\n    \n    //임의로 언로드 됐을때 세션을 임시 저장\n    var saveSessionFn = function (){\n      try {\n        window.opener &&\n        window.opener.windowServiceReserveSession &&\n        window.opener.windowServiceReserveSession(pulledWindowSession.token, pulledWindowSession, true)\n      } catch (e){\n        console.warn(\"Parent window not found.\", e)\n      }\n    }\n    \n    window.addEventListener(\"beforeunload\", saveSessionFn)\n  }\n  \n  return { windowServiceReserveSession, getOpenerPresenceProperties }\n}())\n\nexport const windowProps = getOpenerPresenceProperties\n\nconst WINDOW_POPUP_DEFAULT_WIDTH = 1100\nconst WINDOW_POPUP_DEFAULT_HEIGHT = 900\n\nexport const openWindow = function (href, windowParam){\n  const hasParam    = typeof windowParam === \"object\"\n  const windowName  = hasParam && windowParam[\"name\"] || \"_blank\"\n  const useResize   = (hasParam && windowParam[\"resize\"] + \"\") !== \"false\"\n  const windowProps = hasParam ? windowParam[\"props\"] : undefined\n  \n  let destWindowWidth  = (hasParam && windowParam[\"width\"] || WINDOW_POPUP_DEFAULT_WIDTH)\n  let destWindowHeight = (hasParam && windowParam[\"height\"] || WINDOW_POPUP_DEFAULT_HEIGHT)\n  let destWindowTop    = (hasParam && windowParam[\"top\"] || windowParam[\"y\"] || 0)\n  let destWindowLeft   = (hasParam && windowParam[\"left\"] || windowParam[\"x\"] || 0)\n\n  const availMaxWidth = screen.availWidth\n  let availMaxHeight = screen.availHeight\n\n  // IE bottom bar\n  if(navigator.platform.indexOf(\"Win\") === 0){\n    availMaxHeight -= 65\n  }\n\n  if(destWindowWidth > availMaxWidth) destWindowWidth = availMaxWidth\n  if(destWindowHeight > availMaxHeight) destWindowHeight = availMaxHeight\n  \n  windowServiceReserveSession(windowName, windowProps, true)\n  \n  const newWindow = window.open(\n    href,\n    windowName,\n    `top=${destWindowTop},left=${destWindowLeft},width=${destWindowWidth},height=${destWindowHeight}${useResize ? \",resizable=1\" : \",resizable=0\"},scrollbars=yes,status=1`\n  )\n\n  return newWindow\n}\n\nexport const closeWindow = function (){\n  window.close()\n}\n\nexport const openTab = function (href){\n  const newWindow = window.open(href, '_blank')\n  newWindow.focus()\n  return newWindow\n}\n\nexport const historyBack = function ({ catchFallback }){\n  try {\n    const history = window.history\n    const initialPage = history.length < 2\n\n    if(initialPage && catchFallback){\n      if(typeof catchFallback === \"string\"){\n        location.href = catchFallback\n      }\n      if(typeof catchFallback === \"function\"){\n        return catchFallback()\n      }\n    } else {\n      history.back()\n    }\n  } catch (e){\n    return null\n  }\n}\n","const toDataString = function (tods){ \n  switch (typeof tods){\n    case \"string\":\n      return `\"${tods}\"`\n    case \"object\":\n      return JSON.stringify(tods)\n    case \"boolean\": case \"undefined\": case \"number\":\n    default:\n      return `${tods}`\n  }\n}\n\nconst fromDataString = function (v){ \n  // eslint-disable-next-line no-eval\n  return eval(\"(\" + v + \")\")\n}\n\n//로컬스토리지 데이터 저장\nexport const setLocalData = function (k, v){\n  const localStorage = window.localStorage\n  if(typeof k === \"object\"){\n    Object.keys(k).forEach(key=>{\n      localStorage.setItem(key, toDataString(k[key]))\n    })\n  } else {\n    localStorage.setItem(k, toDataString(v))\n  }\n  return true\n}\n\n//로컬스토리지 데이터 불러오기\nexport const getLocalData = function (k){\n  const localStorage = window.localStorage\n  if(!arguments.length) return localStorage\n  let stringData = localStorage.getItem(k)\n  return (stringData == null) ? undefined : fromDataString(stringData)\n}\n","export const isAbsoluteNaN = function (it){\n  // eslint-disable-next-line no-self-compare\n  return it !== it && typeof it === \"number\"\n}\n\nexport const isNone = function (data){\n  return isAbsoluteNaN(data) || data === undefined || data === null\n}\n\nexport const isNumber = function (it){\n  return (typeof it === \"number\" && !isAbsoluteNaN(it))\n}\n\nexport const isInfinity = function (it){\n  return it === Number.POSITIVE_INFINITY || it === Number.NEGATIVE_INFINITY\n}\n\nexport const isInteger = function (value){\n  //NaN, null, undefined\n  if(isNone(value) === true) return false\n  \n  if(typeof value === \"string\"){\n    value = value.trim()\n  }\n\n  if(!(/string|number/.test(typeof value)) || isInfinity(value) || isNaN(value)){\n    return false\n  }\n\n  return value == parseInt(value, 10)\n}\n\nexport const isArray = function (data){\n  return Array.isArray(data) || data instanceof Array\n}\n\nexport const isObject   = it=>!!((it !== null && typeof it === \"object\"))\nexport const isFunction = (it)=>typeof it === \"function\"\n\n/*\n  * likeObject is have hasOwnProperty\n*/\nexport const likeObject = (it)=>isObject(it) || isFunction(it)\n\nexport const likeString = function (data){\n  if(typeof data === \"string\") return true\n  if(isNumber(data)) return true\n  return false\n}\n\nexport const likeNumber = function (data){\n  if(isNumber(data) || isInfinity(data)) return true\n  if(typeof data === \"string\") return String(parseFloat(data)) === String(data)\n  return false\n}\n\nexport const likeArray = function (item){\n  return (\n    Array.isArray(item) || \n    ( \n      item !== null &&\n      typeof item === \"object\" &&\n      item.hasOwnProperty(\"length\") && \n      typeof item.length === \"number\" && \n      item.length > 0\n    )\n  )\n}\n\nexport const isPlainObject = data=>typeof data === \"object\" && data.constructor === Object\n\nexport const isEnumerableObject = data=>isPlainObject(data) || isArray(data)\n\nexport const isNode = (a)=>isObject(a) && typeof a.nodeType === \"number\"\n\nexport const isEmpty = function (it){\n  if(typeof it === \"undefined\") return true\n  if(typeof it === \"string\") return it.trim().length < 1\n  if(typeof it === \"object\"){\n    if(it == null) return true\n    if(it instanceof RegExp) return false      \n    if(isArray(it)){\n      return !it.length\n    } else {\n      for(var prop in it) return false; return true\n    }\n  }\n  if(typeof it === \"number\"){\n    //NaN check \n    return isAbsoluteNaN(it) || false\n  }\n  if(typeof it === \"function\") return false\n  if(typeof it === \"boolean\") return false\n  return true\n}\n\n// check JSON, input.value possible value\nexport const isPresence = function (it){\n  return !(it === undefined || isAbsoluteNaN(it))\n}\n\nexport const likeRegexp = (s)=>(typeof s === \"string\") || (s instanceof RegExp)\n\n// none(undfinec, null, NaN), value(1,\"1\"), hash({}), array([]), node, object(new, Date), function, boolean\nexport const eqof = function (it){\n  const typeIt = typeof it\n  switch (typeIt){\n    case \"number\":\n      if(isAbsoluteNaN(it)) return \"none\"\n    case \"string\":\n      return \"value\"\n      break\n    case \"object\":\n      if(isNone(it)) return \"none\"\n      if(likeArray(it)) return \"array\"\n      if(isNode(it)) return \"node\"\n      if(!isPlainObject(it)) return \"object\"\n      return \"hash\"\n      break\n    case \"undefined\":\n      return \"none\"\n      break\n    case \"function\":\n    case \"boolean\":\n    default:\n      return typeIt\n      break\n  }\n}\n\nconst baseEq = function (value, other, filter, depth = 0, strict){\n  if(arguments.length < 2) return false\n  \n  const valueType = eqof(value)\n  const otherType = eqof(other)\n  \n  if(valueType !== otherType) return false\n  \n  switch (valueType){\n    case \"none\":\n      return true\n    case \"array\":\n      if(value.length !== other.length){\n        return false\n      }\n      return value.every((vValue, i)=>{\n        const oValue = other[i]\n        return (typeof filter === \"function\" && filter(i, [vValue, oValue], depth) === false) ? true : baseEq(vValue, oValue, filter, depth + 1, strict)\n      })\n      break\n    case \"hash\":\n      const vKeys = Object.keys(value); const oKeys = Object.keys(other)\n      if(vKeys.length !== oKeys.length || !baseEq(vKeys.sort(), oKeys.sort())) return false\n      return vKeys.every((key)=>{\n        const vValue = value[key]\n        const oValue = other[key]\n        return (typeof filter === \"function\" && filter(key, [vValue, oValue], depth) === false) ? true : baseEq(vValue, oValue, filter, depth + 1, strict)\n      })\n      break\n    case \"node\":\n    case \"object\":\n    case \"function\":\n    case \"boolean\":\n    case \"value\":\n    default:\n      return strict ? value === other : value == other\n  }\n}\n\nexport const isEqual   = (value, other, filter, depth)=>baseEq(value, other, filter, depth, true)\nexport const likeEqual = (value, other, filter, depth)=>baseEq(\n  value,\n  other,\n  (key, values, depth)=>/^(\\$|\\_)/.test(key) ? false : typeof filter === \"function\" ? filter(key, values, depth) : true, \n  depth, \n  true\n)\nexport const eqeq      = (value, other, filter, depth)=>baseEq(value, other, filter, depth, false)\n\nexport const isExsist = function (value){\n  if(value === true){\n    return true\n  }\n  if(value === false){\n    return false\n  }\n  if(typeof value === \"string\" || typeof value === \"number\"){\n    return true\n  } else {\n    return false\n  }\n}\n\nexport const notExsist = value=>!isExsist(value)\n\nexport const likePromise = (target)=>(typeof target === \"object\" && target !== null && typeof target['then'] === \"function\" && typeof target['catch'] === \"function\")\n","import {\n  isArray,\n  isNone,\n  isAbsoluteNaN,\n  isPlainObject,\n  isObject\n} from './isLike'\n\nexport const asArray = function (data, defaultArray = undefined){\n  if(isArray(data)){\n    return data\n  }\n  if(isNone(data)){\n    return isArray(defaultArray) ? defaultArray\n      : isNone(defaultArray) ? [] : [defaultArray]\n  }\n  if(typeof data === \"object\" && typeof data.toArray === \"function\"){\n    return data.toArray()\n  }\n  return [data]\n}\n\nexport const toArray = function (data, option){\n  if(typeof data === \"undefined\" || data === null || isAbsoluteNaN(data)) return []\n  if(isArray(data)) return Array.prototype.slice.call(data)\n  if(typeof data === \"object\" && typeof data.toArray === \"function\") return data.toArray()\n  if(typeof data === \"string\" && typeof option === \"string\") return data.split(option)\n  return [data]\n}\n\nexport const asObject = function (data, defaultKey = \"default\"){\n  if(isPlainObject(data)){\n    return data\n  } else {\n    return { [defaultKey]: data }\n  }\n}\n\nexport const toNumber = function (v, d){\n  switch (typeof v){ case \"number\":return v; case \"string\":const vr = v.replace(/[^.\\d\\-]/g, \"\") * 1; return isAbsoluteNaN(vr) ? 0 : vr; break }\n  switch (typeof d){ case \"number\":return d; case \"string\":const dr = d * 1; return isAbsoluteNaN(dr) ? 0 : dr; break }\n  return 0\n}\n\nexport const cleanObject = function (data){\n  if(data instanceof Array){\n    Array.prototype.splice.call(data, 0, data.length)\n  } else if(typeof data == \"object\"){\n    Object.keys(data).forEach(key=>{ delete data[key] })\n  }\n  return data\n}\n\nexport const clone = function (target){\n  switch (typeof target){\n    case \"undefined\": case \"function\": case \"boolean\": case \"number\": case \"string\": return target; break\n    case \"object\":\n      if(target === null) return target\n    \n      if(isArray(target)){\n        let r = []\n        for(let i = 0, length = target.length; i < length; i++)r.push(target[i])\n        return r\n      }\n    \n      if(!isPlainObject(target)){\n        if(target instanceof Date){\n          let r = new Date()\n          r.setTime(target.getTime())\n          return r\n        }\n        return target\n      }\n    \n      let r = {}\n    \n      Object.keys(target).forEach(k=>{\n        if(target.hasOwnProperty(k)) r[k] = target[k]\n      })\n      return r\n      break\n    default : \n      console.error(\"clone::copy failed : target => \", target)\n      return target \n      break\n  }\n}\n\nexport const cloneDeep = function (target){\n  if(typeof target === \"object\"){\n    let d\n    if(isArray(target)){\n      if(!isArray(d)){ d = [] };\n      for(var i = 0, l = target.length; i < l; i++) d.push(((typeof target[i] === \"object\" && target[i] !== null) ? clone(target[i]) : target[i]))\n      return d\n    } else {\n      d = {}\n      Object.keys(target).forEach(p=>{\n        (typeof target[p] === \"object\" && target[p] !== null && d[p]) ? clone(target[p], d[p]) : d[p] = target[p]\n      })\n      return d\n    }\n  } else {\n    return clone(target)\n  }\n}\n\nexport const free = function (datum){\n  const dest = {}\n  Object.keys(datum).forEach(key=>{\n    if(!/^\\$/.test(key)){\n      dest[key] = cloneDeep(datum[key])\n    }\n  })\n  return dest\n}\n\nconst getKeyWithValue = function (obj, value){\n  if(isArray(obj)){\n    for(var i = 0, l = obj.length; i < l; i++) if(obj[i] === value) return i\n  } \n  if(isObject(obj)){\n    for(var key in obj) if(obj[key] === value) return key\n  }\n  return undefined\n}\n\nexport const removeValue = function (obj, value){\n  var detect = true\n  var array  = isArray(obj)\n\n  while(detect){\n    var key = getKeyWithValue(obj, value)\n    if(typeof key === \"undefined\"){\n      detect = false\n    } else {\n      if(array){\n        obj.splice(key, 1)\n      } else {\n        delete obj[key]\n      }\n    }\n  }\n\n  return obj\n}\n\nexport const instance = function (func, proto){\n  var ins; var DummyInstance = function (param){ if(typeof param === \"object\") for(var k in param) this[k] = param[k] }\n  if(typeof func == \"object\"){\n    if(typeof proto === \"object\") DummyInstance.prototype = proto\n    ins = new DummyInstance(func)\n  }\n  if(typeof func == \"function\"){\n    if(typeof proto === \"object\") func.prototype = proto\n    ins = (new func())\n  }\n  return ins\n}\n\nexport const alloc = function (init){\n  let fn = init()\n  const rn = function (...args){\n    return fn.apply(this, args)\n  }\n  rn['reset'] = function (){ fn = init(rn, rn) }\n  rn['$constructor'] = fn\n  return rn\n}\n\n// TODO\n/*\nconst syncData = (function (){\n  const ENTER_HOOK  = (newDatum)=>Object.assign({}, newDatum)\n  const UPDATE_HOOK = (oldDatum, newDatum)=>Object.assign({}, oldDatum, newDatum)\n  \n  return function (oldData, newData, getId, options){\n    if(!/string|function/.test(typeof getId)) throw new Error(\"syncData need getId\")\n  \n    if(typeof getId === \"string\"){\n      const getIdString = getId\n      getId = e=>_.get(e, getIdString)\n    }\n\n    oldData = asArray(oldData)\n    newData = asArray(newData)\n\n    const result = []\n    const hooks  = asObject(options, \"afterEach\")\n    \n    if(typeof hooks[\"enter\"] !== \"function\"){\n      hooks[\"enter\"] = ENTER_HOOK\n    }\n    \n    if(typeof hooks[\"update\"] !== \"function\"){\n      hooks[\"update\"] = UPDATE_HOOK\n    }\n    \n    const oldDataMap = _.map(oldData, e=>{\n      return { id: getId(e), ref: e }\n    })\n    \n    \n    asArray(newData).forEach((newDatum, i)=>{\n      const newId = getId(newDatum)\n      \n      let oldDatum = _.get(oldDataMap[_.findIndex(oldDataMap, e=>e.id === newId)], \"ref\")\n      let genDatum\n      let dirty = false\n      // eslint-disable-next-line no-undef\n      if(oldDatum){\n        // change is not dirty, modify is dirty\n        if(typeof oldDatum !== typeof newDatum){\n          dirty = false\n        } else { // same type\n          const oldOwnKeys = Object.keys(oldDatum).filter(key=>!(key.indexOf(\"$\") === 0))\n          const newOwnKeys = Object.keys(newDatum).filter(key=>!(key.indexOf(\"$\") === 0))\n\n          // inspect key chnage\n          if(_.isEqual(oldOwnKeys, newOwnKeys)){\n            dirty = !_.isEqual(_.pick(oldDatum, oldOwnKeys), _.pick(newDatum, newOwnKeys))\n          } else {\n            dirty = true\n          }\n        }\n        \n        if(typeof hooks[\"beforeUpdate\"] === \"function\"){\n          if(hooks[\"beforeUpdate\"](oldDatum, newDatum) === false){\n            return\n          }\n        }\n        \n        genDatum = hooks[\"update\"](oldDatum, newDatum)\n        \n        if(typeof hooks[\"afterUpdate\"] === \"function\"){\n          genDatum = hooks[\"afterUpdate\"](genDatum, oldDatum, newDatum)\n        }\n      } else {\n        if(typeof hooks[\"beforeEnter\"] === \"function\"){\n          if(hooks[\"beforeEnter\"](newDatum) === false){\n            return\n          }\n        }\n        \n        genDatum = hooks[\"enter\"](newDatum)\n        \n        if(typeof hooks[\"afterEnter\"] === \"function\"){\n          genDatum = hooks[\"afterEnter\"](genDatum, newDatum)\n        }\n      }\n\n      if(typeof hooks[\"afterEach\"] === \"function\"){\n        hooks[\"afterEach\"](genDatum, i, dirty)\n      }\n\n      result.push(genDatum)\n    })\n\n    return result\n  }\n}())\n*/\n","import {\n  asArray\n} from './cast'\n\nexport const all = function (data, fn){\n  data = asArray(data)\n  \n  if(data.length === 0){\n    return false\n  }\n  \n  for(let i = 0, l = data.length; i < l; i++){\n    if(!fn(data[i], i)){\n      return false\n    } \n  };\n  \n  return true\n}\n\nexport const deep = function (data){\n  \n}\n\nexport const times = function (length, fn){\n  const result = []\n  for(var i = 0, l = length; i < l; i++){\n    result.push(fn(i))\n  }\n  return result\n}\n\nexport const forMap = function (object, fn){\n  return Object.keys(object).reduce((dest, key)=>{\n    dest[key] = fn(object[key], key)\n    return dest\n  }, object)\n}\n","import { isNumber, isArray, isAbsoluteNaN } from './isLike'\nimport { asArray } from './cast'\n\nexport const limitNumber = (function (){\n  const limitOf = function (number, max, min){\n    if(typeof number == \"number\"){\n      if(isAbsoluteNaN(number) || number === Infinity){\n        return min\n      }\n      if(isNumber(min) && (number < min)){\n        return min\n      }\n      if(isNumber(max) && (number > max)){\n        return max\n      }\n    }\n    return number\n  }\n  const limitNumber = function (numbers, max, min){\n    if(typeof max !== \"number\"){ max = Number.POSITIVE_INFINITY }\n    if(typeof min !== \"number\"){\n      if(min === null || isAbsoluteNaN(min)){\n        min = Number.NEGATIVE_INFINITY\n      } else {\n        min = 0\n      }\n    }\n    if(isArray(numbers)){\n      for(var d = numbers, i = 0, l = d.length; i < l; i++){\n        d[i] = limitOf(d[i], max, min)\n      }\n      return numbers\n    } else {\n      return limitOf(numbers, max, min)\n    }\n  }\n  return limitNumber\n}())\n\nexport const accurateTimeout = (function (originalTimeout){\n  return function (trigger, time = 0, resolutionRatio = 0.75, coverage = 25){\n    let destTime = Date.now() + time\n    \n    if(!isNumber(time)){\n      time = 0\n    }\n    \n    if(!isNumber(resolutionRatio)){\n      resolutionRatio = 0.75\n    }\n    \n    if(!isNumber(coverage)){\n      resolutionRatio = 25\n    }\n    \n    if(resolutionRatio > 1){\n      resolutionRatio = 1\n    }\n        \n    if(resolutionRatio < 0.1){\n      resolutionRatio = 0.1\n    }\n    \n    if(coverage < 5){\n      coverage = 5\n    }\n        \n    function preparation (restTime){\n      const preparaTime = Math.floor(restTime * resolutionRatio)\n      originalTimeout(execution, preparaTime)\n    }\n        \n    function execution (){\n      const restTime = destTime - Date.now()\n        \n      if(restTime < coverage){\n        if(restTime < 1){\n          originalTimeout(trigger, 0)\n        } else {\n          originalTimeout(trigger, restTime)\n        }\n      } else {\n        preparation(restTime)\n      }\n    }\n    \n    execution()\n  }\n}(setTimeout))\n\nexport const turn = function (i, limit, ts, resultHook){\n  if(i < 0){ \n    let abs = Math.abs(i / ts) \n    i = limit - (abs > limit ? abs % limit : abs)\n  }\n  ts = typeof ts === \"number\" ? ts : 1\n  const fixIndex = Math.floor(i / ts)\n  const result = (limit > fixIndex) ? fixIndex : fixIndex % limit\n  return typeof resultHook === \"function\" ? resultHook(result, i, limit, ts) : result\n}\n\nexport const turnTime = function (i, limit, ts){\n  return turn(i, limit, ts, (result, i, limit, ts)=>[result, Math.floor(i / (limit * ts))])\n}\n\nexport const toggle = function (toggleArgs, currentValue, step = 1){\n  return (toggleArgs = asArray(toggleArgs)) && toggleArgs[(toggleArgs.findIndex(val=>val === currentValue) + step) % toggleArgs.length]\n}\n","import { asArray, cloneDeep } from './cast'\nimport { isArray, likeArray, isNumber, isAbsoluteNaN } from './isLike'\nimport { top } from './reduce'\nimport { turn, limitNumber } from './nice'\nimport { times } from './enumerable'\n\nexport const rangeModel = function (value, step, sizeBase){\n  let start, end, reverse\n  \n  if(typeof value === \"number\"){\n    end = value\n    start = 0\n  } else if(typeof value === \"object\"){\n    start = value[0]\n    end = value[1]\n      \n    if(!step && typeof value[2] === \"number\"){\n      step = value[2]\n    }\n      \n    if(typeof sizeBase !== \"boolean\"){\n      sizeBase = false\n    }\n  }\n  \n  /*\n  if(typeof start !== \"number\" || typeof end !== \"number\"){\n    if(typeof start !== \"number\" && typeof end !== \"number\") return r\n    if(typeof start === \"number\") return r.push(start), r\n    if(typeof end === \"number\") return r.push(end), r\n  }\n  */\n  \n  if(start > end){\n    reverse = end\n    end = start\n    start = reverse\n    reverse = true\n  }\n  \n  end = parseFloat(end)\n  end = isAbsoluteNaN(end) ? 0 : end\n  start = parseFloat(start)\n  start = isAbsoluteNaN(start) ? 0 : start\n  step = parseFloat(step)\n  step = isAbsoluteNaN(step) || step == 0 ? 1 : step\n  \n  return {\n    start,\n    end,\n    step,\n    reverse,\n    sizeBase\n  }\n}\n\nexport const range = function (value, stepSize, sizeBaseRange){\n  let r = []\n  let {\n    start,\n    end,\n    step,\n    reverse,\n    sizeBase\n  } = rangeModel(value, stepSize, sizeBaseRange)\n  \n  if(step <= 0){ return console.warn(\"range::not support minus step\"), r };\n  if(sizeBase == false){ for(var i = start, l = end; i <= l; i = i + step) r.push(i) } else { for(var i = start, l = end; i < l; i = i + step) r.push(i) }\n  return reverse ? r.reverse() : r\n}\n\n//TODO : move to ?\nexport const hashMap = function (d, f){\n  if(typeof d === \"object\" && !isArray(d)){\n    for(let k in d) d[k] = f(d[k], k) \n  } else {\n    return f(d, (void 0))\n  }\n  return d\n}\n\nexport const domainRangeValue = function (domain, range, vs, nice, limit){\n  return hashMap(cloneDeep(vs), function (v, sel){\n    const $range  = sel ? range[sel] : range\n    const $domain = sel ? domain[sel] : domain\n    if(!$range || !$domain){ return v }\n                    \n    const dSize = $domain[1] - $domain[0]\n    const sSize = $range[1] - $range[0]\n    const dRate = (v - $domain[0]) / dSize\n    const calc  = $range[0] + sSize * dRate\n    const result = nice ? Math.floor(calc) : calc\n    \n    return limit \n      ? $range[1] > $range[0] \n        ? limitNumber(result, $range[1], $range[0])\n        : limitNumber(result, $range[0], $range[1])\n      : result\n  })\n}\n\nexport const domainRangeInterpolate = function (domain, range, nice, limit){\n  let _domain = domain\n  let _range  = range\n  let _nice   = nice\n  \n  const interpolate = (value)=>domainRangeValue(_domain, _range, value, _nice, limit)\n  \n  interpolate.domain = (domain)=>{\n    _domain = domain\n    return interpolate\n  }\n  interpolate.range = (range)=>{\n    _range = range\n    return interpolate\n  }\n  interpolate.nice = (nice)=>{\n    _nice = nice\n    return interpolate\n  }\n  \n  return interpolate\n}\n\n//matrixRange([1],[3]) // [[1], [2], [3]] \n//matrixRange([1,1],[3,3]) // [[1, 1], [2, 1], [3, 1], [1, 2], [2, 2], [3, 2], [1, 3], [2, 3], [3, 3]]\n\nexport const matrixRange = function (start, end, step, sizeBase){\n  var scales = []\n  var maxLength = top([start.length, end.length])\n    \n  var selectLengthes = times(maxLength, function (scaleIndex){\n    const rangeResult = range([start[scaleIndex], end[scaleIndex]], step, sizeBase)\n    scales.push(rangeResult)\n    return rangeResult.length\n  })\n\n  var result = times(selectLengthes.reduce(function (redu, value){\n    return redu * value\n  }, 1), function (){ return new Array(maxLength) })\n    \n  var turnSize = 1\n  \n  \n  asArray(scales).forEach((scaleCase, scaleIndex)=>{\n    var scaleCaseLength = scaleCase.length\n    times(result.length, function (time){\n      result[time][scaleIndex] = scaleCase[turn(time, scaleCaseLength, turnSize)]\n    })\n    turnSize = turnSize * scaleCaseLength\n  })\n    \n  return result\n}\n\n//validate matrix format\nexport const validMatrix = function (arr){\n  // Matrix must be array\n  if(!likeArray(arr)){\n    return false\n  }\n  \n  // Empty is valid\n  if(arr.length === 0){\n    return true\n  }\n  \n  //find some error ( return true => false)\n  return !Array.from(arr).some((v)=>{\n    if(likeArray(v)){\n      //length check\n      if(v.length !== arr.length) return true\n      //type check\n      return v.some(likeError=>!(likeError == undefined || isNumber(likeError)))\n    }\n    return true\n  })\n}\n\n// real matrix model\nexport const asMatrix = function (arr, columnSize){\n  const result = []\n  if(typeof columnSize === \"number\" && columnSize > 0){\n    const rowCount = Math.ceil(arr.length / columnSize)\n    times(rowCount, i=>{\n      const column = []\n      times(columnSize, ci=>{ column.push(arr[i * columnSize + ci]) })\n      result.push(column)\n    })\n  } else {\n    return [arr]\n  }\n  return result\n}\n\nexport const multiplyMatrix = function (aMatrix, bMatrix){\n  if(!validMatrix(aMatrix) && validMatrix(bMatrix)){\n    return null\n  }\n  if(aMatrix[0].length !== bMatrix.length){\n    return null\n  }\n  const result = []\n  times(bMatrix.length, rRowIndex=>{\n    const columnLength = bMatrix[rRowIndex].length\n    const columnResult = []\n    times(columnLength, rColumnIndex=>{\n      //var calcLog = [];\n      const multiplied = aMatrix[rRowIndex].reduce((dist, num, index)=>{\n        //calcLog.push(`${num} * ${bMatrix[index][rColumnIndex]}`)\n        return num * bMatrix[index][rColumnIndex] + dist\n      }, 0)\n      //console.log(\"calcLog\",calcLog.join(\" + \"))\n      columnResult.push(multiplied)\n    })\n    result.push(columnResult)\n  })\n  return result\n}\n","import { asArray } from '../functions/cast'\nimport { times } from '../functions/enumerable'\nimport { turnTime } from '../functions/nice'\n\nexport const MatrixArray = (function (){\n  const MatrixArray = function (data, column, row){\n    asArray(data).forEach(datum=>{ this.push(datum) })\n    \n    Object.defineProperties(this, {\n      column: {\n        enumerable: false,\n        value     : column\n      },\n      row: {\n        enumerable: false,\n        value     : row\n      },\n      length: {\n        enumerable: false\n      }\n    })\n  }\n\n  MatrixArray.prototype = Object.assign([], {\n    toMatrix (eachResultHook){\n      const result = []\n      eachResultHook = typeof eachResultHook === \"function\" ? eachResultHook : undefined\n\n      times(this.column * this.row, (index)=>{\n        const [ colIndex, rowIndex ] = turnTime(index, this.column)\n        const data       = this[index]\n        const dataResult = eachResultHook ? eachResultHook(data, index, colIndex, rowIndex) : data\n        if(!result[rowIndex]) result[rowIndex] = []\n        result[rowIndex].push(dataResult)\n      })\n      \n      return result\n    },\n    toArray (){\n      return Array.from(this)\n    },\n    eachColumn (eachFn){\n      const rows = this.toMatrix()\n      const columns = times(this.column, colIndex=>{\n        const colData = []\n        rows.forEach(row=>colData.push(row[colIndex]))\n        return colData\n      })\n      \n      return typeof eachFn === \"function\" ? columns.map(eachFn) : columns\n    },\n    eachRow (eachFn){\n      const rows = this.toMatrix()\n      return typeof eachFn === \"function\" ? rows.map(eachFn) : rows\n    },\n    multiply (){\n      //TODO\n    }\n  })\n  \n  return MatrixArray\n})()\n\nexport const makeMatrixArray = function (column, row, eachHook){\n  const matrixProto = times(column * row, (index)=>{\n    const [ colIndex, rowIndex ] = turnTime(index, column)\n    return eachHook(index, colIndex, rowIndex) || [colIndex, rowIndex]\n  })\n  \n  const matrixArray = new MatrixArray(matrixProto, column, row)\n  return matrixArray\n}\n","import { isArray, isNumber } from '../functions/isLike'\nimport { asArray } from '../functions/cast'\nimport { asMatrix, validMatrix, multiplyMatrix } from '../functions/matrix'\nimport { makeMatrixArray } from './matrix'\n\n\nconst likePoint = function (p){\n  return typeof p === \"object\" && p.hasOwnProperty(\"x\") && p.hasOwnProperty(\"y\")\n}\n\n\nconst Point = function (x = 0, y = 0, z = 0, w = 1, meta){\n  // base point config\n  const __ref = { x, y, z, w }\n  let __meta\n  \n  // compute matrix\n  const __matrix   = []\n  const __computed = {\n    matrixVersion  : 0,\n    computedVersion: 0,\n    memoizeRef     : null,\n    memoizeOutput  : null\n  }\n  \n  const compute = (key)=>{\n    const { matrixVersion, computedVersion } = __computed\n    //why un used?\n    //const { memoizeRef } = __computed;\n    \n    let needCompute = !__computed.memoizeRef || matrixVersion !== computedVersion || !(\n      __computed.memoizeRef.x === __ref.x &&\n      __computed.memoizeRef.y === __ref.y &&\n      __computed.memoizeRef.z === __ref.z &&\n      __computed.memoizeRef.w === __ref.w \n    )\n    \n    if(needCompute){\n      const newMemoizeRef = {\n        x: __ref.x,\n        y: __ref.y,\n        z: __ref.z,\n        w: __ref.w\n      }\n      const newComputedMatrix = __matrix.reduce(\n        (dest, matrix)=>multiplyMatrix(matrix, dest),\n        asMatrix([newMemoizeRef.x, newMemoizeRef.y, newMemoizeRef.z, newMemoizeRef.w], 1)\n      )\n      //\n      __computed.memoizeOutput = {\n        x: newComputedMatrix[0][0],\n        y: newComputedMatrix[0][1],\n        z: newComputedMatrix[0][2],\n        w: newComputedMatrix[0][3]\n      }\n      __computed.memoizeRef = newMemoizeRef\n      __computed.computedVersion = matrixVersion\n    } \n    //else {\n    //  console.log(`compute cache ${key}`);\n    //}\n    return key && __computed.memoizeOutput[key] || __computed.memoizeOutput\n  }\n  \n  Object.defineProperties(this, {\n    x   : { enumerable: true, get: ()=>(__matrix.length && compute('x') || __ref.x), set: v=>__ref.x = v},\n    y   : { enumerable: true, get: ()=>(__matrix.length && compute('y') || __ref.y), set: v=>__ref.y = v},\n    z   : { enumerable: true, get: ()=>(__matrix.length && compute('z') || __ref.z), set: v=>__ref.z = v},\n    w   : { enumerable: true, get: ()=>(__matrix.length && compute('w') || __ref.w), set: v=>__ref.w = v},\n    meta: {\n      enumerable: false, \n      get (){ return __meta },\n      set (it){ __meta = typeof it === \"object\" ? it : null; return __meta }\n    },\n    rx: { enumerable: false,\n      get       : ()=>{\n        const rangeWidth = (this.meta && this.meta.range && this.meta.range.width) || 0\n        return this.x / rangeWidth\n      }\n    },\n    ry: { \n      enumerable: false,\n      get       : ()=>{\n        const rangeHeight = (this.meta && this.meta.range && this.meta.range.height) || 0\n        return this.y / rangeHeight\n      }\n    },\n    addMatrix: {\n      enumerable: false,\n      value     : function (matrix){\n        if(!validMatrix(matrix)) throw new Error(\"invalid addMatrix param\")\n        __matrix.push(matrix)\n        __computed.matrixVersion += 1\n        return this\n      }\n    }\n  })\n  this.meta = meta\n}\n\nPoint.prototype = {\n  addMeta (obj){\n    if(typeof obj === \"object\") this.meta = Object.assign(this.meta && this.meta || {}, obj)\n    return this\n  },\n  clone (){\n    return new Point(this.x, this.y, this.z, this.w, this.meta)\n  },\n  call (fn){\n    if(typeof fn === \"function\"){\n      return fn(this) || this\n    }\n    return this\n  },\n  toJSON (withMeta){\n    const json = { x: this.x, y: this.y, z: this.z, w: this.w }\n    if(withMeta === true && this.meta) json.meta = this.meta\n    return json\n  },\n  pull (width = 0, angle = \"horizontal\"){\n    const { x, y, z, w } = this\n    switch (angle){\n      case \"h\": case \"horizontal\":\n        const xHalf = width <= 0 ? 0 : width / 2\n        return new Vertex([{x: x - xHalf, y, z, w}, {x: x + xHalf, y, z, w}])\n      default:\n    }\n  },\n  vertexWith (destPoint){\n    const points = asArray(destPoint)\n    points.unshift(this)\n    return new Vertex(points)\n  },\n  rectWith ({x, y}){\n    const [largeX, smallX] = this.x > x ? [ this.x, x ] : [ x, this.x ]\n    const [largeY, smallY] = this.y > y ? [ this.y, y ] : [ y, this.y ]\n    return new Rect(smallX, smallY, largeX - smallX, largeY - smallY, 0, 0)\n  }\n}\n\nconst Vertex = function (pointArray, meta){\n  let __meta\n  \n  Object.defineProperties(this, {\n    meta: {\n      enumerable: false, \n      get (){ return __meta },\n      set (it){ __meta = typeof it === \"object\" ? it : null; return __meta }\n    }\n  })\n  \n  this.meta = meta\n  \n  asArray(pointArray).forEach(point=>{\n    if(!likePoint(point)) return\n    const {x, y, z, w} = point\n    this.push(new Point(x, y, z, w, __meta))\n  })\n};\n\n(function (classFunction, methods){\n  const prototype = []\n  \n  classFunction.prototype = prototype\n  \n  Object.keys(methods).forEach(key=>{\n    prototype[key] = methods[key]\n  })\n  \n  Object.defineProperties(prototype, {\n    start: {\n      enumerable: false,\n      get (){\n        return this[0]\n      }\n    },\n    end: {\n      enumerable: false,\n      get (){\n        return !this.length ? void 0 : this[this.length - 1]\n      }\n    }\n  })\n}(Vertex, {\n  addMeta (obj){\n    if(typeof obj === \"object\") this.meta = Object.assign(this.meta && this.meta || {}, obj)\n    return this\n  },\n  toJSON (withMeta){\n    const result = []\n    this.forEach(p=>result.push(p.toJSON(withMeta)))\n    return result\n  },\n  clone (){\n    return new Vertex(this)\n  },\n  eq (index){\n    return this[index]\n  },\n  join: function (fn){\n    const joins = []\n    this.forEach((refp, i)=>{\n      joins.push(refp)\n      if(!this[i + 1]) return\n      const newp = fn(refp, this[i + 1], i)\n      if(!likePoint(newp)) return\n      const {x, y, z, w, meta} = newp\n      joins.push(new Point(x, y, z, w, meta))\n    })\n    this.splice(0, this.length)\n    joins.forEach(p=>this.push(p))\n    return this\n  },\n  point (order){\n    switch (order){\n      case \"e\": case \"end\":\n      case \"d\": case \"down\": case \"r\": case \"right\":\n        const { x:px, y:py, z:pz, w:pw } = this.end\n        return new Point(\n          px,\n          py,\n          pz,\n          pw,\n          this.meta\n        )\n      case \"c\": case \"m\": case \"center\": case \"middle\":\n        const { x:sx, y:sy, z:sz, w:sw } = this.start\n        const { x:ex, y:ey, z:ez, w:ew } = this.end\n        return new Point(\n          sx / 2 + ex / 2,\n          sy / 2 + ey / 2,\n          sz / 2 + ez / 2,\n          sw / 2 + ew / 2,\n          this.meta\n        )\n      case \"s\": case \"start\":\n      case \"u\": case \"up\": case \"l\": case \"left\":\n      default:\n        const { x, y, z, w } = this.start\n        return new Point(\n          x,\n          y,\n          z,\n          w,\n          this.meta\n        )\n    }\n  },\n  transform (transform, rect){\n    const useRect = !!rect\n    \n    if(useRect){\n      const { left, top, width, height } = rect\n      \n      //rotateOrigin\n      const originX = left + width / 2\n      const originY = top + height / 2\n      \n      this.forEach(point=>{\n        point.translate({ x: -originX, y: -originY })\n        point.transform(transform)\n        point.translate({ x: originX, y: originY })\n      })\n    } else {\n      this.forEach(point=>{\n        point.transform(transform)\n      })\n    }\n    return this\n  }\n}))\n\n\nconst Rect = function (left = 0, top = 0, width = 0, height = 0, meta = null){\n  const __ref = { left, top, width, height }\n  let __meta\n  Object.defineProperties(this, {\n    width: { \n      enumerable: true, \n      get (){ return __ref.width },\n      set (newValue){\n        const oldValue = __ref.width\n        __ref.width = newValue\n        __ref.right += newValue - oldValue\n        return newValue\n      }\n    },\n    height: { \n      enumerable: true, \n      get (){ return __ref.height },\n      set (newValue){\n        const oldValue = __ref.height\n        __ref.height = newValue\n        __ref.bottom += newValue - oldValue\n        return newValue\n      }\n    },\n    left  : { enumerable: true, get (){ return __ref.left } },\n    top   : { enumerable: true, get (){ return __ref.top } },\n    right : { enumerable: true, get (){ return this.left + this.width } },\n    bottom: { enumerable: true, get (){ return this.top + this.height } },\n    meta  : {\n      enumerable: false, \n      get (){ return __meta },\n      set (it){ \n        __meta = typeof it === \"object\" ? it : null \n        return __meta\n      }\n    }\n  })\n  \n  this.meta = meta\n}\n\nconst splitCountParser = (split)=>{\n    //splitCount [ horizental, vertical ]\n    //1 = [ 1 ]\n    //[1, 2] = [1, 2]\n  const [ columnOrder, rowOrder ] = asArray(split)\n  return {\n    column: isNumber(columnOrder) && columnOrder > 0 ? parseInt(columnOrder, 10) : 1,\n    row   : isNumber(rowOrder) && rowOrder > 0 ? parseInt(rowOrder, 10) : 1\n  }\n}\n\nRect.prototype = {\n  addMeta (obj){\n    if(typeof obj === \"object\") this.meta = Object.assign(this.meta && this.meta || {}, obj)\n    return this\n  },\n  clone (){\n    return new Rect(this.left, this.top, this.width, this.height, this.meta)\n  },\n  toJSON (withMeta){\n    const json = {width: this.width, height: this.height, left: this.left, top: this.top, right: this.right, bottom: this.bottom }\n    if(withMeta === true && this.meta) json.meta = this.meta\n    return json\n  },\n  findPoint (findWord){\n    const [ lineFind, pointFind ] = isArray(findWord) ? findWord : findWord.trim().split(/\\s+/)\n    return this.vertex(lineFind).point(pointFind)\n  },\n  vertex (order){\n    const inheritMeta = Object.assign({\n      perspective      : 0,\n      perspectiveOrigin: {\n        x: this.left + (this.width / 2),\n        y: this.top + (this.top / 2),\n        z: 0\n      }\n    }, this.meta)\n    \n    switch (order){\n      case \"right\": case \"r\":\n        return new Vertex([{x: this.right, y: this.top, z: 0, w: 0}, {x: this.right, y: this.bottom, z: 0, w: 0}], inheritMeta)\n      case \"bottom\": case \"b\":\n        return new Vertex([{x: this.left, y: this.bottom, z: 0, w: 0}, {x: this.right, y: this.bottom, z: 0, w: 0}], inheritMeta)\n      case \"left\": case \"l\":\n        return new Vertex([{x: this.left, y: this.top, z: 0, w: 0}, {x: this.left, y: this.bottom, z: 0, w: 0}], inheritMeta)\n      case \"top\": case \"t\":\n        return new Vertex([{x: this.left, y: this.top, z: 0, w: 0}, {x: this.right, y: this.top, z: 0, w: 0}], inheritMeta)\n      case \"middle\": case \"m\":\n        const middleY = this.height / 2 + this.top\n        return new Vertex(\n          [\n            {x: this.left, y: middleY, z: 0, w: 0},\n            {x: this.right, y: middleY, z: 0, w: 0}\n          ],\n          inheritMeta\n        )\n      case \"center\": case \"c\":\n        const centerX = this.width / 2 + this.x\n        return new Vertex(\n          [\n            {x: centerX, y: this.top, z: 0, w: 0},\n            {x: centerX, y: this.bottom, z: 0, w: 0}\n          ],\n          inheritMeta\n        )\n      default:\n        return new Vertex(\n          [\n            {x: this.left, y: this.top, z: 0, w: 0},\n            {x: this.left, y: this.bottom, z: 0, w: 0},\n            {x: this.right, y: this.bottom, z: 0, w: 0},\n            {x: this.right, y: this.top, z: 0, w: 0}\n          ],\n          inheritMeta\n        )\n    }\n  },\n  piecesWithCount (splitCount, eachResultHook){\n    const { column, row } = splitCountParser(splitCount)\n    const width = this.width\n    const height = this.height\n    const pieceWidth = width / column\n    const pieceHeight = height / row\n    eachResultHook = typeof eachResultHook === \"function\" ? eachResultHook : undefined\n    \n    const pacResult = makeMatrixArray(column, row, (index, colIndex, rowIndex)=>{\n      const pacMeta = { \n        column: colIndex,\n        row   : rowIndex,\n        coords: [colIndex, rowIndex], \n        range : { width, height }\n      }\n      const result = new Rect(colIndex * pieceWidth, rowIndex * pieceHeight, pieceWidth, pieceHeight, pacMeta)\n      return eachResultHook ? eachResultHook(result, index, colIndex, rowIndex) : result\n    })\n    \n    return pacResult\n  },\n  fit (rect){\n    if(typeof rect !== \"object\"){ throw new Error(\"fit::argument[0] is not object\") }\n    const { width, height } = rect\n    \n    if(!isNumber(width) || !isNumber(height)){ throw new Error(\"fit::argument[0] is not { width:Number, height:Number }\") }\n    const WHRatio = [ width / this.width, height / this.height ]\n    const transformRatio = WHRatio.sort()[0]\n    \n    this.width = (this.width * transformRatio) || 0\n    this.height = (this.height * transformRatio) || 0\n    \n    return this\n  },\n  //TODO : incompleted sticky(parent, position, offset);\n  sticky ({left:refX, top:refY, width:refWidth, height:refHeight}, position = \"bottom left\"){\n    const { left, top, width, height } = this\n    switch (position){\n      case \"bl\": case \"obl\": case \"bottom left\": case \"outer bottom left\":\n        return rect({\n          left: refX,\n          top : refY + refHeight,\n          width,\n          height\n        })\n      case \"c\": case \"m\": case \"mc\": case \"center\": case \"middle\": case \"middle center\":\n        return rect({\n          left: refX + refWidth / 2 - width / 2,\n          top : refY + refHeight / 2 - height / 2,\n          width,\n          height\n        })\n      default:\n        return rect({ left, top, width, height })\n    }\n  }\n}\n\nexport const point = function (x, y, z, w){\n  return typeof x === \"object\" \n    ? new Point(x.x, x.y, x.z, x.w) \n    : new Point(x, y, z, w)\n}\n\nexport const vertex = function (start, end){\n  return new Vertex([{x: start.x, y: start.y, z: start.z, w: start.w}, {x: end.x, y: end.y, z: end.z, w: end.w}])\n}\n\nexport const rect = function (left, top, width, height, x, y, valid){\n  return typeof left === \"object\"\n    ? new Rect(left.left, left.top, left.width, left.height, left.x, left.y, left.valid)\n    : new Rect(left, top, width, height, x, y, valid)\n}\n","import { rect } from \"../../modules/stance\"\nimport { likeArray, isNode } from \"../../functions/isLike\"\n\nexport const getNode = function (el){\n  let select = likeArray(el) ? el[0] : el\n  return isNode(select) ? select : undefined\n}\n\nexport const isElement = function (el){\n  return el instanceof Element\n}\n\nexport const getElementOffsetRect = function (el){\n  el = getNode(el)\n  \n  if(!isElement(el)){\n    return rect({\n      x     : 0, y     : 0, left  : 0, top   : 0, width : 0, height: 0, right : 0, bottom: 0, valid : false\n    })\n  }\n  \n  let offsetLeft = 0\n  let offsetTop  = 0\n  let offsetWidth = el.offsetWidth\n  let offsetHeight = el.offsetHeight\n  \n  do {\n    offsetLeft += el.offsetLeft\n    offsetTop += el.offsetTop\n    el = el.offsetParent\n      \n    if((!el.html && !el.body) && /absoute|relative|fixed/.test(window.getComputedStyle(el).getPropertyValue(\"position\"))){\n      el = null\n    }\n  } while(el)\n  \n  \n  return rect({\n    x     : offsetLeft,\n    y     : offsetTop,\n    left  : offsetLeft,\n    top   : offsetTop,\n    width : offsetWidth,\n    height: offsetHeight,\n    valid : true\n  })\n}\n\nconst getBoundingRect = function (el){\n  el = getNode(el)\n  \n  if(!isElement(el)){\n    return rect({\n      x     : 0, y     : 0, left  : 0, top   : 0, width : 0, height: 0, right : 0, bottom: 0, valid : false\n    })\n  }\n  \n  const doc = document\n  const win = window\n  const body = doc.body\n\n  let offsetX = win.pageXOffset !== undefined ? win.pageXOffset\n    : (doc.documentElement || body.parentNode || body).scrollLeft\n  let offsetY = win.pageYOffset !== undefined ? win.pageYOffset\n    : (doc.documentElement || body.parentNode || body).scrollTop\n  \n  const boundingRect = el.getBoundingClientRect()\n\n  if(el !== body){\n    let parent = el.parentNode\n    while(parent && parent !== body){\n      offsetX += parent.scrollLeft\n      offsetY += parent.scrollTop\n      parent = parent.parentNode\n    }\n  }\n  \n  return rect({\n    x     : boundingRect.left + offsetX,\n    y     : boundingRect.top + offsetY,\n    left  : boundingRect.left + offsetX,\n    top   : boundingRect.top + offsetY,\n    width : boundingRect.width,\n    height: boundingRect.height,\n    right : boundingRect.right + offsetX,\n    bottom: boundingRect.bottom + offsetY,\n    valid : true\n  })\n}\n\nexport const getElementBoundingRect = function (el){\n  el = getNode(el)\n  \n  //const doc  = document\n  const win  = window\n  \n  const elRect = getBoundingRect(el).toJSON()\n  \n  if(elRect.valid === false){\n    return rect(elRect)\n  }\n  \n  let current = el\n  let parent  = el.parentNode\n  \n  do {\n    if(parent && (!parent.html && !parent.body) && /absoute|relative|fixed/.test(win.getComputedStyle(parent).getPropertyValue(\"position\"))){\n      const { top, left } = getBoundingRect(parent)\n      elRect.top -= top\n      elRect.left -= left\n      elRect.right = elRect.left + elRect.width\n      elRect.bottom = elRect.top + elRect.height\n      current = parent = null\n    } else if(!parent){\n      current = null\n    } else {\n      current = parent\n      parent = current.parentNode\n    }\n  } while(parent)\n  \n  return rect(elRect)\n}\n\nexport const windowRect = function (){\n  return rect({\n    left  : window.screenLeft || window.screenX,\n    top   : window.screenTop || window.screenY,\n    width : window.outerWidth,\n    height: window.outerHeight\n  })\n}\n\nexport const screenRect = function (){\n  return rect({\n    left  : 0,\n    top   : 0,\n    width : screen.width,\n    height: screen.height\n  })\n}\n","import { \n  isObject,\n  isArray,\n  isFunction,\n  isNode,\n  isEqual\n} from './isLike'\n\nimport {\n  asArray\n} from './cast'\n\nimport {\n  get,\n  hasValue\n} from './read'\n\nexport const unique = function (array, findKey){\n  const result    = []\n  const uniqueSet = new Set()\n  if(typeof findKey === \"undefined\"){ findKey = (v)=>v }\n  if(typeof findKey === \"string\"){ const keyPath = findKey; findKey = (v)=>v[keyPath] }\n  array.forEach((v)=>{\n    const key = findKey(v)\n    if(uniqueSet.has(key)) return\n    uniqueSet.add(key)\n    result.push(v)\n  })\n  return result\n}\n\nexport const getKeyBy = function (object, value){\n  if(isFunction(value)){\n    if(isArray(object)) for(var i = 0, l = object.length; i < l; i++) if(value(object[i], i) === true) return i\n    if(isObject(object)) for(var key in object) if(value(object[key], key) === true) return key\n  } else {\n    if(isArray(object)) for(var i = 0, l = object.length; i < l; i++) if(object[i] === value) return i\n    if(isObject(object)) for(var key in object) if(object[key] === value) return key\n  }\n}\n\nexport const clearOf = function (data, fillFn, sp){\n  if(data instanceof Array){\n    sp = Array.prototype.splice.call(data, 0, data.length)\n  } else if(typeof data == \"object\"){\n    sp = {}\n    for(var key in data){ sp[key] = data[key]; delete data[key] } \n  }\n  return (fillFn && fillFn(data, sp)), data\n}\n\nexport const insertOf = function (data, v, a){\n  isArray(data) && data.splice(typeof a === \"number\" ? a : 0, 0, v)\n  return data\n}\n\nexport const moveOf = function (data, oldIndex, newIndex){\n  if(oldIndex !== newIndex && isArray(data) && typeof oldIndex === \"number\" && typeof newIndex === \"number\" && oldIndex >= 0 && oldIndex < data.length){\n    Array.prototype.splice.call(data, newIndex > data.length ? data.length : newIndex, 0, Array.prototype.splice.call(data, oldIndex, 1)[0])\n  }\n  return data\n}\n\nexport const concatOf = function (data, appends){\n  var data = asArray(data)\n  return asArray(appends).forEach(value=>{ data.push(value) }), data\n}\n\n\nexport const filterOf = function (data, func, exitFn){\n  var data    = asArray(data)\n  var exitCnt = 0\n\n  for(var i = 0, ri = 0, keys = Object.keys(data), l = keys.length; i < l; i++, ri++){\n    var key   = keys[i]\n    var value = data[key]\n    var result = func(value, key)\n    if(result == false){\n      /*\n      var exit = Array.prototype.splice.call(data, i, 1)\n      */\n      i--\n      l--\n      typeof exitFn === \"function\" && exitFn(value, ri, exitCnt++)\n    }\n  }\n  \n  return data\n}\n\nexport const sortOf = function (data, filter){\n  if(data.length == 0){\n    return data\n  }\n  \n  switch (filter){\n    case 'desc':\n      filter = function (a, b){ return a > b }\n      break\n    case undefined:\n    case 'asc':\n    default:\n      if(typeof filter !== \"function\"){\n        filter = function (a, b){ return a < b }\n      }\n      break\n  }\n\n  var result = [data[0]]\n\n  for(var i = 1, l = data.length; i < l; i++){\n    for(var ri = 0, rl = result.length; ri < rl; ri++){\n      if(filter(data[i], result[ri]) === true){\n        insertOf(result, data[i], ri)\n        break\n      }\n      if((ri + 1) === result.length){\n        result.push(data[i])\n      }\n    }\n  }\n\n  clearOf(data)\n\n  for(var i = 0, l = result.length; i < l; data.push(result[i]), i++);\n  \n  return data\n}\n\nexport const rebase = function (obj, ref){\n  var result = {}\n  for(var key in obj){\n    if(key === \".*\"){\n      var refValue = obj[key]\n      for(var i = 0, d = Object.keys(ref), l = d.length; i < l; i++){\n        var refKey = d[i]\n        if(typeof refValue === \"function\"){\n          result[refKey] = obj[key]\n        } else {\n          if((typeof refValue !== \"object\" && typeof refValue !== \"object\") || isNode(refValue)){\n            result[refKey] = refValue\n          } else {\n            result[refKey] = Object.assign(result[refKey], refValue)\n          }\n        }\n      }\n    } else if(key.indexOf(\",\") > -1){\n      key.split(\",\").forEach(deepKey=>{\n        deepKey = deepKey.trim()\n        if(typeof obj[key] === \"function\"){\n          result[deepKey] = obj[key]\n        } else {\n          if((!result.hasOwnProperty(deepKey) && typeof obj[key] !== \"object\") || isNode(obj[key])){\n            result[deepKey] = obj[key]\n          } else {\n            result[deepKey] = Object.assign(result[deepKey] || (isArray(obj[key]) ? [] : {}), obj[key], obj[deepKey])\n          }\n        }\n      })\n    } else {\n      if(typeof obj[key] === \"function\"){\n        result[key] = obj[key]\n      } else {\n        if((typeof result[key] !== \"object\" && typeof obj[key] !== \"object\") || isNode(obj[key])){\n          result[key] = obj[key]\n        } else {\n          result[key] = Object.assign(result[key], obj[key])\n        }\n      }\n    }\n  }\n  return result\n}\n\n\n//TODO: Union hasValue\nconst NESTED_HAS_PROC = function (obj, key){\n  var keys = key.split(\".\")\n  if(!keys.length) return false\n\n  var pointer = obj\n  for(var ki in keys){\n    var k = keys[ki]\n\n    if(!pointer.hasOwnProperty(k)){\n      return false\n    } else {\n      pointer = pointer[k]\n    }\n  }\n  return true\n}\n\nexport const diffStructure = function (before, after){\n  var afterKeys = Object.keys(after)\n  var beforeKeys\n  var canDiff = false\n  if(isObject(before)){\n    if(isArray(before)){\n      beforeKeys = before\n    } else {\n      beforeKeys = Object.keys(before)\n      canDiff = true\n    }\n  } else {\n    beforeKeys = []\n  }\n\n  var analysis = {\n    after  : after,\n    before : before,\n    keys   : unique(afterKeys.concat(beforeKeys)).reduce((dest, key)=>{ dest[key] = undefined; return dest }, {}),\n    match  : [],\n    missing: [],\n    surplus: [],\n    diff   : [],\n    pass   : false\n  }\n  \n  //match, missing\n  for(var ki in beforeKeys){\n    if(!beforeKeys.hasOwnProperty(ki)) continue\n      \n    var key = beforeKeys[ki]\n      \n    if(NESTED_HAS_PROC(after, key)){\n      analysis.match.push(key)\n      analysis.keys[key] = \"match\"\n\n      if(canDiff && !isEqual(get(after, key), get(before, key))){\n        analysis.diff.push(key)\n        analysis.keys[key] = \"diff\"\n      }\n    } else {\n      analysis.surplus.push(key)\n      analysis.keys[key] = \"surplus\"\n    }\n  }\n\n  //surplus\n  asArray(afterKeys).forEach(key=>{\n    if(!hasValue(analysis.match, key)){\n      analysis.missing.push(key)\n      analysis.keys[key] = \"missing\"\n    }\n  })\n\n  //absolute\n  analysis.pass = !analysis.missing.length && !analysis.surplus.length\n\n  return analysis\n}\n","/*\n  usage\n  const size = 20\n  const stroke = 1\n\n  const { x, y, radius, diameter } = drawCircleVars(size, stroke);\n  \n  const d = `M${x} ${y} \n  a ${radius} ${radius} 0 0 1 0 ${diameter}\n  a ${radius} ${radius} 0 0 1 0 -${diameter}`\n\n  <svg viewbox=\"0 0 {size} {size}\">\n    <path d=\"{d}\" stroke-width=\"stroke\"></path>\n  </svg>\n*/\nexport const drawCircleVars = function (circleWidth, strokeWidth = 0, drawRatio = 1){\n  const circumference = ((circleWidth - strokeWidth) / 2) * (3.14159 * 2)\n  const radius        = (circumference / (3.14159 * 2))\n  const diameter      = (radius * 2)\n  const x             = circleWidth / 2\n  const y             = strokeWidth / 2\n  //const circumLength  = drawRatio == 1 ? drawRatio : drawRatio * circumference;\n    \n  return { x, y, radius, diameter, circumference, circleWidth, strokeWidth }\n}\n","import { isArray } from '../../functions'\n\nexport const readUrl = function (inputUrl){\n  let info\n  let url \n    \n  try {\n    url = inputUrl || window.document.URL.toString()\n    info = /([\\w]+)(\\:[\\/]+)([^/]*\\@|)([\\w\\d\\.\\-\\_\\+]+)(\\:[\\d]+|)(\\/|)([\\w\\d\\.\\/\\-\\_\\;\\=]+|)(\\?[\\d\\w\\=\\&\\%\\,\\.\\/\\(\\)-]+|)(\\#[\\d\\w]*|)/.exec(url)\n  } catch (e){\n    info = null\n  }\n  \n  if(info === null){\n    console.error(\"faild parse url\", inputUrl)\n    return {\n      url  : url || null,\n      valid: false\n    }\n  }\n  \n  const protocol = info[1]\n  const divider = info[2]\n  const userinfo = info[3]\n  const hostname = info[4]\n  const port = info[5].substring(1)\n  const path = info[6] + info[7]\n  const query = info[8]\n  const fragment = info[9]\n  const filename = /(\\/|)([\\w\\d\\.\\-\\_]+|)$/.exec(info[6] + info[7])[2]\n  const host = info[1] + info[2] + info[4] + info[5]\n  const params = (function (){\n    const result = {}\n    if(query){\n      query.substr(1).split(\"&\").forEach((onePiece)=>{\n        const entry = onePiece.split(\"=\")\n        result[decodeURI(entry[0])] = decodeURI(entry[1])\n      })\n    }\n    return result\n  }())\n\n  return {\n    url,\n    protocol,\n    divider,\n    userinfo,\n    hostname,\n    port,\n    path,\n    query,\n    fragment,\n    filename,\n    host,\n    params,\n    valid: true\n  }\n}\n    \nexport const serialize = function (obj, transform){\n  const params = []\n  let invalid  = []\n  \n  Object.keys(obj).forEach(key=>{\n    let value = obj[key]\n    let stringValue = \"\"\n\n    if(typeof value === \"undefined\"){\n      return\n    } else if(value === null){\n      stringValue = \"\"\n    } else if(isArray(value)){\n      return value.each((val)=>{\n        typeof transform === \"function\"\n          ? params.push(transform(key) + \"=\" + transform(val))\n          : params.push(key + \"=\" + val)\n      })\n    } else if(typeof value === \"object\"){\n      return invalid.push(key)\n    } else {\n      stringValue = value + \"\"\n    }\n          \n    typeof transform === \"function\"\n      ? params.push(transform(key) + \"=\" + transform(stringValue))\n      : params.push(key + \"=\" + stringValue)\n  })\n      \n  if(invalid.length){\n    invalid = null\n  }\n  \n  return params.join(\"&\")\n}\n","import { likeString, isArray } from \"../../functions/isLike\"\n\nexport const getElementTransformMatrix = function (el){\n  const computedStyle       = getComputedStyle(el, null)\n  const computedMatrixParam = computedStyle.transform || computedStyle.webkitTransform || computedStyle.MozTransform || computedStyle.msTransform\n  const c = computedMatrixParam.split(/\\s*[(),]\\s*/).slice(1, -1)\n  if(c.length === 6){\n    return [\n      [+c[0], +c[2], 0, +c[4]],\n      [+c[1], +c[3], 0, +c[5]],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1]\n    ]\n  } else if(c.length === 16){\n    return [\n      [+c[0], +c[4], +c[8], +c[12]],\n      [+c[1], +c[5], +c[9], +c[13]],\n      [+c[2], +c[6], +c[10], +c[14]],\n      [+c[3], +c[7], +c[11], +c[15]]\n    ]\n  }\n  return null\n}\n\n/* https://keithclark.co.uk/articles/calculating-element-vertex-data-from-css-transforms/ */\nconst parseMatrix = (function (){\n  const DEFAULT_MATRIX = {\n    m11: 1,\n    m21: 0,\n    m31: 0,\n    m41: 0,\n    m12: 0,\n    m22: 1,\n    m32: 0,\n    m42: 0,\n    m13: 0,\n    m23: 0,\n    m33: 1,\n    m43: 0,\n    m14: 0,\n    m24: 0,\n    m34: 0,\n    m44: 1\n  }\n  \n  return function (matrixParam){\n    let c = matrixParam.split(/\\s*[(),]\\s*/).slice(1, -1)\n    let matrix\n\n    if(c.length === 6){\n      // 'matrix()' (3x2)\n      matrix = {\n        m11: +c[0],\n        m21: +c[2],\n        m31: 0,\n        m41: +c[4],\n        m12: +c[1],\n        m22: +c[3],\n        m32: 0,\n        m42: +c[5],\n        m13: 0,\n        m23: 0,\n        m33: 1,\n        m43: 0,\n        m14: 0,\n        m24: 0,\n        m34: 0,\n        m44: 1\n      }\n    } else if(c.length === 16){\n      // matrix3d() (4x4)\n      matrix = {\n        m11: +c[0],\n        m21: +c[4],\n        m31: +c[8],\n        m41: +c[12],\n        m12: +c[1],\n        m22: +c[5],\n        m32: +c[9],\n        m42: +c[13],\n        m13: +c[2],\n        m23: +c[6],\n        m33: +c[10],\n        m43: +c[14],\n        m14: +c[3],\n        m24: +c[7],\n        m34: +c[11],\n        m44: +c[15]\n      }\n    } else {\n      // handle 'none' or invalid values.\n      matrix = Object.assign({}, DEFAULT_MATRIX)\n    }\n    return matrix\n  }\n}())\n\n/* https://keithclark.co.uk/articles/calculating-element-vertex-data-from-css-transforms/ */\nexport const getElementTransform = function (el){\n  let computedStyle = getComputedStyle(el, null)\n  let val     = computedStyle.transform || computedStyle.webkitTransform || computedStyle.MozTransform || computedStyle.msTransform\n  let matrix  = parseMatrix(val)\n  let rotateY = Math.asin(-matrix.m13)\n  let rotateX = Math.atan2(matrix.m23, matrix.m33)\n  let rotateZ = Math.atan2(matrix.m12, matrix.m11)\n  \n  return {\n    rotate: {\n      x: rotateX,\n      y: rotateY,\n      z: rotateZ\n    },\n    translate: {\n      x: matrix.m41,\n      y: matrix.m42,\n      z: matrix.m43\n    },\n    matrix        : matrix,\n    transformStyle: val\n  }\n}\n\nexport const transformVariant = (function (likeString, isArray){\n  const TRANSFORM_UNDEFINED = \"0\"\n  \n  const parseTransformValue = function (value, matched){\n    likeString(value) && matched(value)\n  }\n  \n  const parseTransformMultivalue = function (value, matched){\n    isArray(value) && matched(value)\n  }\n  \n  const valueProcess = function (value, unit){\n    if(typeof value === \"number\"){\n      return `${value}${unit}`\n    }\n    if(typeof value === \"string\" && value.trim() !== \"\"){\n      return value\n    }\n    return undefined\n  }\n  \n  const singleValueHook = function (bag, unit, i){\n    return (value)=>{\n      const parseValue = valueProcess(value, unit)\n      if(parseValue === undefined) return\n      bag[i] = parseValue\n    }\n  }\n  \n  const multiValueHook = function (bag, unit){\n    return (multiValue)=>{\n      multiValue.forEach((value, i)=>{\n        const parseValue = valueProcess(value, unit)\n        if(parseValue === undefined) return\n        bag[i] = parseValue\n      })\n    }\n  }\n  \n  const oneNumberToTwoArray = function (one){\n    return typeof one === \"number\" ? [one, one] : one\n  }\n  \n  return function (props){\n    if(typeof props !== \"object\"){\n      return \"\"\n    }\n    const { translateX, translateY, scaleX, scaleY, scaleZ, rotateX, rotateY, rotateZ } = props\n    let { translate, translate3d, scale, scale3d, rotate, rotate3d } = props\n    translate = oneNumberToTwoArray(translate)\n    translate3d = oneNumberToTwoArray(translate3d)\n    scale = oneNumberToTwoArray(scale)\n    scale3d = oneNumberToTwoArray(scale3d)\n    if(typeof rotate === \"number\"){\n      rotate = [undefined, undefined, rotate]\n    }\n    if(typeof rotate3d === \"number\"){\n      rotate3d = [rotate3d]\n    }\n    \n    const translateVars = Array(3).fill(TRANSFORM_UNDEFINED)\n    const scaleVars  = Array(3).fill(TRANSFORM_UNDEFINED)\n    const rotateVars = Array(4).fill(TRANSFORM_UNDEFINED)\n    const perspective = valueProcess(props.perspective, \"px\")\n    const result = []\n    \n    parseTransformMultivalue(translate, multiValueHook(translateVars, \"px\"))\n    parseTransformMultivalue(translate3d, multiValueHook(translateVars, \"px\"))\n    parseTransformMultivalue(scale, multiValueHook(scaleVars, \"%\"))\n    parseTransformMultivalue(scale3d, multiValueHook(scaleVars, \"%\"))\n    parseTransformMultivalue(rotate, multiValueHook(rotateVars, \"deg\"))\n    parseTransformMultivalue(rotate3d, multiValueHook(rotateVars, \"deg\"))\n    parseTransformValue(translateX, singleValueHook(translateVars, \"px\", 0))\n    parseTransformValue(translateY, singleValueHook(translateVars, \"px\", 1))\n    parseTransformValue(scaleX, singleValueHook(scaleVars, \"%\", 0))\n    parseTransformValue(scaleY, singleValueHook(scaleVars, \"%\", 1))\n    parseTransformValue(scaleZ, singleValueHook(scaleVars, \"%\", 2))\n    parseTransformValue(rotateX, singleValueHook(rotateVars, \"deg\", 0))\n    parseTransformValue(rotateY, singleValueHook(rotateVars, \"deg\", 1))\n    parseTransformValue(rotateZ, singleValueHook(rotateVars, \"deg\", 2))\n    \n    perspective && result.push(`perspective(${perspective})`)\n    \n    if(translateVars.some(v=>v !== TRANSFORM_UNDEFINED)){\n      translateVars[2] === TRANSFORM_UNDEFINED \n        ? result.push(`translate(${translateVars[0]},${translateVars[1]})`)\n        : result.push(`translate3d(${translateVars[0]},${translateVars[1]},${translateVars[2]})`)\n    }\n    if(scaleVars.some(v=>v !== TRANSFORM_UNDEFINED)){\n      scaleVars[2] === TRANSFORM_UNDEFINED \n        ? result.push(`scale(${scaleVars[0]},${scaleVars[1]})`)\n        : result.push(`scale3d(${scaleVars[0]},${scaleVars[1]},${scaleVars[2]})`)\n    }\n    if(rotateVars.some(v=>v !== TRANSFORM_UNDEFINED)){\n      if(rotateVars[0] === TRANSFORM_UNDEFINED && rotateVars[1] === TRANSFORM_UNDEFINED && rotateVars[2] !== TRANSFORM_UNDEFINED){\n        return result.push(`rotate(${rotateVars[2]})`)\n      }\n      if(rotateVars[0] !== TRANSFORM_UNDEFINED){\n        result.push(`rotate3d(1,0,0,${rotateVars[0]})`)\n      }\n      if(rotateVars[1] !== TRANSFORM_UNDEFINED){\n        result.push(`rotate3d(0,1,0,${rotateVars[1]})`)\n      }\n      if(rotateVars[2] !== TRANSFORM_UNDEFINED){\n        result.push(`rotate3d(0,0,1,${rotateVars[2]})`)\n      }\n    }\n    \n    return result.join(\" \")\n  }\n}(likeString, isArray))\n","\nexport const svgPathWithVertex = function (vertex, close){\n  let dValue = \"\"\n  \n  vertex.forEach((point, index)=>{\n    const prefix = index === 0 ? 'M' : 'L'\n    dValue += `${prefix}${point.x} ${point.y} `\n  })\n  \n  if(!!dValue && close === true){\n    dValue += \" Z\"\n  }\n  \n  return dValue\n}\n\nconst SVGBuilder = function (){\n  this.drawVariants = []\n}\n\nSVGBuilder.prototype = {\n  addPath (points, attributes){\n    this.drawVariants.push({\n      tag   : \"path\",\n      attributes,\n      params: points\n    })\n    return this\n  },\n  createElement (){\n    const svgTag = document.createElementNS('http://www.w3.org/2000/svg', \"svg\")\n    let realMaxWidth  = 0\n    let realMaxHeigth = 0 \n    \n    this.drawVariants.forEach(({ tag, attributes, params})=>{\n      if(tag === \"path\"){\n        const pathElement = document.createElementNS('http://www.w3.org/2000/svg', \"path\")\n        \n        if(typeof attributes !== \"object\"){\n          attributes = {}\n        }\n        \n        pathElement.setAttribute(\"fill\", attributes['fill'] || \"transparent\")\n        pathElement.setAttribute(\"stroke\", attributes['stroke'] || \"gray\")\n        pathElement.setAttribute(\"stroke-width\", attributes['strokeWidth'] || attributes['stroke-width'] || \"1\")\n        pathElement.setAttribute(\"stroke-linecap\", \"butt\")\n        pathElement.setAttribute(\"stroke-linejoin\", \"miter\")\n        \n        const dValue = svgPathWithVertex(params)\n        params.forEach(point=>{\n          if(point.x > realMaxWidth) realMaxWidth = point.x\n          if(point.y > realMaxHeigth) realMaxHeigth = point.y\n        })\n        \n        pathElement.setAttribute(\"d\", dValue)\n        svgTag.appendChild(pathElement)\n      }\n    })\n    svgTag.setAttribute(\"style\", \"overflow:visible;\")\n    svgTag.setAttribute(\"width\", realMaxWidth)\n    svgTag.setAttribute(\"height\", realMaxHeigth)\n    return svgTag\n  }\n}\n\nexport const makeSVG = function (){\n  return new SVGBuilder()\n}\n","import { isPlainObject } from '../../functions'\n\nconst $ = require('jquery')\n\nconst getCurrentTarget = function (originalEvent, fallbackElement){\n  let result = originalEvent.currentTarget || originalEvent.target\n  return (result && result.documentElement) ? (fallbackElement || result.documentElement) : document.documentElement\n}\n\nconst isElementEvent = $.isElementEvent = function (e){\n  return typeof e.stopPropagation === \"function\"\n}\n\nconst getElementPosition = $.getElementPosition = function (el){\n  let [ element ] = $(el)\n  \n  if(!element) return null\n  \n  let xPosition = 0\n  let yPosition = 0\n  \n  while(element && !element.documentElement){\n    xPosition += (element.offsetLeft - element.scrollLeft + element.clientLeft)\n    yPosition += (element.offsetTop - element.scrollTop + element.clientTop)\n    element = element.offsetParent\n  }\n  \n  return {x: xPosition, y: yPosition}\n}\n\n\nconst getPointerPosition = $.getPointerPosition = function (e, root){\n  root = !root ? document.documentElement : root\n\n  const pos = getElementPosition(root)\n  \n  if(!pos) return\n  \n  pos.x = (e.touches ? e.targetTouches[0].pageX : e.pageX) - pos.x\n  pos.y = (e.touches ? e.targetTouches[0].pageY : e.pageY) - pos.y\n  \n  return pos\n}\n\n$.fn.extend({\n  //파라메터 노드가 제이쿼리가 가진 노드 안에 있는지 확인\n  containsIn (node){\n    var [ target ] = $(node).eq(0)\n    if(target){\n      for(var i = 0, l = this.length; i < l; i++){\n        if(this[i] === target) return true\n        if(this.eq(i).find(target).length) return true\n      } \n    }\n    return false\n  },\n  //파라메터 노드가 제이쿼리가 가진 노드 밖에 있는지 확인\n  containsOut (node){\n    return !this.containsIn(node)\n  },\n  /*\n    //\n    $(window).predict()\n    $(window).predict({center:20});\n    $(window).predict({center:event});\n    \n    //TODO\n    $(window).predict(element)\n    $(window).predict(element, {center:20});\n  */\n  predict (option, root){\n    const [ element ] = this.eq(0)\n    if(!element) return\n    \n    const { offsetTop, offsetLeft, offsetWidth, offsetHeight } = element[\"innerWidth\"] ? {\n      offsetTop   : 0, \n      offsetLeft  : 0, \n      offsetWidth : window.innerWidth, \n      offsetHeight: window.innerHeight\n    } : element\n    \n    const result = {\n      top   : offsetTop,\n      left  : offsetLeft,\n      width : offsetWidth,\n      height: offsetHeight,\n      right : offsetLeft + offsetWidth,\n      bottom: offsetTop + offsetHeight,\n      center: offsetLeft + offsetWidth / 2,\n      middle: offsetTop + offsetHeight / 2\n    }\n    \n    \n    //if(isElementEvent(option)){\n    //  const { x:left, y:top } = getPointerPosition(offset);\n    //  option = { left, top };\n    //}\n      \n    if(isPlainObject(option)){\n      //console.log(\"option,\",option)\n      const allProps = [\"top\", \"left\", \"width\", \"height\", \"right\", \"bottom\", \"center\", \"middle\"].filter(key=>option.hasOwnProperty(key))\n      \n      //event option\n      allProps.forEach((key)=>{\n        const optionOfKey = option[key]\n        if(!isElementEvent(optionOfKey)) return\n        const pointerPosition = getPointerPosition(optionOfKey, root || getCurrentTarget(optionOfKey, element) || element)\n        if(!pointerPosition) return\n        \n        if(/left|width|right|center/.test(key)){\n          option[key] = pointerPosition[\"x\"]\n        }\n        \n        if(/top|middle|bottom|height/.test(key)){\n          option[key] = pointerPosition[\"y\"]\n        }\n      })\n      \n      allProps.forEach((key)=>{\n        if(typeof option[key] !== \"number\") return\n\n        const valueOfKey = result[key]  \n        let equalize\n        \n        switch (key){\n          case \"top\":\n          case \"middle\":\n            equalize = [\"y\", option[key] - valueOfKey]\n            break\n          case \"left\":\n          case \"center\":\n            equalize = [\"x\", option[key] - valueOfKey]\n            break\n          case \"width\":\n            equalize = [\"width\", option[key] - valueOfKey]\n            break\n          case \"height\":\n            equalize = [\"height\", option[key] - valueOfKey]\n            break\n          case \"right\":\n            break\n          case \"bottom\":\n            break\n        }\n          \n        switch (equalize && equalize[0]){\n          case \"x\":\n            result[\"left\"] += equalize[1]\n            result[\"center\"] += equalize[1]\n            result[\"right\"] += equalize[1]\n            break\n          case \"y\":\n            result[\"top\"] += equalize[1]\n            result[\"middle\"] += equalize[1]\n            result[\"bottom\"] += equalize[1]\n            break\n          case \"width\":\n            result[\"width\"] += equalize[1]\n            result[\"right\"] += equalize[1]\n            result[\"center\"] += (result[\"right\"] - result[\"left\"] / 2)\n            break\n          case \"height\":\n            result[\"height\"] += equalize[1]\n            result[\"bottom\"] += equalize[1]\n            result[\"middle\"] += (result[\"bottom\"] - result[\"top\"] / 2)\n            break\n        }\n      })\n    }\n    \n    return result\n  }\n})\n\nexport default $\n","import $ from '../plugins/jquery'\nimport { rebase } from '../../functions'\n\n// eslint-disable-next-line no-undef\nconst DEVICE_EVENT = (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch)\n  ? {\n    TOUCH_DEVICE: true,\n    START       : 'touchstart',\n    MOVE        : 'touchmove',\n    END         : 'touchend'\n  }\n  : {\n    TOUCH_DEVICE: false,\n    START       : 'mousedown',\n    MOVE        : 'mousemove',\n    END         : 'mouseup'\n  }\n\n//\nlet dragRetainCount = 0\n\n//\nconst bindDraggingAttribute = function (){\n  if(dragRetainCount > 0){\n    document.body.setAttribute(\"dragging\", \"\")\n  } else {\n    document.body.removeAttribute(\"dragging\")\n  }\n}\n\n//\nDEVICE_EVENT.TOUCH_DEVICE && window.addEventListener(\"touchmove\", (e)=>{\n  dragRetainCount > 0 && e.preventDefault()\n}, {passive: false})\n\n\n//드래그\nlet touchFixX\nlet touchFixY\nconst pointerParse = ({ clientX, clientY, touches })=>{\n  if(touches){\n    if(!touches[0]){\n      return {\n        x: touchFixX,\n        y: touchFixY\n      }\n    };\n    \n    const { clientX:touchClientX, clientY:touchClientY } = touches[0]\n    touchFixX = touchClientX\n    touchFixY = touchClientY\n    \n    return {\n      x: touchClientX,\n      y: touchClientY\n    }\n  }\n  return {\n    x: clientX,\n    y: clientY\n  }\n}\n\nexport default function DragHelper (element, option){\n  const $element = $(element).eq(0)\n  const [ dragElement ] = $element\n  let startFn\n  let moveFn\n  let endFn\n  \n  let dragParams = null\n  let firstDrag  = null\n  let lastDrag   = null\n  \n  const resetOptions = function (){\n    const getOptions = rebase(typeof option === \"function\" ? option({ element: $element }) : option)\n    startFn = getOptions[\"start\"]\n    moveFn = getOptions[\"move\"]\n    endFn = getOptions[\"end\"]\n  }\n  \n  const getCurrentPointerDrag = function (originalEvent){\n    const pointerDrag = pointerParse(originalEvent)\n  \n    //현재 이동한 거리\n    pointerDrag.moveX = pointerDrag.x - lastDrag.x\n    pointerDrag.moveY = pointerDrag.y - lastDrag.y\n    \n    //처음으로부터 변경된 거리\n    pointerDrag.offsetX = pointerDrag.x - firstDrag.x\n    pointerDrag.offsetY = pointerDrag.y - firstDrag.y\n    \n    //처음으로 부터 변경되어 엘리먼트 오프셋 크기\n    pointerDrag.leftValue = dragParams.offset.left + pointerDrag.offsetX\n    pointerDrag.topValue = dragParams.offset.top + pointerDrag.offsetY\n    \n    pointerDrag.left = pointerDrag.leftValue + \"px\"\n    pointerDrag.top = pointerDrag.topValue + pointerDrag.offsetY + \"px\"\n    \n    return pointerDrag\n  }\n  \n  const dragEnter = function (originalEvent){\n    //init\n    resetOptions()\n    \n    //\n    const elementOffset = $element.predict()\n    const pointerDrag   = pointerParse(originalEvent)\n    \n    firstDrag = pointerDrag\n    lastDrag = pointerDrag\n    \n    dragParams = { offset: elementOffset, pointer: undefined, event: originalEvent }\n    dragParams.pointer = getCurrentPointerDrag(originalEvent)\n    \n    startFn && startFn(dragParams)\n    \n    document.addEventListener(DEVICE_EVENT.MOVE, dragMove)\n    document.addEventListener(DEVICE_EVENT.END, dragExit)\n    \n    dragRetainCount += 1\n    bindDraggingAttribute()\n  }\n  \n  const dragMove = function (originalEvent){\n    const pointerDrag = pointerParse(originalEvent)\n    \n    if(!moveFn){\n      lastDrag = pointerDrag\n      return\n    } else {\n      dragParams.pointer = getCurrentPointerDrag(originalEvent)\n      dragParams.event = originalEvent\n      moveFn(dragParams)\n      lastDrag = pointerDrag\n    }\n  }\n  \n  const dragExit = function (originalEvent){\n    dragParams.pointer = getCurrentPointerDrag(originalEvent)\n    dragParams.event = originalEvent\n    endFn && endFn(dragParams)\n    dragParams = undefined\n    \n    document.removeEventListener(DEVICE_EVENT.MOVE, dragMove)\n    document.removeEventListener(DEVICE_EVENT.END, dragExit)\n    \n    dragRetainCount -= 1\n    bindDraggingAttribute()\n  }\n  \n  dragElement.addEventListener(\"dragstart\", function (e){\n    e.preventDefault()\n  })\n  \n  dragElement.addEventListener(DEVICE_EVENT.START, dragEnter)\n  \n  return $element\n}\n","import { asArray } from '../../functions'\n\nexport default function RepeatHelper ({ key, enter:enterFn, update:updateFn, exit:exitFn }){\n  // {key:string, vm:Component}\n  let oldBag = []\n  \n  // 모델의 키를 얻는 함수\n  const getKey = typeof key === \"function\" ? key : function (datum){\n    return datum[key]\n  }\n  \n  // ng-repeat, v-for와 같은 리피터 구현체 (d3의 data().enter().exit() 컨샙이 비슷함)\n  const repeater = function (data){\n    let newData = asArray(data)\n    let newBag  = []\n    \n    //새 데이터를 검사합니다.\n    newData.forEach((datum, index)=>{\n      //키를 추출합니다.\n      const newDatumKey = getKey(datum) || index\n      \n      //키 샘플입니다.\n      const newMeta = {\n        key  : newDatumKey,\n        datum: datum\n      }\n      \n      //매치되는 오래된 메타를 확인합니다.\n      const matchOldMeta = oldBag.find(old=>old.key === newDatumKey)\n      \n      //오래된 메타가 확인될 시\n      if(matchOldMeta){\n        //exit를 하지 않고 살립니다.\n        newMeta.vm = matchOldMeta.vm\n        matchOldMeta.$continue = true\n      }\n      \n      newBag.push(newMeta)\n    })\n    \n    //exit (require)\n    oldBag.forEach(oldMeta=>{\n      if(!oldMeta.$continue){\n        exitFn(oldMeta)\n      }\n    })\n    \n    //메타에 추가 정보 입력 (prevVm)\n    newBag.forEach((newMeta, index)=>{\n      const prevMeta = newBag[index - 1]\n      if(prevMeta && prevMeta[\"vm\"]){\n        newMeta[\"prevVm\"] = prevMeta[\"vm\"]\n      }\n    })\n    \n    //enter (require)\n    newBag.forEach((newMeta, index)=>{\n      if(!newMeta.vm){\n        let result = enterFn(newMeta, index)\n        if(!result){\n          throw new Error(\"enter는 반드시 vm을 리턴해야합니다.\")\n        } else {\n          newMeta[\"vm\"] = result\n        }\n      }\n    })\n    \n    //update (option)\n    updateFn && newBag.forEach((newMeta, index)=>{\n      updateFn(newMeta, index)\n    })\n    \n    //history change\n    oldBag = newBag\n  }\n  \n  //컴포넌트에서 정렬된 데이터를 얻기위한 용도로 제작. Component에서 (개발 시간상) 한계로 이곳에서 수행\n  repeater[\"vm\"] = function (){\n    return oldBag.map(d=>d.vm)\n  }\n  \n  return repeater\n};\n","import _dragHelper from './dragHelper'\nimport _repeatHelper from './repeatHelper'\n\nexport const dragHelper   = _dragHelper\nexport const repeatHelper = _repeatHelper\n","import * as helpers from './web/index.js'\nconst DEFAULT = { ...helpers }\nexport default DEFAULT\n"],"names":["reservedSessionStorage","pulledWindowToken","pulledWindowSession","openerPresenceProps","windowServiceReserveSession","name","data","listenHandshake","window","windowServiceHandshake","windowServicePullSession","getOpenerPresenceProperties","opener","e","console","warn","saveSessionFn","token","addEventListener","windowProps","WINDOW_POPUP_DEFAULT_WIDTH","WINDOW_POPUP_DEFAULT_HEIGHT","openWindow","href","windowParam","hasParam","windowName","useResize","undefined","destWindowWidth","destWindowHeight","destWindowTop","destWindowLeft","availMaxWidth","screen","availWidth","availMaxHeight","availHeight","navigator","platform","indexOf","newWindow","open","closeWindow","close","openTab","focus","historyBack","catchFallback","history","initialPage","length","location","back","toDataString","tods","JSON","stringify","fromDataString","v","eval","setLocalData","k","localStorage","Object","keys","forEach","setItem","key","getLocalData","arguments","stringData","getItem","isAbsoluteNaN","it","isNone","isNumber","isArray","Array","isObject","likeString","likeArray","item","hasOwnProperty","isPlainObject","constructor","isNode","a","nodeType","asArray","defaultArray","toArray","times","fn","result","i","l","push","turn","limit","ts","resultHook","abs","Math","fixIndex","floor","turnTime","validMatrix","arr","from","some","likeError","asMatrix","columnSize","rowCount","ceil","column","ci","multiplyMatrix","aMatrix","bMatrix","columnLength","rRowIndex","columnResult","multiplied","reduce","dist","num","index","rColumnIndex","MatrixArray","row","datum","defineProperties","enumerable","value","prototype","assign","toMatrix","eachResultHook","colIndex","rowIndex","dataResult","eachColumn","eachFn","rows","columns","colData","map","eachRow","multiply","makeMatrixArray","eachHook","matrixProto","matrixArray","likePoint","p","Point","x","y","z","w","meta","__ref","__meta","__matrix","__computed","matrixVersion","computedVersion","memoizeRef","memoizeOutput","compute","needCompute","newMemoizeRef","newComputedMatrix","dest","matrix","get","set","rx","rangeWidth","range","width","ry","rangeHeight","height","addMatrix","Error","addMeta","obj","clone","call","toJSON","withMeta","json","pull","angle","xHalf","Vertex","vertexWith","destPoint","points","unshift","rectWith","largeX","smallX","largeY","smallY","Rect","pointArray","point","classFunction","methods","start","end","eq","join","joins","refp","newp","splice","order","px","py","pz","pw","sx","sy","sz","sw","ex","ey","ez","ew","transform","rect","useRect","left","top","originX","originY","translate","newValue","oldValue","right","bottom","splitCountParser","split","columnOrder","rowOrder","parseInt","findPoint","findWord","trim","lineFind","pointFind","vertex","inheritMeta","perspective","perspectiveOrigin","middleY","centerX","piecesWithCount","splitCount","pieceWidth","pieceHeight","pacResult","pacMeta","coords","fit","WHRatio","transformRatio","sort","sticky","position","refX","refY","refWidth","refHeight","valid","getNode","el","select","isElement","Element","getElementOffsetRect","offsetLeft","offsetTop","offsetWidth","offsetHeight","offsetParent","html","body","test","getComputedStyle","getPropertyValue","getBoundingRect","doc","document","win","offsetX","pageXOffset","documentElement","parentNode","scrollLeft","offsetY","pageYOffset","scrollTop","boundingRect","getBoundingClientRect","parent","getElementBoundingRect","elRect","current","windowRect","screenLeft","screenX","screenTop","screenY","outerWidth","outerHeight","screenRect","rebase","ref","refValue","d","refKey","deepKey","readUrl","inputUrl","info","url","URL","toString","exec","error","protocol","divider","userinfo","hostname","port","substring","path","query","fragment","filename","host","params","substr","onePiece","entry","decodeURI","serialize","invalid","stringValue","each","val","getElementTransformMatrix","computedStyle","computedMatrixParam","webkitTransform","MozTransform","msTransform","c","slice","parseMatrix","DEFAULT_MATRIX","m11","m21","m31","m41","m12","m22","m32","m42","m13","m23","m33","m43","m14","m24","m34","m44","matrixParam","getElementTransform","rotateY","asin","rotateX","atan2","rotateZ","rotate","transformStyle","transformVariant","TRANSFORM_UNDEFINED","parseTransformValue","matched","parseTransformMultivalue","valueProcess","unit","singleValueHook","bag","parseValue","multiValueHook","multiValue","oneNumberToTwoArray","one","props","translateX","translateY","scaleX","scaleY","scaleZ","translate3d","scale","scale3d","rotate3d","translateVars","fill","scaleVars","rotateVars","svgPathWithVertex","dValue","prefix","SVGBuilder","drawVariants","addPath","attributes","tag","createElement","svgTag","createElementNS","realMaxWidth","realMaxHeigth","pathElement","setAttribute","appendChild","makeSVG","$","require","getCurrentTarget","originalEvent","fallbackElement","currentTarget","target","isElementEvent","stopPropagation","getElementPosition","element","xPosition","yPosition","clientLeft","clientTop","getPointerPosition","root","pos","touches","targetTouches","pageX","pageY","extend","containsIn","node","find","containsOut","predict","option","innerWidth","innerHeight","center","middle","allProps","filter","optionOfKey","pointerPosition","valueOfKey","equalize","DEVICE_EVENT","DocumentTouch","TOUCH_DEVICE","START","MOVE","END","dragRetainCount","bindDraggingAttribute","removeAttribute","preventDefault","passive","touchFixX","touchFixY","pointerParse","clientX","clientY","touchClientX","touchClientY","DragHelper","$element","dragElement","startFn","moveFn","endFn","dragParams","firstDrag","lastDrag","resetOptions","getOptions","getCurrentPointerDrag","pointerDrag","moveX","moveY","leftValue","offset","topValue","dragEnter","elementOffset","pointer","event","dragMove","dragExit","removeEventListener","RepeatHelper","enterFn","enter","updateFn","update","exitFn","exit","oldBag","getKey","repeater","newData","newBag","newDatumKey","newMeta","matchOldMeta","old","vm","$continue","oldMeta","prevMeta","dragHelper","_dragHelper","repeatHelper","_repeatHelper","DEFAULT","helpers"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aAAsE,YAAW;EAC/E;EACA,MAAMA,yBAAyB,EAA/B,CAF+E;;EAK/E,MAAIC,iBAAJ;EACA,MAAIC,mBAAJ;EACA,MAAIC,mBAAJ,CAP+E;;EAU/E,MAAMC,8BAA8B,SAA9BA,2BAA8B,CAAUC,IAAV,EAAgBC,IAAhB,EAAsBC,eAAtB,EAAsC;EACxE,QAAGA,oBAAoB,IAAvB,EAA4B;EAC1BC,aAAOC,sBAAP,GAAgC,YAAW;EACzC,eAAOD,OAAOC,sBAAd;EACA,eAAOJ,IAAP;EACD,OAHD;EAID;;EACDL,2BAAuBK,IAAvB,IAA+BC,IAA/B;EACA,WAAON,uBAAuBK,IAAvB,CAAP;EACD,GATD,CAV+E;;;EAsB/E,MAAMK,2BAA2B,SAA3BA,wBAA2B,CAAUL,IAAV,EAAe;EAC9C;EACA,QAAIC,OAAON,uBAAuBK,IAAvB,CAAX;EACA,WAAOL,uBAAuBK,IAAvB,CAAP;EACA,WAAOC,IAAP;EACD,GALD,CAtB+E;;;EA8B/E,MAAMK,8BAA8B,SAA9BA,2BAA8B,GAAW;EAC7C,QAAG,OAAOR,mBAAP,KAA+B,UAAlC,EAA6C;EAC3C,aAAOA,qBAAP;EACD;;EACD,WAAOA,mBAAP;EACD,GALD;;EAOAK,SAAOJ,2BAAP,GAAqCA,2BAArC;EACAI,SAAOE,wBAAP,GAAkCA,wBAAlC;;EAEA,MAAI;EACF,QAAGF,OAAOI,MAAP,IAAiBJ,OAAOI,MAAP,CAAcH,sBAAlC,EAAyD;EACvDR,0BAAoBO,OAAOI,MAAP,CAAcH,sBAAd,EAApB;EACD;EACF,GAJD,CAIE,OAAOI,CAAP,EAAS;EACTC,YAAQC,IAAR,CAAa,4CAAb;EACD;;EAED,MAAGd,qBAAqBO,OAAOI,MAA5B,IAAsCJ,OAAOI,MAAP,CAAcF,wBAAvD,EAAgF;EAC9ER,0BAAsBM,OAAOI,MAAP,CAAcF,wBAAd,CAAuCT,iBAAvC,CAAtB;EACAE,0BAAsBD,mBAAtB,CAF8E;;EAK9E,QAAIc,gBAAgB,SAAhBA,aAAgB,GAAW;EAC7B,UAAI;EACFR,eAAOI,MAAP,IACAJ,OAAOI,MAAP,CAAcR,2BADd,IAEAI,OAAOI,MAAP,CAAcR,2BAAd,CAA0CF,oBAAoBe,KAA9D,EAAqEf,mBAArE,EAA0F,IAA1F,CAFA;EAGD,OAJD,CAIE,OAAOW,CAAP,EAAS;EACTC,gBAAQC,IAAR,CAAa,0BAAb,EAAyCF,CAAzC;EACD;EACF,KARD;;EAUAL,WAAOU,gBAAP,CAAwB,cAAxB,EAAwCF,aAAxC;EACD;;EAED,SAAO;EAAEZ,4DAAF;EAA+BO;EAA/B,GAAP;EACD,CAnEqE;MAA9DP,mCAAAA;MAA6BO,mCAAAA;;AAqErC,EAAO,IAAMQ,cAAcR,2BAApB;EAEP,IAAMS,6BAA6B,IAAnC;EACA,IAAMC,8BAA8B,GAApC;AAEA,EAAO,IAAMC,aAAa,SAAbA,UAAa,CAAUC,IAAV,EAAgBC,WAAhB,EAA4B;EACpD,MAAMC,WAAc,OAAOD,WAAP,KAAuB,QAA3C;EACA,MAAME,aAAcD,YAAYD,YAAY,MAAZ,CAAZ,IAAmC,QAAvD;EACA,MAAMG,YAAc,CAACF,YAAYD,YAAY,QAAZ,IAAwB,EAArC,MAA6C,OAAjE;EACA,MAAML,cAAcM,WAAWD,YAAY,OAAZ,CAAX,GAAkCI,SAAtD;EAEA,MAAIC,kBAAoBJ,YAAYD,YAAY,OAAZ,CAAZ,IAAoCJ,0BAA5D;EACA,MAAIU,mBAAoBL,YAAYD,YAAY,QAAZ,CAAZ,IAAqCH,2BAA7D;EACA,MAAIU,gBAAoBN,YAAYD,YAAY,KAAZ,CAAZ,IAAkCA,YAAY,GAAZ,CAAlC,IAAsD,CAA9E;EACA,MAAIQ,iBAAoBP,YAAYD,YAAY,MAAZ,CAAZ,IAAmCA,YAAY,GAAZ,CAAnC,IAAuD,CAA/E;EAEA,MAAMS,gBAAgBC,OAAOC,UAA7B;EACA,MAAIC,iBAAiBF,OAAOG,WAA5B,CAZoD;;EAepD,MAAGC,UAAUC,QAAV,CAAmBC,OAAnB,CAA2B,KAA3B,MAAsC,CAAzC,EAA2C;EACzCJ,sBAAkB,EAAlB;EACD;;EAED,MAAGP,kBAAkBI,aAArB,EAAoCJ,kBAAkBI,aAAlB;EACpC,MAAGH,mBAAmBM,cAAtB,EAAsCN,mBAAmBM,cAAnB;EAEtChC,8BAA4BsB,UAA5B,EAAwCP,WAAxC,EAAqD,IAArD;EAEA,MAAMsB,YAAYjC,OAAOkC,IAAP,CAChBnB,IADgB,EAEhBG,UAFgB,WAGTK,aAHS,cAGaC,cAHb,eAGqCH,eAHrC,gBAG+DC,gBAH/D,IAGkFH,YAAY,cAAZ,GAA6B,cAH/G,+BAAlB;EAMA,SAAOc,SAAP;EACD,CA/BM;AAiCP,EAAO,IAAME,cAAc,SAAdA,WAAc,GAAW;EACpCnC,SAAOoC,KAAP;EACD,CAFM;AAIP,EAAO,IAAMC,UAAU,SAAVA,OAAU,CAAUtB,IAAV,EAAe;EACpC,MAAMkB,YAAYjC,OAAOkC,IAAP,CAAYnB,IAAZ,EAAkB,QAAlB,CAAlB;EACAkB,YAAUK,KAAV;EACA,SAAOL,SAAP;EACD,CAJM;AAMP,EAAO,IAAMM,cAAc,SAAdA,WAAc,QAA4B;EAAA,MAAhBC,aAAgB,SAAhBA,aAAgB;;EACrD,MAAI;EACF,QAAMC,UAAUzC,OAAOyC,OAAvB;EACA,QAAMC,cAAcD,QAAQE,MAAR,GAAiB,CAArC;;EAEA,QAAGD,eAAeF,aAAlB,EAAgC;EAC9B,UAAG,OAAOA,aAAP,KAAyB,QAA5B,EAAqC;EACnCI,iBAAS7B,IAAT,GAAgByB,aAAhB;EACD;;EACD,UAAG,OAAOA,aAAP,KAAyB,UAA5B,EAAuC;EACrC,eAAOA,eAAP;EACD;EACF,KAPD,MAOO;EACLC,cAAQI,IAAR;EACD;EACF,GAdD,CAcE,OAAOxC,CAAP,EAAS;EACT,WAAO,IAAP;EACD;EACF,CAlBM;;ECrHP,IAAMyC,eAAe,SAAfA,YAAe,CAAUC,IAAV,EAAe;EAClC,UAAQ,OAAOA,IAAf;EACE,SAAK,QAAL;EACE,oBAAWA,IAAX;;EACF,SAAK,QAAL;EACE,aAAOC,KAAKC,SAAL,CAAeF,IAAf,CAAP;;EACF,SAAK,SAAL;EAAgB,SAAK,WAAL;EAAkB,SAAK,QAAL;EAClC;EACE,kBAAUA,IAAV;EAPJ;EASD,CAVD;;EAYA,IAAMG,iBAAiB,SAAjBA,cAAiB,CAAUC,CAAV,EAAY;EACjC;EACA,SAAOC,KAAK,MAAMD,CAAN,GAAU,GAAf,CAAP;EACD,CAHD;;;AAMA,EAAO,IAAME,eAAe,SAAfA,YAAe,CAAUC,CAAV,EAAaH,CAAb,EAAe;EACzC,MAAMI,eAAevD,OAAOuD,YAA5B;;EACA,MAAG,OAAOD,CAAP,KAAa,QAAhB,EAAyB;EACvBE,WAAOC,IAAP,CAAYH,CAAZ,EAAeI,OAAf,CAAuB,eAAK;EAC1BH,mBAAaI,OAAb,CAAqBC,GAArB,EAA0Bd,aAAaQ,EAAEM,GAAF,CAAb,CAA1B;EACD,KAFD;EAGD,GAJD,MAIO;EACLL,iBAAaI,OAAb,CAAqBL,CAArB,EAAwBR,aAAaK,CAAb,CAAxB;EACD;;EACD,SAAO,IAAP;EACD,CAVM;;AAaP,EAAO,IAAMU,eAAe,SAAfA,YAAe,CAAUP,CAAV,EAAY;EACtC,MAAMC,eAAevD,OAAOuD,YAA5B;EACA,MAAG,CAACO,UAAUnB,MAAd,EAAsB,OAAOY,YAAP;EACtB,MAAIQ,aAAaR,aAAaS,OAAb,CAAqBV,CAArB,CAAjB;EACA,SAAQS,cAAc,IAAf,GAAuB3C,SAAvB,GAAmC8B,eAAea,UAAf,CAA1C;EACD,CALM;;EC/BA,IAAME,gBAAgB,SAAhBA,aAAgB,CAAUC,EAAV,EAAa;EACxC;EACA,SAAOA,OAAOA,EAAP,IAAa,OAAOA,EAAP,KAAc,QAAlC;EACD,CAHM;AAKP,EAAO,IAAMC,SAAS,SAATA,MAAS,CAAUrE,IAAV,EAAe;EACnC,SAAOmE,cAAcnE,IAAd,KAAuBA,SAASsB,SAAhC,IAA6CtB,SAAS,IAA7D;EACD,CAFM;AAIP,EAAO,IAAMsE,WAAW,SAAXA,QAAW,CAAUF,EAAV,EAAa;EACnC,SAAQ,OAAOA,EAAP,KAAc,QAAd,IAA0B,CAACD,cAAcC,EAAd,CAAnC;EACD,CAFM;AAIP,EAmBO,IAAMG,UAAU,SAAVA,OAAU,CAAUvE,IAAV,EAAe;EACpC,SAAOwE,MAAMD,OAAN,CAAcvE,IAAd,KAAuBA,gBAAgBwE,KAA9C;EACD,CAFM;AAIP,EAAO,IAAMC,WAAa,SAAbA,QAAa;EAAA,SAAI,CAAC,EAAGL,OAAO,IAAP,IAAe,OAAOA,EAAP,KAAc,QAAhC,CAAL;EAAA,CAAnB;AACP,EAOO,IAAMM,aAAa,SAAbA,UAAa,CAAU1E,IAAV,EAAe;EACvC,MAAG,OAAOA,IAAP,KAAgB,QAAnB,EAA6B,OAAO,IAAP;EAC7B,MAAGsE,SAAStE,IAAT,CAAH,EAAmB,OAAO,IAAP;EACnB,SAAO,KAAP;EACD,CAJM;AAMP,EAMO,IAAM2E,YAAY,SAAZA,SAAY,CAAUC,IAAV,EAAe;EACtC,SACEJ,MAAMD,OAAN,CAAcK,IAAd,KAEEA,SAAS,IAAT,IACA,OAAOA,IAAP,KAAgB,QADhB,IAEAA,KAAKC,cAAL,CAAoB,QAApB,CAFA,IAGA,OAAOD,KAAK/B,MAAZ,KAAuB,QAHvB,IAIA+B,KAAK/B,MAAL,GAAc,CAPlB;EAUD,CAXM;AAaP,EAAO,IAAMiC,gBAAgB,SAAhBA,aAAgB;EAAA,SAAM,OAAO9E,IAAP,KAAgB,QAAhB,IAA4BA,KAAK+E,WAAL,KAAqBrB,MAAvD;EAAA,CAAtB;AAEP,EAEO,IAAMsB,SAAS,SAATA,MAAS,CAACC,CAAD;EAAA,SAAKR,SAASQ,CAAT,KAAe,OAAOA,EAAEC,QAAT,KAAsB,QAA1C;EAAA,CAAf;;ECjEA,IAAMC,UAAU,SAAVA,OAAU,CAAUnF,IAAV,EAAgBoF,YAAhB,EAAyC;EAAA,MAAzBA,YAAyB;EAAzBA,gBAAyB,GAAV9D,SAAU;EAAA;;EAC9D,MAAGiD,QAAQvE,IAAR,CAAH,EAAiB;EACf,WAAOA,IAAP;EACD;;EACD,MAAGqE,OAAOrE,IAAP,CAAH,EAAgB;EACd,WAAOuE,QAAQa,YAAR,IAAwBA,YAAxB,GACHf,OAAOe,YAAP,IAAuB,EAAvB,GAA4B,CAACA,YAAD,CADhC;EAED;;EACD,MAAG,OAAOpF,IAAP,KAAgB,QAAhB,IAA4B,OAAOA,KAAKqF,OAAZ,KAAwB,UAAvD,EAAkE;EAChE,WAAOrF,KAAKqF,OAAL,EAAP;EACD;;EACD,SAAO,CAACrF,IAAD,CAAP;EACD,CAZM;AAcP;EAqJA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECnJO,IAAMsF,QAAQ,SAARA,KAAQ,CAAUzC,MAAV,EAAkB0C,EAAlB,EAAqB;EACxC,MAAMC,SAAS,EAAf;;EACA,OAAI,IAAIC,IAAI,CAAR,EAAWC,IAAI7C,MAAnB,EAA2B4C,IAAIC,CAA/B,EAAkCD,GAAlC,EAAsC;EACpCD,WAAOG,IAAP,CAAYJ,GAAGE,CAAH,CAAZ;EACD;;EACD,SAAOD,MAAP;EACD,CANM;;ECkEA,IAAMI,OAAO,SAAPA,IAAO,CAAUH,CAAV,EAAaI,KAAb,EAAoBC,EAApB,EAAwBC,UAAxB,EAAmC;EACrD,MAAGN,IAAI,CAAP,EAAS;EACP,QAAIO,MAAMC,KAAKD,GAAL,CAASP,IAAIK,EAAb,CAAV;EACAL,QAAII,SAASG,MAAMH,KAAN,GAAcG,MAAMH,KAApB,GAA4BG,GAArC,CAAJ;EACD;;EACDF,OAAK,OAAOA,EAAP,KAAc,QAAd,GAAyBA,EAAzB,GAA8B,CAAnC;EACA,MAAMI,WAAWD,KAAKE,KAAL,CAAWV,IAAIK,EAAf,CAAjB;EACA,MAAMN,SAAUK,QAAQK,QAAT,GAAqBA,QAArB,GAAgCA,WAAWL,KAA1D;EACA,SAAO,OAAOE,UAAP,KAAsB,UAAtB,GAAmCA,WAAWP,MAAX,EAAmBC,CAAnB,EAAsBI,KAAtB,EAA6BC,EAA7B,CAAnC,GAAsEN,MAA7E;EACD,CATM;AAWP,EAAO,IAAMY,WAAW,SAAXA,QAAW,CAAUX,CAAV,EAAaI,KAAb,EAAoBC,EAApB,EAAuB;EAC7C,SAAOF,KAAKH,CAAL,EAAQI,KAAR,EAAeC,EAAf,EAAmB,UAACN,MAAD,EAASC,CAAT,EAAYI,KAAZ,EAAmBC,EAAnB;EAAA,WAAwB,CAACN,MAAD,EAASS,KAAKE,KAAL,CAAWV,KAAKI,QAAQC,EAAb,CAAX,CAAT,CAAxB;EAAA,GAAnB,CAAP;EACD,CAFM;;ECuDA,IAAMO,cAAc,SAAdA,WAAc,CAAUC,GAAV,EAAc;EACvC;EACA,MAAG,CAAC3B,UAAU2B,GAAV,CAAJ,EAAmB;EACjB,WAAO,KAAP;EACD,GAJsC;;;EAOvC,MAAGA,IAAIzD,MAAJ,KAAe,CAAlB,EAAoB;EAClB,WAAO,IAAP;EACD,GATsC;;;EAYvC,SAAO,CAAC2B,MAAM+B,IAAN,CAAWD,GAAX,EAAgBE,IAAhB,CAAqB,UAACnD,CAAD,EAAK;EAChC,QAAGsB,UAAUtB,CAAV,CAAH,EAAgB;EACd;EACA,UAAGA,EAAER,MAAF,KAAayD,IAAIzD,MAApB,EAA4B,OAAO,IAAP,CAFd;;EAId,aAAOQ,EAAEmD,IAAF,CAAO;EAAA,eAAW,EAAEC,aAAanF,SAAb,IAA0BgD,SAASmC,SAAT,CAA5B,CAAX;EAAA,OAAP,CAAP;EACD;;EACD,WAAO,IAAP;EACD,GARO,CAAR;EASD,CArBM;;AAwBP,EAAO,IAAMC,WAAW,SAAXA,QAAW,CAAUJ,GAAV,EAAeK,UAAf,EAA0B;EAChD,MAAMnB,SAAS,EAAf;;EACA,MAAG,OAAOmB,UAAP,KAAsB,QAAtB,IAAkCA,aAAa,CAAlD,EAAoD;EAClD,QAAMC,WAAWX,KAAKY,IAAL,CAAUP,IAAIzD,MAAJ,GAAa8D,UAAvB,CAAjB;EACArB,UAAMsB,QAAN,EAAgB,aAAG;EACjB,UAAME,SAAS,EAAf;EACAxB,YAAMqB,UAAN,EAAkB,cAAI;EAAEG,eAAOnB,IAAP,CAAYW,IAAIb,IAAIkB,UAAJ,GAAiBI,EAArB,CAAZ;EAAuC,OAA/D;EACAvB,aAAOG,IAAP,CAAYmB,MAAZ;EACD,KAJD;EAKD,GAPD,MAOO;EACL,WAAO,CAACR,GAAD,CAAP;EACD;;EACD,SAAOd,MAAP;EACD,CAbM;AAeP,EAAO,IAAMwB,iBAAiB,SAAjBA,cAAiB,CAAUC,OAAV,EAAmBC,OAAnB,EAA2B;EACvD,MAAG,CAACb,YAAYY,OAAZ,CAAD,IAAyBZ,YAAYa,OAAZ,CAA5B,EAAiD;EAC/C,WAAO,IAAP;EACD;;EACD,MAAGD,QAAQ,CAAR,EAAWpE,MAAX,KAAsBqE,QAAQrE,MAAjC,EAAwC;EACtC,WAAO,IAAP;EACD;;EACD,MAAM2C,SAAS,EAAf;EACAF,QAAM4B,QAAQrE,MAAd,EAAsB,qBAAW;EAC/B,QAAMsE,eAAeD,QAAQE,SAAR,EAAmBvE,MAAxC;EACA,QAAMwE,eAAe,EAArB;EACA/B,UAAM6B,YAAN,EAAoB,wBAAc;EAChC;EACA,UAAMG,aAAaL,QAAQG,SAAR,EAAmBG,MAAnB,CAA0B,UAACC,IAAD,EAAOC,GAAP,EAAYC,KAAZ,EAAoB;EAC/D;EACA,eAAOD,MAAMP,QAAQQ,KAAR,EAAeC,YAAf,CAAN,GAAqCH,IAA5C;EACD,OAHkB,EAGhB,CAHgB,CAAnB,CAFgC;;EAOhCH,mBAAa1B,IAAb,CAAkB2B,UAAlB;EACD,KARD;EASA9B,WAAOG,IAAP,CAAY0B,YAAZ;EACD,GAbD;EAcA,SAAO7B,MAAP;EACD,CAvBM;;EC/LA,IAAMoC,cAAe,YAAW;EACrC,MAAMA,cAAc,SAAdA,WAAc,CAAU5H,IAAV,EAAgB8G,MAAhB,EAAwBe,GAAxB,EAA4B;EAAA;;EAC9C1C,YAAQnF,IAAR,EAAc4D,OAAd,CAAsB,iBAAO;EAAE,YAAK+B,IAAL,CAAUmC,KAAV;EAAkB,KAAjD;EAEApE,WAAOqE,gBAAP,CAAwB,IAAxB,EAA8B;EAC5BjB,cAAQ;EACNkB,oBAAY,KADN;EAENC,eAAYnB;EAFN,OADoB;EAK5Be,WAAK;EACHG,oBAAY,KADT;EAEHC,eAAYJ;EAFT,OALuB;EAS5BhF,cAAQ;EACNmF,oBAAY;EADN;EAToB,KAA9B;EAaD,GAhBD;;EAkBAJ,cAAYM,SAAZ,GAAwBxE,OAAOyE,MAAP,CAAc,EAAd,EAAkB;EACxCC,YADwC,oBAC9BC,cAD8B,EACf;EAAA;;EACvB,UAAM7C,SAAS,EAAf;EACA6C,uBAAiB,OAAOA,cAAP,KAA0B,UAA1B,GAAuCA,cAAvC,GAAwD/G,SAAzE;EAEAgE,YAAM,KAAKwB,MAAL,GAAc,KAAKe,GAAzB,EAA8B,UAACH,KAAD,EAAS;EAAA,wBACNtB,SAASsB,KAAT,EAAgB,OAAKZ,MAArB,CADM;EAAA,YAC7BwB,QAD6B;EAAA,YACnBC,QADmB;;EAErC,YAAMvI,OAAa,OAAK0H,KAAL,CAAnB;EACA,YAAMc,aAAaH,iBAAiBA,eAAerI,IAAf,EAAqB0H,KAArB,EAA4BY,QAA5B,EAAsCC,QAAtC,CAAjB,GAAmEvI,IAAtF;EACA,YAAG,CAACwF,OAAO+C,QAAP,CAAJ,EAAsB/C,OAAO+C,QAAP,IAAmB,EAAnB;EACtB/C,eAAO+C,QAAP,EAAiB5C,IAAjB,CAAsB6C,UAAtB;EACD,OAND;EAQA,aAAOhD,MAAP;EACD,KAduC;EAexCH,WAfwC,wBAe9B;EACR,aAAOb,MAAM+B,IAAN,CAAW,IAAX,CAAP;EACD,KAjBuC;EAkBxCkC,cAlBwC,sBAkB5BC,MAlB4B,EAkBrB;EACjB,UAAMC,OAAO,KAAKP,QAAL,EAAb;EACA,UAAMQ,UAAUtD,MAAM,KAAKwB,MAAX,EAAmB,oBAAU;EAC3C,YAAM+B,UAAU,EAAhB;EACAF,aAAK/E,OAAL,CAAa;EAAA,iBAAKiF,QAAQlD,IAAR,CAAakC,IAAIS,QAAJ,CAAb,CAAL;EAAA,SAAb;EACA,eAAOO,OAAP;EACD,OAJe,CAAhB;EAMA,aAAO,OAAOH,MAAP,KAAkB,UAAlB,GAA+BE,QAAQE,GAAR,CAAYJ,MAAZ,CAA/B,GAAqDE,OAA5D;EACD,KA3BuC;EA4BxCG,WA5BwC,mBA4B/BL,MA5B+B,EA4BxB;EACd,UAAMC,OAAO,KAAKP,QAAL,EAAb;EACA,aAAO,OAAOM,MAAP,KAAkB,UAAlB,GAA+BC,KAAKG,GAAL,CAASJ,MAAT,CAA/B,GAAkDC,IAAzD;EACD,KA/BuC;EAgCxCK,YAhCwC,sBAgC7B;EAEV;EAlCuC,GAAlB,CAAxB;EAqCA,SAAOpB,WAAP;EACD,CAzD0B,EAApB;AA2DP,EAAO,IAAMqB,kBAAkB,SAAlBA,eAAkB,CAAUnC,MAAV,EAAkBe,GAAlB,EAAuBqB,QAAvB,EAAgC;EAC7D,MAAMC,cAAc7D,MAAMwB,SAASe,GAAf,EAAoB,UAACH,KAAD,EAAS;EAAA,qBAChBtB,SAASsB,KAAT,EAAgBZ,MAAhB,CADgB;EAAA,QACvCwB,QADuC;EAAA,QAC7BC,QAD6B;;EAE/C,WAAOW,SAASxB,KAAT,EAAgBY,QAAhB,EAA0BC,QAA1B,KAAuC,CAACD,QAAD,EAAWC,QAAX,CAA9C;EACD,GAHmB,CAApB;EAKA,MAAMa,cAAc,IAAIxB,WAAJ,CAAgBuB,WAAhB,EAA6BrC,MAA7B,EAAqCe,GAArC,CAApB;EACA,SAAOuB,WAAP;EACD,CARM;;ECzDP,IAAMC,YAAY,SAAZA,SAAY,CAAUC,CAAV,EAAY;EAC5B,SAAO,OAAOA,CAAP,KAAa,QAAb,IAAyBA,EAAEzE,cAAF,CAAiB,GAAjB,CAAzB,IAAkDyE,EAAEzE,cAAF,CAAiB,GAAjB,CAAzD;EACD,CAFD;;EAKA,IAAM0E,QAAQ,SAARA,KAAQ,CAAUC,CAAV,EAAiBC,CAAjB,EAAwBC,CAAxB,EAA+BC,CAA/B,EAAsCC,IAAtC,EAA2C;EAAA;;EAAA,MAAjCJ,CAAiC;EAAjCA,KAAiC,GAA7B,CAA6B;EAAA;;EAAA,MAA1BC,CAA0B;EAA1BA,KAA0B,GAAtB,CAAsB;EAAA;;EAAA,MAAnBC,CAAmB;EAAnBA,KAAmB,GAAf,CAAe;EAAA;;EAAA,MAAZC,CAAY;EAAZA,KAAY,GAAR,CAAQ;EAAA;;EACvD;EACA,MAAME,QAAQ;EAAEL,QAAF;EAAKC,QAAL;EAAQC,QAAR;EAAWC;EAAX,GAAd;;EACA,MAAIG,MAAJ,CAHuD;;;EAMvD,MAAMC,WAAa,EAAnB;EACA,MAAMC,aAAa;EACjBC,mBAAiB,CADA;EAEjBC,qBAAiB,CAFA;EAGjBC,gBAAiB,IAHA;EAIjBC,mBAAiB;EAJA,GAAnB;;EAOA,MAAMC,UAAU,SAAVA,OAAU,CAACvG,GAAD,EAAO;EAAA,QACbmG,aADa,GACsBD,UADtB,CACbC,aADa;EAAA,QACEC,eADF,GACsBF,UADtB,CACEE,eADF;EAGrB;;EAEA,QAAII,cAAc,CAACN,WAAWG,UAAZ,IAA0BF,kBAAkBC,eAA5C,IAA+D,EAC/EF,WAAWG,UAAX,CAAsBX,CAAtB,KAA4BK,MAAML,CAAlC,IACAQ,WAAWG,UAAX,CAAsBV,CAAtB,KAA4BI,MAAMJ,CADlC,IAEAO,WAAWG,UAAX,CAAsBT,CAAtB,KAA4BG,MAAMH,CAFlC,IAGAM,WAAWG,UAAX,CAAsBR,CAAtB,KAA4BE,MAAMF,CAJ6C,CAAjF;;EAOA,QAAGW,WAAH,EAAe;EACb,UAAMC,gBAAgB;EACpBf,WAAGK,MAAML,CADW;EAEpBC,WAAGI,MAAMJ,CAFW;EAGpBC,WAAGG,MAAMH,CAHW;EAIpBC,WAAGE,MAAMF;EAJW,OAAtB;;EAMA,UAAMa,oBAAoBT,SAASxC,MAAT,CACxB,UAACkD,IAAD,EAAOC,MAAP;EAAA,eAAgB1D,eAAe0D,MAAf,EAAuBD,IAAvB,CAAhB;EAAA,OADwB,EAExB/D,SAAS,CAAC6D,cAAcf,CAAf,EAAkBe,cAAcd,CAAhC,EAAmCc,cAAcb,CAAjD,EAAoDa,cAAcZ,CAAlE,CAAT,EAA+E,CAA/E,CAFwB,CAA1B,CAPa;;;EAYbK,iBAAWI,aAAX,GAA2B;EACzBZ,WAAGgB,kBAAkB,CAAlB,EAAqB,CAArB,CADsB;EAEzBf,WAAGe,kBAAkB,CAAlB,EAAqB,CAArB,CAFsB;EAGzBd,WAAGc,kBAAkB,CAAlB,EAAqB,CAArB,CAHsB;EAIzBb,WAAGa,kBAAkB,CAAlB,EAAqB,CAArB;EAJsB,OAA3B;EAMAR,iBAAWG,UAAX,GAAwBI,aAAxB;EACAP,iBAAWE,eAAX,GAA6BD,aAA7B;EACD,KAhCoB;EAkCrB;EACA;;;EACA,WAAOnG,OAAOkG,WAAWI,aAAX,CAAyBtG,GAAzB,CAAP,IAAwCkG,WAAWI,aAA1D;EACD,GArCD;;EAuCA1G,SAAOqE,gBAAP,CAAwB,IAAxB,EAA8B;EAC5ByB,OAAM;EAAExB,kBAAY,IAAd;EAAoB2C,WAAK;EAAA,eAAKZ,SAASlH,MAAT,IAAmBwH,QAAQ,GAAR,CAAnB,IAAmCR,MAAML,CAA9C;EAAA,OAAzB;EAA2EoB,WAAK;EAAA,eAAGf,MAAML,CAAN,GAAUnG,CAAb;EAAA;EAAhF,KADsB;EAE5BoG,OAAM;EAAEzB,kBAAY,IAAd;EAAoB2C,WAAK;EAAA,eAAKZ,SAASlH,MAAT,IAAmBwH,QAAQ,GAAR,CAAnB,IAAmCR,MAAMJ,CAA9C;EAAA,OAAzB;EAA2EmB,WAAK;EAAA,eAAGf,MAAMJ,CAAN,GAAUpG,CAAb;EAAA;EAAhF,KAFsB;EAG5BqG,OAAM;EAAE1B,kBAAY,IAAd;EAAoB2C,WAAK;EAAA,eAAKZ,SAASlH,MAAT,IAAmBwH,QAAQ,GAAR,CAAnB,IAAmCR,MAAMH,CAA9C;EAAA,OAAzB;EAA2EkB,WAAK;EAAA,eAAGf,MAAMH,CAAN,GAAUrG,CAAb;EAAA;EAAhF,KAHsB;EAI5BsG,OAAM;EAAE3B,kBAAY,IAAd;EAAoB2C,WAAK;EAAA,eAAKZ,SAASlH,MAAT,IAAmBwH,QAAQ,GAAR,CAAnB,IAAmCR,MAAMF,CAA9C;EAAA,OAAzB;EAA2EiB,WAAK;EAAA,eAAGf,MAAMF,CAAN,GAAUtG,CAAb;EAAA;EAAhF,KAJsB;EAK5BuG,UAAM;EACJ5B,kBAAY,KADR;EAEJ2C,SAFI,iBAEE;EAAE,eAAOb,MAAP;EAAe,OAFnB;EAGJc,SAHI,eAGCxG,EAHD,EAGI;EAAE0F,iBAAS,OAAO1F,EAAP,KAAc,QAAd,GAAyBA,EAAzB,GAA8B,IAAvC;EAA6C,eAAO0F,MAAP;EAAe;EAHlE,KALsB;EAU5Be,QAAI;EAAE7C,kBAAY,KAAd;EACF2C,WAAY,eAAI;EACd,YAAMG,aAAc,MAAKlB,IAAL,IAAa,MAAKA,IAAL,CAAUmB,KAAvB,IAAgC,MAAKnB,IAAL,CAAUmB,KAAV,CAAgBC,KAAjD,IAA2D,CAA9E;EACA,eAAO,MAAKxB,CAAL,GAASsB,UAAhB;EACD;EAJC,KAVwB;EAgB5BG,QAAI;EACFjD,kBAAY,KADV;EAEF2C,WAAY,eAAI;EACd,YAAMO,cAAe,MAAKtB,IAAL,IAAa,MAAKA,IAAL,CAAUmB,KAAvB,IAAgC,MAAKnB,IAAL,CAAUmB,KAAV,CAAgBI,MAAjD,IAA4D,CAAhF;EACA,eAAO,MAAK1B,CAAL,GAASyB,WAAhB;EACD;EALC,KAhBwB;EAuB5BE,eAAW;EACTpD,kBAAY,KADH;EAETC,aAAY,eAAUyC,MAAV,EAAiB;EAC3B,YAAG,CAACrE,YAAYqE,MAAZ,CAAJ,EAAyB,MAAM,IAAIW,KAAJ,CAAU,yBAAV,CAAN;;EACzBtB,iBAASpE,IAAT,CAAc+E,MAAd;;EACAV,mBAAWC,aAAX,IAA4B,CAA5B;EACA,eAAO,IAAP;EACD;EAPQ;EAvBiB,GAA9B;EAiCA,OAAKL,IAAL,GAAYA,IAAZ;EACD,CAvFD;;EAyFAL,MAAMrB,SAAN,GAAkB;EAChBoD,SADgB,mBACPC,GADO,EACH;EACX,QAAG,OAAOA,GAAP,KAAe,QAAlB,EAA4B,KAAK3B,IAAL,GAAYlG,OAAOyE,MAAP,CAAc,KAAKyB,IAAL,IAAa,KAAKA,IAAlB,IAA0B,EAAxC,EAA4C2B,GAA5C,CAAZ;EAC5B,WAAO,IAAP;EACD,GAJe;EAKhBC,OALgB,sBAKR;EACN,WAAO,IAAIjC,KAAJ,CAAU,KAAKC,CAAf,EAAkB,KAAKC,CAAvB,EAA0B,KAAKC,CAA/B,EAAkC,KAAKC,CAAvC,EAA0C,KAAKC,IAA/C,CAAP;EACD,GAPe;EAQhB6B,MARgB,gBAQVlG,EARU,EAQP;EACP,QAAG,OAAOA,EAAP,KAAc,UAAjB,EAA4B;EAC1B,aAAOA,GAAG,IAAH,KAAY,IAAnB;EACD;;EACD,WAAO,IAAP;EACD,GAbe;EAchBmG,QAdgB,kBAcRC,QAdQ,EAcC;EACf,QAAMC,OAAO;EAAEpC,SAAG,KAAKA,CAAV;EAAaC,SAAG,KAAKA,CAArB;EAAwBC,SAAG,KAAKA,CAAhC;EAAmCC,SAAG,KAAKA;EAA3C,KAAb;EACA,QAAGgC,aAAa,IAAb,IAAqB,KAAK/B,IAA7B,EAAmCgC,KAAKhC,IAAL,GAAY,KAAKA,IAAjB;EACnC,WAAOgC,IAAP;EACD,GAlBe;EAmBhBC,MAnBgB,gBAmBVb,KAnBU,EAmBCc,KAnBD,EAmBsB;EAAA,QAAhCd,KAAgC;EAAhCA,WAAgC,GAAxB,CAAwB;EAAA;;EAAA,QAArBc,KAAqB;EAArBA,WAAqB,GAAb,YAAa;EAAA;;EAAA,QAC5BtC,CAD4B,GACb,IADa,CAC5BA,CAD4B;EAAA,QACzBC,CADyB,GACb,IADa,CACzBA,CADyB;EAAA,QACtBC,CADsB,GACb,IADa,CACtBA,CADsB;EAAA,QACnBC,CADmB,GACb,IADa,CACnBA,CADmB;;EAEpC,YAAQmC,KAAR;EACE,WAAK,GAAL;EAAU,WAAK,YAAL;EACR,YAAMC,QAAQf,SAAS,CAAT,GAAa,CAAb,GAAiBA,QAAQ,CAAvC;EACA,eAAO,IAAIgB,MAAJ,CAAW,CAAC;EAACxC,aAAGA,IAAIuC,KAAR;EAAetC,cAAf;EAAkBC,cAAlB;EAAqBC;EAArB,SAAD,EAA0B;EAACH,aAAGA,IAAIuC,KAAR;EAAetC,cAAf;EAAkBC,cAAlB;EAAqBC;EAArB,SAA1B,CAAX,CAAP;;EACF;EAJF;EAMD,GA3Be;EA4BhBsC,YA5BgB,sBA4BJC,SA5BI,EA4BM;EACpB,QAAMC,SAAShH,QAAQ+G,SAAR,CAAf;EACAC,WAAOC,OAAP,CAAe,IAAf;EACA,WAAO,IAAIJ,MAAJ,CAAWG,MAAX,CAAP;EACD,GAhCe;EAiChBE,UAjCgB,0BAiCC;EAAA,QAAN7C,CAAM,QAANA,CAAM;EAAA,QAAHC,CAAG,QAAHA,CAAG;;EAAA,gBACU,KAAKD,CAAL,GAASA,CAAT,GAAa,CAAE,KAAKA,CAAP,EAAUA,CAAV,CAAb,GAA6B,CAAEA,CAAF,EAAK,KAAKA,CAAV,CADvC;EAAA,QACR8C,MADQ;EAAA,QACAC,MADA;;EAAA,gBAEU,KAAK9C,CAAL,GAASA,CAAT,GAAa,CAAE,KAAKA,CAAP,EAAUA,CAAV,CAAb,GAA6B,CAAEA,CAAF,EAAK,KAAKA,CAAV,CAFvC;EAAA,QAER+C,MAFQ;EAAA,QAEAC,MAFA;;EAGf,WAAO,IAAIC,IAAJ,CAASH,MAAT,EAAiBE,MAAjB,EAAyBH,SAASC,MAAlC,EAA0CC,SAASC,MAAnD,EAA2D,CAA3D,EAA8D,CAA9D,CAAP;EACD;EArCe,CAAlB;;EAwCA,IAAMT,SAAS,SAATA,MAAS,CAAUW,UAAV,EAAsB/C,IAAtB,EAA2B;EAAA;;EACxC,MAAIE,MAAJ;;EAEApG,SAAOqE,gBAAP,CAAwB,IAAxB,EAA8B;EAC5B6B,UAAM;EACJ5B,kBAAY,KADR;EAEJ2C,SAFI,iBAEE;EAAE,eAAOb,MAAP;EAAe,OAFnB;EAGJc,SAHI,eAGCxG,EAHD,EAGI;EAAE0F,iBAAS,OAAO1F,EAAP,KAAc,QAAd,GAAyBA,EAAzB,GAA8B,IAAvC;EAA6C,eAAO0F,MAAP;EAAe;EAHlE;EADsB,GAA9B;EAQA,OAAKF,IAAL,GAAYA,IAAZ;EAEAzE,UAAQwH,UAAR,EAAoB/I,OAApB,CAA4B,iBAAO;EACjC,QAAG,CAACyF,UAAUuD,KAAV,CAAJ,EAAsB;EADW,QAE1BpD,CAF0B,GAEZoD,KAFY,CAE1BpD,CAF0B;EAAA,QAEvBC,CAFuB,GAEZmD,KAFY,CAEvBnD,CAFuB;EAAA,QAEpBC,CAFoB,GAEZkD,KAFY,CAEpBlD,CAFoB;EAAA,QAEjBC,CAFiB,GAEZiD,KAFY,CAEjBjD,CAFiB;;EAGjC,WAAKhE,IAAL,CAAU,IAAI4D,KAAJ,CAAUC,CAAV,EAAaC,CAAb,EAAgBC,CAAhB,EAAmBC,CAAnB,EAAsBG,MAAtB,CAAV;EACD,GAJD;EAKD,CAlBD;;EAoBC,WAAU+C,aAAV,EAAyBC,OAAzB,EAAiC;EAChC,MAAM5E,YAAY,EAAlB;EAEA2E,gBAAc3E,SAAd,GAA0BA,SAA1B;EAEAxE,SAAOC,IAAP,CAAYmJ,OAAZ,EAAqBlJ,OAArB,CAA6B,eAAK;EAChCsE,cAAUpE,GAAV,IAAiBgJ,QAAQhJ,GAAR,CAAjB;EACD,GAFD;EAIAJ,SAAOqE,gBAAP,CAAwBG,SAAxB,EAAmC;EACjC6E,WAAO;EACL/E,kBAAY,KADP;EAEL2C,SAFK,iBAEC;EACJ,eAAO,KAAK,CAAL,CAAP;EACD;EAJI,KAD0B;EAOjCqC,SAAK;EACHhF,kBAAY,KADT;EAEH2C,SAFG,iBAEG;EACJ,eAAO,CAAC,KAAK9H,MAAN,GAAe,KAAK,CAApB,GAAwB,KAAK,KAAKA,MAAL,GAAc,CAAnB,CAA/B;EACD;EAJE;EAP4B,GAAnC;EAcD,CAvBA,EAuBCmJ,MAvBD,EAuBS;EACRV,SADQ,mBACCC,GADD,EACK;EACX,QAAG,OAAOA,GAAP,KAAe,QAAlB,EAA4B,KAAK3B,IAAL,GAAYlG,OAAOyE,MAAP,CAAc,KAAKyB,IAAL,IAAa,KAAKA,IAAlB,IAA0B,EAAxC,EAA4C2B,GAA5C,CAAZ;EAC5B,WAAO,IAAP;EACD,GAJO;EAKRG,QALQ,kBAKAC,QALA,EAKS;EACf,QAAMnG,SAAS,EAAf;EACA,SAAK5B,OAAL,CAAa;EAAA,aAAG4B,OAAOG,IAAP,CAAY2D,EAAEoC,MAAF,CAASC,QAAT,CAAZ,CAAH;EAAA,KAAb;EACA,WAAOnG,MAAP;EACD,GATO;EAURgG,OAVQ,sBAUA;EACN,WAAO,IAAIQ,MAAJ,CAAW,IAAX,CAAP;EACD,GAZO;EAaRiB,IAbQ,cAaJvF,KAbI,EAaE;EACR,WAAO,KAAKA,KAAL,CAAP;EACD,GAfO;EAgBRwF,QAAM,cAAU3H,EAAV,EAAa;EAAA;;EACjB,QAAM4H,QAAQ,EAAd;EACA,SAAKvJ,OAAL,CAAa,UAACwJ,IAAD,EAAO3H,CAAP,EAAW;EACtB0H,YAAMxH,IAAN,CAAWyH,IAAX;EACA,UAAG,CAAC,OAAK3H,IAAI,CAAT,CAAJ,EAAiB;EACjB,UAAM4H,OAAO9H,GAAG6H,IAAH,EAAS,OAAK3H,IAAI,CAAT,CAAT,EAAsBA,CAAtB,CAAb;EACA,UAAG,CAAC4D,UAAUgE,IAAV,CAAJ,EAAqB;EAJC,UAKf7D,CALe,GAKK6D,IALL,CAKf7D,CALe;EAAA,UAKZC,CALY,GAKK4D,IALL,CAKZ5D,CALY;EAAA,UAKTC,CALS,GAKK2D,IALL,CAKT3D,CALS;EAAA,UAKNC,CALM,GAKK0D,IALL,CAKN1D,CALM;EAAA,UAKHC,IALG,GAKKyD,IALL,CAKHzD,IALG;EAMtBuD,YAAMxH,IAAN,CAAW,IAAI4D,KAAJ,CAAUC,CAAV,EAAaC,CAAb,EAAgBC,CAAhB,EAAmBC,CAAnB,EAAsBC,IAAtB,CAAX;EACD,KAPD;EAQA,SAAK0D,MAAL,CAAY,CAAZ,EAAe,KAAKzK,MAApB;EACAsK,UAAMvJ,OAAN,CAAc;EAAA,aAAG,OAAK+B,IAAL,CAAU2D,CAAV,CAAH;EAAA,KAAd;EACA,WAAO,IAAP;EACD,GA7BO;EA8BRsD,OA9BQ,iBA8BDW,KA9BC,EA8BK;EACX,YAAQA,KAAR;EACE,WAAK,GAAL;EAAU,WAAK,KAAL;EACV,WAAK,GAAL;EAAU,WAAK,MAAL;EAAa,WAAK,GAAL;EAAU,WAAK,OAAL;EAAA,wBACI,KAAKP,GADT;EAAA,YACrBQ,EADqB,aACvBhE,CADuB;EAAA,YACfiE,EADe,aACjBhE,CADiB;EAAA,YACTiE,EADS,aACXhE,CADW;EAAA,YACHiE,EADG,aACLhE,CADK;EAE/B,eAAO,IAAIJ,KAAJ,CACLiE,EADK,EAELC,EAFK,EAGLC,EAHK,EAILC,EAJK,EAKL,KAAK/D,IALA,CAAP;;EAOF,WAAK,GAAL;EAAU,WAAK,GAAL;EAAU,WAAK,QAAL;EAAe,WAAK,QAAL;EAAA,0BACE,KAAKmD,KADP;EAAA,YACvBa,EADuB,eACzBpE,CADyB;EAAA,YACjBqE,EADiB,eACnBpE,CADmB;EAAA,YACXqE,EADW,eACbpE,CADa;EAAA,YACLqE,EADK,eACPpE,CADO;EAAA,yBAEE,KAAKqD,GAFP;EAAA,YAEvBgB,EAFuB,cAEzBxE,CAFyB;EAAA,YAEjByE,EAFiB,cAEnBxE,CAFmB;EAAA,YAEXyE,EAFW,cAEbxE,CAFa;EAAA,YAELyE,EAFK,cAEPxE,CAFO;EAGjC,eAAO,IAAIJ,KAAJ,CACLqE,KAAK,CAAL,GAASI,KAAK,CADT,EAELH,KAAK,CAAL,GAASI,KAAK,CAFT,EAGLH,KAAK,CAAL,GAASI,KAAK,CAHT,EAILH,KAAK,CAAL,GAASI,KAAK,CAJT,EAKL,KAAKvE,IALA,CAAP;;EAOF,WAAK,GAAL;EAAU,WAAK,OAAL;EACV,WAAK,GAAL;EAAU,WAAK,IAAL;EAAW,WAAK,GAAL;EAAU,WAAK,MAAL;EAC/B;EAAA,2BACyB,KAAKmD,KAD9B;EAAA,YACUvD,CADV,gBACUA,CADV;EAAA,YACaC,CADb,gBACaA,CADb;EAAA,YACgBC,CADhB,gBACgBA,CADhB;EAAA,YACmBC,CADnB,gBACmBA,CADnB;EAEE,eAAO,IAAIJ,KAAJ,CACLC,CADK,EAELC,CAFK,EAGLC,CAHK,EAILC,CAJK,EAKL,KAAKC,IALA,CAAP;EAzBJ;EAiCD,GAhEO;EAiERwE,WAjEQ,qBAiEGA,UAjEH,EAiEcC,IAjEd,EAiEmB;EACzB,QAAMC,UAAU,CAAC,CAACD,IAAlB;;EAEA,QAAGC,OAAH,EAAW;EAAA,UACDC,IADC,GAC4BF,IAD5B,CACDE,IADC;EAAA,UACKC,GADL,GAC4BH,IAD5B,CACKG,GADL;EAAA,UACUxD,KADV,GAC4BqD,IAD5B,CACUrD,KADV;EAAA,UACiBG,MADjB,GAC4BkD,IAD5B,CACiBlD,MADjB;;EAIT,UAAMsD,UAAUF,OAAOvD,QAAQ,CAA/B;EACA,UAAM0D,UAAUF,MAAMrD,SAAS,CAA/B;EAEA,WAAKvH,OAAL,CAAa,iBAAO;EAClBgJ,cAAM+B,SAAN,CAAgB;EAAEnF,aAAG,CAACiF,OAAN;EAAehF,aAAG,CAACiF;EAAnB,SAAhB;EACA9B,cAAMwB,SAAN,CAAgBA,UAAhB;EACAxB,cAAM+B,SAAN,CAAgB;EAAEnF,aAAGiF,OAAL;EAAchF,aAAGiF;EAAjB,SAAhB;EACD,OAJD;EAKD,KAZD,MAYO;EACL,WAAK9K,OAAL,CAAa,iBAAO;EAClBgJ,cAAMwB,SAAN,CAAgBA,UAAhB;EACD,OAFD;EAGD;;EACD,WAAO,IAAP;EACD;EAtFO,CAvBT,CAAD;;EAiHA,IAAM1B,OAAO,SAAPA,IAAO,CAAU6B,IAAV,EAAoBC,GAApB,EAA6BxD,KAA7B,EAAwCG,MAAxC,EAAoDvB,IAApD,EAAgE;EAAA,MAAtD2E,IAAsD;EAAtDA,QAAsD,GAA/C,CAA+C;EAAA;;EAAA,MAA5CC,GAA4C;EAA5CA,OAA4C,GAAtC,CAAsC;EAAA;;EAAA,MAAnCxD,KAAmC;EAAnCA,SAAmC,GAA3B,CAA2B;EAAA;;EAAA,MAAxBG,MAAwB;EAAxBA,UAAwB,GAAf,CAAe;EAAA;;EAAA,MAAZvB,IAAY;EAAZA,QAAY,GAAL,IAAK;EAAA;;EAC3E,MAAMC,QAAQ;EAAE0E,cAAF;EAAQC,YAAR;EAAaxD,gBAAb;EAAoBG;EAApB,GAAd;;EACA,MAAIrB,MAAJ;;EACApG,SAAOqE,gBAAP,CAAwB,IAAxB,EAA8B;EAC5BiD,WAAO;EACLhD,kBAAY,IADP;EAEL2C,SAFK,iBAEC;EAAE,eAAOd,MAAMmB,KAAb;EAAoB,OAFvB;EAGLJ,SAHK,eAGAgE,QAHA,EAGS;EACZ,YAAMC,WAAWhF,MAAMmB,KAAvB;EACAnB,cAAMmB,KAAN,GAAc4D,QAAd;EACA/E,cAAMiF,KAAN,IAAeF,WAAWC,QAA1B;EACA,eAAOD,QAAP;EACD;EARI,KADqB;EAW5BzD,YAAQ;EACNnD,kBAAY,IADN;EAEN2C,SAFM,iBAEA;EAAE,eAAOd,MAAMsB,MAAb;EAAqB,OAFvB;EAGNP,SAHM,eAGDgE,QAHC,EAGQ;EACZ,YAAMC,WAAWhF,MAAMsB,MAAvB;EACAtB,cAAMsB,MAAN,GAAeyD,QAAf;EACA/E,cAAMkF,MAAN,IAAgBH,WAAWC,QAA3B;EACA,eAAOD,QAAP;EACD;EARK,KAXoB;EAqB5BL,UAAQ;EAAEvG,kBAAY,IAAd;EAAoB2C,SAApB,iBAA0B;EAAE,eAAOd,MAAM0E,IAAb;EAAmB;EAA/C,KArBoB;EAsB5BC,SAAQ;EAAExG,kBAAY,IAAd;EAAoB2C,SAApB,iBAA0B;EAAE,eAAOd,MAAM2E,GAAb;EAAkB;EAA9C,KAtBoB;EAuB5BM,WAAQ;EAAE9G,kBAAY,IAAd;EAAoB2C,SAApB,iBAA0B;EAAE,eAAO,KAAK4D,IAAL,GAAY,KAAKvD,KAAxB;EAA+B;EAA3D,KAvBoB;EAwB5B+D,YAAQ;EAAE/G,kBAAY,IAAd;EAAoB2C,SAApB,iBAA0B;EAAE,eAAO,KAAK6D,GAAL,GAAW,KAAKrD,MAAvB;EAA+B;EAA3D,KAxBoB;EAyB5BvB,UAAQ;EACN5B,kBAAY,KADN;EAEN2C,SAFM,iBAEA;EAAE,eAAOb,MAAP;EAAe,OAFjB;EAGNc,SAHM,eAGDxG,EAHC,EAGE;EACN0F,iBAAS,OAAO1F,EAAP,KAAc,QAAd,GAAyBA,EAAzB,GAA8B,IAAvC;EACA,eAAO0F,MAAP;EACD;EANK;EAzBoB,GAA9B;EAmCA,OAAKF,IAAL,GAAYA,IAAZ;EACD,CAvCD;;EAyCA,IAAMoF,mBAAmB,SAAnBA,gBAAmB,CAACC,KAAD,EAAS;EAC9B;EACA;EACA;EAH8B,iBAIE9J,QAAQ8J,KAAR,CAJF;EAAA,MAIxBC,WAJwB;EAAA,MAIXC,QAJW;;EAKhC,SAAO;EACLrI,YAAQxC,SAAS4K,WAAT,KAAyBA,cAAc,CAAvC,GAA2CE,SAASF,WAAT,EAAsB,EAAtB,CAA3C,GAAuE,CAD1E;EAELrH,SAAQvD,SAAS6K,QAAT,KAAsBA,WAAW,CAAjC,GAAqCC,SAASD,QAAT,EAAmB,EAAnB,CAArC,GAA8D;EAFjE,GAAP;EAID,CATD;;EAWAzC,KAAKxE,SAAL,GAAiB;EACfoD,SADe,mBACNC,GADM,EACF;EACX,QAAG,OAAOA,GAAP,KAAe,QAAlB,EAA4B,KAAK3B,IAAL,GAAYlG,OAAOyE,MAAP,CAAc,KAAKyB,IAAL,IAAa,KAAKA,IAAlB,IAA0B,EAAxC,EAA4C2B,GAA5C,CAAZ;EAC5B,WAAO,IAAP;EACD,GAJc;EAKfC,OALe,sBAKP;EACN,WAAO,IAAIkB,IAAJ,CAAS,KAAK6B,IAAd,EAAoB,KAAKC,GAAzB,EAA8B,KAAKxD,KAAnC,EAA0C,KAAKG,MAA/C,EAAuD,KAAKvB,IAA5D,CAAP;EACD,GAPc;EAQf8B,QARe,kBAQPC,QARO,EAQE;EACf,QAAMC,OAAO;EAACZ,aAAO,KAAKA,KAAb;EAAoBG,cAAQ,KAAKA,MAAjC;EAAyCoD,YAAM,KAAKA,IAApD;EAA0DC,WAAK,KAAKA,GAApE;EAAyEM,aAAO,KAAKA,KAArF;EAA4FC,cAAQ,KAAKA;EAAzG,KAAb;EACA,QAAGpD,aAAa,IAAb,IAAqB,KAAK/B,IAA7B,EAAmCgC,KAAKhC,IAAL,GAAY,KAAKA,IAAjB;EACnC,WAAOgC,IAAP;EACD,GAZc;EAafyD,WAbe,qBAaJC,QAbI,EAaK;EAAA,gBACc/K,QAAQ+K,QAAR,IAAoBA,QAApB,GAA+BA,SAASC,IAAT,GAAgBN,KAAhB,CAAsB,KAAtB,CAD7C;EAAA,QACVO,QADU;EAAA,QACAC,SADA;;EAElB,WAAO,KAAKC,MAAL,CAAYF,QAAZ,EAAsB5C,KAAtB,CAA4B6C,SAA5B,CAAP;EACD,GAhBc;EAiBfC,QAjBe,kBAiBPnC,KAjBO,EAiBD;EACZ,QAAMoC,cAAcjM,OAAOyE,MAAP,CAAc;EAChCyH,mBAAmB,CADa;EAEhCC,yBAAmB;EACjBrG,WAAG,KAAK+E,IAAL,GAAa,KAAKvD,KAAL,GAAa,CADZ;EAEjBvB,WAAG,KAAK+E,GAAL,GAAY,KAAKA,GAAL,GAAW,CAFT;EAGjB9E,WAAG;EAHc;EAFa,KAAd,EAOjB,KAAKE,IAPY,CAApB;;EASA,YAAQ2D,KAAR;EACE,WAAK,OAAL;EAAc,WAAK,GAAL;EACZ,eAAO,IAAIvB,MAAJ,CAAW,CAAC;EAACxC,aAAG,KAAKsF,KAAT;EAAgBrF,aAAG,KAAK+E,GAAxB;EAA6B9E,aAAG,CAAhC;EAAmCC,aAAG;EAAtC,SAAD,EAA2C;EAACH,aAAG,KAAKsF,KAAT;EAAgBrF,aAAG,KAAKsF,MAAxB;EAAgCrF,aAAG,CAAnC;EAAsCC,aAAG;EAAzC,SAA3C,CAAX,EAAoGgG,WAApG,CAAP;;EACF,WAAK,QAAL;EAAe,WAAK,GAAL;EACb,eAAO,IAAI3D,MAAJ,CAAW,CAAC;EAACxC,aAAG,KAAK+E,IAAT;EAAe9E,aAAG,KAAKsF,MAAvB;EAA+BrF,aAAG,CAAlC;EAAqCC,aAAG;EAAxC,SAAD,EAA6C;EAACH,aAAG,KAAKsF,KAAT;EAAgBrF,aAAG,KAAKsF,MAAxB;EAAgCrF,aAAG,CAAnC;EAAsCC,aAAG;EAAzC,SAA7C,CAAX,EAAsGgG,WAAtG,CAAP;;EACF,WAAK,MAAL;EAAa,WAAK,GAAL;EACX,eAAO,IAAI3D,MAAJ,CAAW,CAAC;EAACxC,aAAG,KAAK+E,IAAT;EAAe9E,aAAG,KAAK+E,GAAvB;EAA4B9E,aAAG,CAA/B;EAAkCC,aAAG;EAArC,SAAD,EAA0C;EAACH,aAAG,KAAK+E,IAAT;EAAe9E,aAAG,KAAKsF,MAAvB;EAA+BrF,aAAG,CAAlC;EAAqCC,aAAG;EAAxC,SAA1C,CAAX,EAAkGgG,WAAlG,CAAP;;EACF,WAAK,KAAL;EAAY,WAAK,GAAL;EACV,eAAO,IAAI3D,MAAJ,CAAW,CAAC;EAACxC,aAAG,KAAK+E,IAAT;EAAe9E,aAAG,KAAK+E,GAAvB;EAA4B9E,aAAG,CAA/B;EAAkCC,aAAG;EAArC,SAAD,EAA0C;EAACH,aAAG,KAAKsF,KAAT;EAAgBrF,aAAG,KAAK+E,GAAxB;EAA6B9E,aAAG,CAAhC;EAAmCC,aAAG;EAAtC,SAA1C,CAAX,EAAgGgG,WAAhG,CAAP;;EACF,WAAK,QAAL;EAAe,WAAK,GAAL;EACb,YAAMG,UAAU,KAAK3E,MAAL,GAAc,CAAd,GAAkB,KAAKqD,GAAvC;EACA,eAAO,IAAIxC,MAAJ,CACL,CACE;EAACxC,aAAG,KAAK+E,IAAT;EAAe9E,aAAGqG,OAAlB;EAA2BpG,aAAG,CAA9B;EAAiCC,aAAG;EAApC,SADF,EAEE;EAACH,aAAG,KAAKsF,KAAT;EAAgBrF,aAAGqG,OAAnB;EAA4BpG,aAAG,CAA/B;EAAkCC,aAAG;EAArC,SAFF,CADK,EAKLgG,WALK,CAAP;;EAOF,WAAK,QAAL;EAAe,WAAK,GAAL;EACb,YAAMI,UAAU,KAAK/E,KAAL,GAAa,CAAb,GAAiB,KAAKxB,CAAtC;EACA,eAAO,IAAIwC,MAAJ,CACL,CACE;EAACxC,aAAGuG,OAAJ;EAAatG,aAAG,KAAK+E,GAArB;EAA0B9E,aAAG,CAA7B;EAAgCC,aAAG;EAAnC,SADF,EAEE;EAACH,aAAGuG,OAAJ;EAAatG,aAAG,KAAKsF,MAArB;EAA6BrF,aAAG,CAAhC;EAAmCC,aAAG;EAAtC,SAFF,CADK,EAKLgG,WALK,CAAP;;EAOF;EACE,eAAO,IAAI3D,MAAJ,CACL,CACE;EAACxC,aAAG,KAAK+E,IAAT;EAAe9E,aAAG,KAAK+E,GAAvB;EAA4B9E,aAAG,CAA/B;EAAkCC,aAAG;EAArC,SADF,EAEE;EAACH,aAAG,KAAK+E,IAAT;EAAe9E,aAAG,KAAKsF,MAAvB;EAA+BrF,aAAG,CAAlC;EAAqCC,aAAG;EAAxC,SAFF,EAGE;EAACH,aAAG,KAAKsF,KAAT;EAAgBrF,aAAG,KAAKsF,MAAxB;EAAgCrF,aAAG,CAAnC;EAAsCC,aAAG;EAAzC,SAHF,EAIE;EAACH,aAAG,KAAKsF,KAAT;EAAgBrF,aAAG,KAAK+E,GAAxB;EAA6B9E,aAAG,CAAhC;EAAmCC,aAAG;EAAtC,SAJF,CADK,EAOLgG,WAPK,CAAP;EA5BJ;EAsCD,GAjEc;EAkEfK,iBAlEe,2BAkEEC,UAlEF,EAkEc5H,cAlEd,EAkE6B;EAAA,4BAClB2G,iBAAiBiB,UAAjB,CADkB;EAAA,QAClCnJ,MADkC,qBAClCA,MADkC;EAAA,QAC1Be,GAD0B,qBAC1BA,GAD0B;;EAE1C,QAAMmD,QAAQ,KAAKA,KAAnB;EACA,QAAMG,SAAS,KAAKA,MAApB;EACA,QAAM+E,aAAalF,QAAQlE,MAA3B;EACA,QAAMqJ,cAAchF,SAAStD,GAA7B;EACAQ,qBAAiB,OAAOA,cAAP,KAA0B,UAA1B,GAAuCA,cAAvC,GAAwD/G,SAAzE;EAEA,QAAM8O,YAAYnH,gBAAgBnC,MAAhB,EAAwBe,GAAxB,EAA6B,UAACH,KAAD,EAAQY,QAAR,EAAkBC,QAAlB,EAA6B;EAC1E,UAAM8H,UAAU;EACdvJ,gBAAQwB,QADM;EAEdT,aAAQU,QAFM;EAGd+H,gBAAQ,CAAChI,QAAD,EAAWC,QAAX,CAHM;EAIdwC,eAAQ;EAAEC,sBAAF;EAASG;EAAT;EAJM,OAAhB;EAMA,UAAM3F,SAAS,IAAIkH,IAAJ,CAASpE,WAAW4H,UAApB,EAAgC3H,WAAW4H,WAA3C,EAAwDD,UAAxD,EAAoEC,WAApE,EAAiFE,OAAjF,CAAf;EACA,aAAOhI,iBAAiBA,eAAe7C,MAAf,EAAuBkC,KAAvB,EAA8BY,QAA9B,EAAwCC,QAAxC,CAAjB,GAAqE/C,MAA5E;EACD,KATiB,CAAlB;EAWA,WAAO4K,SAAP;EACD,GAtFc;EAuFfG,KAvFe,eAuFVlC,IAvFU,EAuFL;EACR,QAAG,OAAOA,IAAP,KAAgB,QAAnB,EAA4B;EAAE,YAAM,IAAIhD,KAAJ,CAAU,gCAAV,CAAN;EAAmD;;EADzE,QAEAL,KAFA,GAEkBqD,IAFlB,CAEArD,KAFA;EAAA,QAEOG,MAFP,GAEkBkD,IAFlB,CAEOlD,MAFP;;EAIR,QAAG,CAAC7G,SAAS0G,KAAT,CAAD,IAAoB,CAAC1G,SAAS6G,MAAT,CAAxB,EAAyC;EAAE,YAAM,IAAIE,KAAJ,CAAU,yDAAV,CAAN;EAA4E;;EACvH,QAAMmF,UAAU,CAAExF,QAAQ,KAAKA,KAAf,EAAsBG,SAAS,KAAKA,MAApC,CAAhB;EACA,QAAMsF,iBAAiBD,QAAQE,IAAR,GAAe,CAAf,CAAvB;EAEA,SAAK1F,KAAL,GAAc,KAAKA,KAAL,GAAayF,cAAd,IAAiC,CAA9C;EACA,SAAKtF,MAAL,GAAe,KAAKA,MAAL,GAAcsF,cAAf,IAAkC,CAAhD;EAEA,WAAO,IAAP;EACD,GAnGc;EAoGf;EACAE,QArGe,yBAqGkDC,QArGlD,EAqG2E;EAAA,QAA5EC,IAA4E,SAAjFtC,IAAiF;EAAA,QAAlEuC,IAAkE,SAAtEtC,GAAsE;EAAA,QAAtDuC,QAAsD,SAA5D/F,KAA4D;EAAA,QAArCgG,SAAqC,SAA5C7F,MAA4C;;EAAA,QAAzByF,QAAyB;EAAzBA,cAAyB,GAAd,aAAc;EAAA;;EAAA,QAChFrC,IADgF,GACnD,IADmD,CAChFA,IADgF;EAAA,QAC1EC,GAD0E,GACnD,IADmD,CAC1EA,GAD0E;EAAA,QACrExD,KADqE,GACnD,IADmD,CACrEA,KADqE;EAAA,QAC9DG,MAD8D,GACnD,IADmD,CAC9DA,MAD8D;;EAExF,YAAQyF,QAAR;EACE,WAAK,IAAL;EAAW,WAAK,KAAL;EAAY,WAAK,aAAL;EAAoB,WAAK,mBAAL;EACzC,eAAOvC,KAAK;EACVE,gBAAMsC,IADI;EAEVrC,eAAMsC,OAAOE,SAFH;EAGVhG,sBAHU;EAIVG;EAJU,SAAL,CAAP;;EAMF,WAAK,GAAL;EAAU,WAAK,GAAL;EAAU,WAAK,IAAL;EAAW,WAAK,QAAL;EAAe,WAAK,QAAL;EAAe,WAAK,eAAL;EAC3D,eAAOkD,KAAK;EACVE,gBAAMsC,OAAOE,WAAW,CAAlB,GAAsB/F,QAAQ,CAD1B;EAEVwD,eAAMsC,OAAOE,YAAY,CAAnB,GAAuB7F,SAAS,CAF5B;EAGVH,sBAHU;EAIVG;EAJU,SAAL,CAAP;;EAMF;EACE,eAAOkD,KAAK;EAAEE,oBAAF;EAAQC,kBAAR;EAAaxD,sBAAb;EAAoBG;EAApB,SAAL,CAAP;EAhBJ;EAkBD;EAzHc,CAAjB;AA4HA,EAUO,IAAMkD,OAAO,SAAPA,IAAO,CAAUE,IAAV,EAAgBC,GAAhB,EAAqBxD,KAArB,EAA4BG,MAA5B,EAAoC3B,CAApC,EAAuCC,CAAvC,EAA0CwH,KAA1C,EAAgD;EAClE,SAAO,OAAO1C,IAAP,KAAgB,QAAhB,GACH,IAAI7B,IAAJ,CAAS6B,KAAKA,IAAd,EAAoBA,KAAKC,GAAzB,EAA8BD,KAAKvD,KAAnC,EAA0CuD,KAAKpD,MAA/C,EAAuDoD,KAAK/E,CAA5D,EAA+D+E,KAAK9E,CAApE,EAAuE8E,KAAK0C,KAA5E,CADG,GAEH,IAAIvE,IAAJ,CAAS6B,IAAT,EAAeC,GAAf,EAAoBxD,KAApB,EAA2BG,MAA3B,EAAmC3B,CAAnC,EAAsCC,CAAtC,EAAyCwH,KAAzC,CAFJ;EAGD,CAJM;;ECxcA,IAAMC,UAAU,SAAVA,OAAU,CAAUC,EAAV,EAAa;EAClC,MAAIC,SAASzM,UAAUwM,EAAV,IAAgBA,GAAG,CAAH,CAAhB,GAAwBA,EAArC;EACA,SAAOnM,OAAOoM,MAAP,IAAiBA,MAAjB,GAA0B9P,SAAjC;EACD,CAHM;AAKP,EAAO,IAAM+P,YAAY,SAAZA,SAAY,CAAUF,EAAV,EAAa;EACpC,SAAOA,cAAcG,OAArB;EACD,CAFM;AAIP,EAAO,IAAMC,uBAAuB,SAAvBA,oBAAuB,CAAUJ,EAAV,EAAa;EAC/CA,OAAKD,QAAQC,EAAR,CAAL;;EAEA,MAAG,CAACE,UAAUF,EAAV,CAAJ,EAAkB;EAChB,WAAO9C,KAAK;EACV7E,SAAQ,CADE;EACCC,SAAQ,CADT;EACY8E,YAAQ,CADpB;EACuBC,WAAQ,CAD/B;EACkCxD,aAAQ,CAD1C;EAC6CG,cAAQ,CADrD;EACwD2D,aAAQ,CADhE;EACmEC,cAAQ,CAD3E;EAC8EkC,aAAQ;EADtF,KAAL,CAAP;EAGD;;EAED,MAAIO,aAAa,CAAjB;EACA,MAAIC,YAAa,CAAjB;EACA,MAAIC,cAAcP,GAAGO,WAArB;EACA,MAAIC,eAAeR,GAAGQ,YAAtB;;EAEA,KAAG;EACDH,kBAAcL,GAAGK,UAAjB;EACAC,iBAAaN,GAAGM,SAAhB;EACAN,SAAKA,GAAGS,YAAR;;EAEA,QAAI,CAACT,GAAGU,IAAJ,IAAY,CAACV,GAAGW,IAAjB,IAA0B,yBAAyBC,IAAzB,CAA8B7R,OAAO8R,gBAAP,CAAwBb,EAAxB,EAA4Bc,gBAA5B,CAA6C,UAA7C,CAA9B,CAA7B,EAAqH;EACnHd,WAAK,IAAL;EACD;EACF,GARD,QAQQA,EARR;;EAWA,SAAO9C,KAAK;EACV7E,OAAQgI,UADE;EAEV/H,OAAQgI,SAFE;EAGVlD,UAAQiD,UAHE;EAIVhD,SAAQiD,SAJE;EAKVzG,WAAQ0G,WALE;EAMVvG,YAAQwG,YANE;EAOVV,WAAQ;EAPE,GAAL,CAAP;EASD,CAlCM;;EAoCP,IAAMiB,kBAAkB,SAAlBA,eAAkB,CAAUf,EAAV,EAAa;EACnCA,OAAKD,QAAQC,EAAR,CAAL;;EAEA,MAAG,CAACE,UAAUF,EAAV,CAAJ,EAAkB;EAChB,WAAO9C,KAAK;EACV7E,SAAQ,CADE;EACCC,SAAQ,CADT;EACY8E,YAAQ,CADpB;EACuBC,WAAQ,CAD/B;EACkCxD,aAAQ,CAD1C;EAC6CG,cAAQ,CADrD;EACwD2D,aAAQ,CADhE;EACmEC,cAAQ,CAD3E;EAC8EkC,aAAQ;EADtF,KAAL,CAAP;EAGD;;EAED,MAAMkB,MAAMC,QAAZ;EACA,MAAMC,MAAMnS,MAAZ;EACA,MAAM4R,OAAOK,IAAIL,IAAjB;EAEA,MAAIQ,UAAUD,IAAIE,WAAJ,KAAoBjR,SAApB,GAAgC+Q,IAAIE,WAApC,GACV,CAACJ,IAAIK,eAAJ,IAAuBV,KAAKW,UAA5B,IAA0CX,IAA3C,EAAiDY,UADrD;EAEA,MAAIC,UAAUN,IAAIO,WAAJ,KAAoBtR,SAApB,GAAgC+Q,IAAIO,WAApC,GACV,CAACT,IAAIK,eAAJ,IAAuBV,KAAKW,UAA5B,IAA0CX,IAA3C,EAAiDe,SADrD;EAGA,MAAMC,eAAe3B,GAAG4B,qBAAH,EAArB;;EAEA,MAAG5B,OAAOW,IAAV,EAAe;EACb,QAAIkB,SAAS7B,GAAGsB,UAAhB;;EACA,WAAMO,UAAUA,WAAWlB,IAA3B,EAAgC;EAC9BQ,iBAAWU,OAAON,UAAlB;EACAC,iBAAWK,OAAOH,SAAlB;EACAG,eAASA,OAAOP,UAAhB;EACD;EACF;;EAED,SAAOpE,KAAK;EACV7E,OAAQsJ,aAAavE,IAAb,GAAoB+D,OADlB;EAEV7I,OAAQqJ,aAAatE,GAAb,GAAmBmE,OAFjB;EAGVpE,UAAQuE,aAAavE,IAAb,GAAoB+D,OAHlB;EAIV9D,SAAQsE,aAAatE,GAAb,GAAmBmE,OAJjB;EAKV3H,WAAQ8H,aAAa9H,KALX;EAMVG,YAAQ2H,aAAa3H,MANX;EAOV2D,WAAQgE,aAAahE,KAAb,GAAqBwD,OAPnB;EAQVvD,YAAQ+D,aAAa/D,MAAb,GAAsB4D,OARpB;EASV1B,WAAQ;EATE,GAAL,CAAP;EAWD,CAxCD;;AA0CA,EAAO,IAAMgC,yBAAyB,SAAzBA,sBAAyB,CAAU9B,EAAV,EAAa;EACjDA,OAAKD,QAAQC,EAAR,CAAL,CADiD;;EAIjD,MAAMkB,MAAOnS,MAAb;EAEA,MAAMgT,SAAShB,gBAAgBf,EAAhB,EAAoBzF,MAApB,EAAf;;EAEA,MAAGwH,OAAOjC,KAAP,KAAiB,KAApB,EAA0B;EACxB,WAAO5C,KAAK6E,MAAL,CAAP;EACD;;EAED,MAAIC,UAAUhC,EAAd;EACA,MAAI6B,SAAU7B,GAAGsB,UAAjB;;EAEA,KAAG;EACD,QAAGO,UAAW,CAACA,OAAOnB,IAAR,IAAgB,CAACmB,OAAOlB,IAAnC,IAA4C,yBAAyBC,IAAzB,CAA8BM,IAAIL,gBAAJ,CAAqBgB,MAArB,EAA6Bf,gBAA7B,CAA8C,UAA9C,CAA9B,CAA/C,EAAwI;EAAA,6BAChHC,gBAAgBc,MAAhB,CADgH;EAAA,UAC9HxE,GAD8H,oBAC9HA,GAD8H;EAAA,UACzHD,IADyH,oBACzHA,IADyH;;EAEtI2E,aAAO1E,GAAP,IAAcA,GAAd;EACA0E,aAAO3E,IAAP,IAAeA,IAAf;EACA2E,aAAOpE,KAAP,GAAeoE,OAAO3E,IAAP,GAAc2E,OAAOlI,KAApC;EACAkI,aAAOnE,MAAP,GAAgBmE,OAAO1E,GAAP,GAAa0E,OAAO/H,MAApC;EACAgI,gBAAUH,SAAS,IAAnB;EACD,KAPD,MAOO,IAAG,CAACA,MAAJ,EAAW;EAChBG,gBAAU,IAAV;EACD,KAFM,MAEA;EACLA,gBAAUH,MAAV;EACAA,eAASG,QAAQV,UAAjB;EACD;EACF,GAdD,QAcQO,MAdR;;EAgBA,SAAO3E,KAAK6E,MAAL,CAAP;EACD,CAhCM;AAkCP,EAAO,IAAME,aAAa,SAAbA,UAAa,GAAW;EACnC,SAAO/E,KAAK;EACVE,UAAQrO,OAAOmT,UAAP,IAAqBnT,OAAOoT,OAD1B;EAEV9E,SAAQtO,OAAOqT,SAAP,IAAoBrT,OAAOsT,OAFzB;EAGVxI,WAAQ9K,OAAOuT,UAHL;EAIVtI,YAAQjL,OAAOwT;EAJL,GAAL,CAAP;EAMD,CAPM;AASP,EAAO,IAAMC,aAAa,SAAbA,UAAa,GAAW;EACnC,SAAOtF,KAAK;EACVE,UAAQ,CADE;EAEVC,SAAQ,CAFE;EAGVxD,WAAQpJ,OAAOoJ,KAHL;EAIVG,YAAQvJ,OAAOuJ;EAJL,GAAL,CAAP;EAMD,CAPM;;ECJA,IAAMyI,SAAS,SAATA,MAAS,CAAUrI,GAAV,EAAesI,GAAf,EAAmB;EACvC,MAAIrO,SAAS,EAAb;;EACA,OAAI,IAAI1B,GAAR,IAAeyH,GAAf,EAAmB;EACjB,QAAGzH,QAAQ,IAAX,EAAgB;EACd,UAAIgQ,WAAWvI,IAAIzH,GAAJ,CAAf;;EACA,WAAI,IAAI2B,IAAI,CAAR,EAAWsO,IAAIrQ,OAAOC,IAAP,CAAYkQ,GAAZ,CAAf,EAAiCnO,IAAIqO,EAAElR,MAA3C,EAAmD4C,IAAIC,CAAvD,EAA0DD,GAA1D,EAA8D;EAC5D,YAAIuO,SAASD,EAAEtO,CAAF,CAAb;;EACA,YAAG,OAAOqO,QAAP,KAAoB,UAAvB,EAAkC;EAChCtO,iBAAOwO,MAAP,IAAiBzI,IAAIzH,GAAJ,CAAjB;EACD,SAFD,MAEO;EACL,cAAI,OAAOgQ,QAAP,KAAoB,QAApB,IAAgC,OAAOA,QAAP,KAAoB,QAArD,IAAkE9O,OAAO8O,QAAP,CAArE,EAAsF;EACpFtO,mBAAOwO,MAAP,IAAiBF,QAAjB;EACD,WAFD,MAEO;EACLtO,mBAAOwO,MAAP,IAAiBtQ,OAAOyE,MAAP,CAAc3C,OAAOwO,MAAP,CAAd,EAA8BF,QAA9B,CAAjB;EACD;EACF;EACF;EACF,KAdD,MAcO,IAAGhQ,IAAI5B,OAAJ,CAAY,GAAZ,IAAmB,CAAC,CAAvB,EAAyB;EAC9B4B,UAAImL,KAAJ,CAAU,GAAV,EAAerL,OAAf,CAAuB,mBAAS;EAC9BqQ,kBAAUA,QAAQ1E,IAAR,EAAV;;EACA,YAAG,OAAOhE,IAAIzH,GAAJ,CAAP,KAAoB,UAAvB,EAAkC;EAChC0B,iBAAOyO,OAAP,IAAkB1I,IAAIzH,GAAJ,CAAlB;EACD,SAFD,MAEO;EACL,cAAI,CAAC0B,OAAOX,cAAP,CAAsBoP,OAAtB,CAAD,IAAmC,OAAO1I,IAAIzH,GAAJ,CAAP,KAAoB,QAAxD,IAAqEkB,OAAOuG,IAAIzH,GAAJ,CAAP,CAAxE,EAAyF;EACvF0B,mBAAOyO,OAAP,IAAkB1I,IAAIzH,GAAJ,CAAlB;EACD,WAFD,MAEO;EACL0B,mBAAOyO,OAAP,IAAkBvQ,OAAOyE,MAAP,CAAc3C,OAAOyO,OAAP,MAAoB1P,QAAQgH,IAAIzH,GAAJ,CAAR,IAAoB,EAApB,GAAyB,EAA7C,CAAd,EAAgEyH,IAAIzH,GAAJ,CAAhE,EAA0EyH,IAAI0I,OAAJ,CAA1E,CAAlB;EACD;EACF;EACF,OAXD;EAYD,KAbM,MAaA;EACL,UAAG,OAAO1I,IAAIzH,GAAJ,CAAP,KAAoB,UAAvB,EAAkC;EAChC0B,eAAO1B,GAAP,IAAcyH,IAAIzH,GAAJ,CAAd;EACD,OAFD,MAEO;EACL,YAAI,OAAO0B,OAAO1B,GAAP,CAAP,KAAuB,QAAvB,IAAmC,OAAOyH,IAAIzH,GAAJ,CAAP,KAAoB,QAAxD,IAAqEkB,OAAOuG,IAAIzH,GAAJ,CAAP,CAAxE,EAAyF;EACvF0B,iBAAO1B,GAAP,IAAcyH,IAAIzH,GAAJ,CAAd;EACD,SAFD,MAEO;EACL0B,iBAAO1B,GAAP,IAAcJ,OAAOyE,MAAP,CAAc3C,OAAO1B,GAAP,CAAd,EAA2ByH,IAAIzH,GAAJ,CAA3B,CAAd;EACD;EACF;EACF;EACF;;EACD,SAAO0B,MAAP;EACD,CA3CM;;ECjIP;;;;;;;;;;;;;;;;ECEO,IAAM0O,UAAU,SAAVA,OAAU,CAAUC,QAAV,EAAmB;EACxC,MAAIC,IAAJ;EACA,MAAIC,GAAJ;;EAEA,MAAI;EACFA,UAAMF,YAAYjU,OAAOkS,QAAP,CAAgBkC,GAAhB,CAAoBC,QAApB,EAAlB;EACAH,WAAO,4HAA4HI,IAA5H,CAAiIH,GAAjI,CAAP;EACD,GAHD,CAGE,OAAO9T,CAAP,EAAS;EACT6T,WAAO,IAAP;EACD;;EAED,MAAGA,SAAS,IAAZ,EAAiB;EACf5T,YAAQiU,KAAR,CAAc,iBAAd,EAAiCN,QAAjC;EACA,WAAO;EACLE,WAAOA,OAAO,IADT;EAELpD,aAAO;EAFF,KAAP;EAID;;EAED,MAAMyD,WAAWN,KAAK,CAAL,CAAjB;EACA,MAAMO,UAAUP,KAAK,CAAL,CAAhB;EACA,MAAMQ,WAAWR,KAAK,CAAL,CAAjB;EACA,MAAMS,WAAWT,KAAK,CAAL,CAAjB;EACA,MAAMU,OAAOV,KAAK,CAAL,EAAQW,SAAR,CAAkB,CAAlB,CAAb;EACA,MAAMC,OAAOZ,KAAK,CAAL,IAAUA,KAAK,CAAL,CAAvB;EACA,MAAMa,QAAQb,KAAK,CAAL,CAAd;EACA,MAAMc,WAAWd,KAAK,CAAL,CAAjB;EACA,MAAMe,WAAW,yBAAyBX,IAAzB,CAA8BJ,KAAK,CAAL,IAAUA,KAAK,CAAL,CAAxC,EAAiD,CAAjD,CAAjB;EACA,MAAMgB,OAAOhB,KAAK,CAAL,IAAUA,KAAK,CAAL,CAAV,GAAoBA,KAAK,CAAL,CAApB,GAA8BA,KAAK,CAAL,CAA3C;;EACA,MAAMiB,SAAU,YAAW;EACzB,QAAM7P,SAAS,EAAf;;EACA,QAAGyP,KAAH,EAAS;EACPA,YAAMK,MAAN,CAAa,CAAb,EAAgBrG,KAAhB,CAAsB,GAAtB,EAA2BrL,OAA3B,CAAmC,UAAC2R,QAAD,EAAY;EAC7C,YAAMC,QAAQD,SAAStG,KAAT,CAAe,GAAf,CAAd;EACAzJ,eAAOiQ,UAAUD,MAAM,CAAN,CAAV,CAAP,IAA8BC,UAAUD,MAAM,CAAN,CAAV,CAA9B;EACD,OAHD;EAID;;EACD,WAAOhQ,MAAP;EACD,GATe,EAAhB;;EAWA,SAAO;EACL6O,YADK;EAELK,sBAFK;EAGLC,oBAHK;EAILC,sBAJK;EAKLC,sBALK;EAMLC,cANK;EAOLE,cAPK;EAQLC,gBARK;EASLC,sBATK;EAULC,sBAVK;EAWLC,cAXK;EAYLC,kBAZK;EAaLpE,WAAO;EAbF,GAAP;EAeD,CAvDM;AAyDP,EAAO,IAAMyE,YAAY,SAAZA,SAAY,CAAUnK,GAAV,EAAe6C,SAAf,EAAyB;EAChD,MAAMiH,SAAS,EAAf;EACA,MAAIM,UAAW,EAAf;EAEAjS,SAAOC,IAAP,CAAY4H,GAAZ,EAAiB3H,OAAjB,CAAyB,eAAK;EAC5B,QAAIqE,QAAQsD,IAAIzH,GAAJ,CAAZ;EACA,QAAI8R,cAAc,EAAlB;;EAEA,QAAG,OAAO3N,KAAP,KAAiB,WAApB,EAAgC;EAC9B;EACD,KAFD,MAEO,IAAGA,UAAU,IAAb,EAAkB;EACvB2N,oBAAc,EAAd;EACD,KAFM,MAEA,IAAGrR,QAAQ0D,KAAR,CAAH,EAAkB;EACvB,aAAOA,MAAM4N,IAAN,CAAW,UAACC,GAAD,EAAO;EACvB,eAAO1H,SAAP,KAAqB,UAArB,GACIiH,OAAO1P,IAAP,CAAYyI,UAAUtK,GAAV,IAAiB,GAAjB,GAAuBsK,UAAU0H,GAAV,CAAnC,CADJ,GAEIT,OAAO1P,IAAP,CAAY7B,MAAM,GAAN,GAAYgS,GAAxB,CAFJ;EAGD,OAJM,CAAP;EAKD,KANM,MAMA,IAAG,OAAO7N,KAAP,KAAiB,QAApB,EAA6B;EAClC,aAAO0N,QAAQhQ,IAAR,CAAa7B,GAAb,CAAP;EACD,KAFM,MAEA;EACL8R,oBAAc3N,QAAQ,EAAtB;EACD;;EAED,WAAOmG,SAAP,KAAqB,UAArB,GACIiH,OAAO1P,IAAP,CAAYyI,UAAUtK,GAAV,IAAiB,GAAjB,GAAuBsK,UAAUwH,WAAV,CAAnC,CADJ,GAEIP,OAAO1P,IAAP,CAAY7B,MAAM,GAAN,GAAY8R,WAAxB,CAFJ;EAGD,GAvBD;;EAyBA,MAAGD,QAAQ9S,MAAX,EAAkB;EAChB8S,cAAU,IAAV;EACD;;EAED,SAAON,OAAOnI,IAAP,CAAY,GAAZ,CAAP;EACD,CAlCM;;ECzDA,IAAM6I,4BAA4B,SAA5BA,yBAA4B,CAAU5E,EAAV,EAAa;EACpD,MAAM6E,gBAAsBhE,iBAAiBb,EAAjB,EAAqB,IAArB,CAA5B;EACA,MAAM8E,sBAAsBD,cAAc5H,SAAd,IAA2B4H,cAAcE,eAAzC,IAA4DF,cAAcG,YAA1E,IAA0FH,cAAcI,WAApI;EACA,MAAMC,IAAIJ,oBAAoBhH,KAApB,CAA0B,aAA1B,EAAyCqH,KAAzC,CAA+C,CAA/C,EAAkD,CAAC,CAAnD,CAAV;;EACA,MAAGD,EAAExT,MAAF,KAAa,CAAhB,EAAkB;EAChB,WAAO,CACL,CAAC,CAACwT,EAAE,CAAF,CAAF,EAAQ,CAACA,EAAE,CAAF,CAAT,EAAe,CAAf,EAAkB,CAACA,EAAE,CAAF,CAAnB,CADK,EAEL,CAAC,CAACA,EAAE,CAAF,CAAF,EAAQ,CAACA,EAAE,CAAF,CAAT,EAAe,CAAf,EAAkB,CAACA,EAAE,CAAF,CAAnB,CAFK,EAGL,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAHK,EAIL,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAJK,CAAP;EAMD,GAPD,MAOO,IAAGA,EAAExT,MAAF,KAAa,EAAhB,EAAmB;EACxB,WAAO,CACL,CAAC,CAACwT,EAAE,CAAF,CAAF,EAAQ,CAACA,EAAE,CAAF,CAAT,EAAe,CAACA,EAAE,CAAF,CAAhB,EAAsB,CAACA,EAAE,EAAF,CAAvB,CADK,EAEL,CAAC,CAACA,EAAE,CAAF,CAAF,EAAQ,CAACA,EAAE,CAAF,CAAT,EAAe,CAACA,EAAE,CAAF,CAAhB,EAAsB,CAACA,EAAE,EAAF,CAAvB,CAFK,EAGL,CAAC,CAACA,EAAE,CAAF,CAAF,EAAQ,CAACA,EAAE,CAAF,CAAT,EAAe,CAACA,EAAE,EAAF,CAAhB,EAAuB,CAACA,EAAE,EAAF,CAAxB,CAHK,EAIL,CAAC,CAACA,EAAE,CAAF,CAAF,EAAQ,CAACA,EAAE,CAAF,CAAT,EAAe,CAACA,EAAE,EAAF,CAAhB,EAAuB,CAACA,EAAE,EAAF,CAAxB,CAJK,CAAP;EAMD;;EACD,SAAO,IAAP;EACD,CApBM;EAsBP;;EACA,IAAME,cAAe,YAAW;EAC9B,MAAMC,iBAAiB;EACrBC,SAAK,CADgB;EAErBC,SAAK,CAFgB;EAGrBC,SAAK,CAHgB;EAIrBC,SAAK,CAJgB;EAKrBC,SAAK,CALgB;EAMrBC,SAAK,CANgB;EAOrBC,SAAK,CAPgB;EAQrBC,SAAK,CARgB;EASrBC,SAAK,CATgB;EAUrBC,SAAK,CAVgB;EAWrBC,SAAK,CAXgB;EAYrBC,SAAK,CAZgB;EAarBC,SAAK,CAbgB;EAcrBC,SAAK,CAdgB;EAerBC,SAAK,CAfgB;EAgBrBC,SAAK;EAhBgB,GAAvB;EAmBA,SAAO,UAAUC,WAAV,EAAsB;EAC3B,QAAIpB,IAAIoB,YAAYxI,KAAZ,CAAkB,aAAlB,EAAiCqH,KAAjC,CAAuC,CAAvC,EAA0C,CAAC,CAA3C,CAAR;EACA,QAAI5L,MAAJ;;EAEA,QAAG2L,EAAExT,MAAF,KAAa,CAAhB,EAAkB;EAChB;EACA6H,eAAS;EACP+L,aAAK,CAACJ,EAAE,CAAF,CADC;EAEPK,aAAK,CAACL,EAAE,CAAF,CAFC;EAGPM,aAAK,CAHE;EAIPC,aAAK,CAACP,EAAE,CAAF,CAJC;EAKPQ,aAAK,CAACR,EAAE,CAAF,CALC;EAMPS,aAAK,CAACT,EAAE,CAAF,CANC;EAOPU,aAAK,CAPE;EAQPC,aAAK,CAACX,EAAE,CAAF,CARC;EASPY,aAAK,CATE;EAUPC,aAAK,CAVE;EAWPC,aAAK,CAXE;EAYPC,aAAK,CAZE;EAaPC,aAAK,CAbE;EAcPC,aAAK,CAdE;EAePC,aAAK,CAfE;EAgBPC,aAAK;EAhBE,OAAT;EAkBD,KApBD,MAoBO,IAAGnB,EAAExT,MAAF,KAAa,EAAhB,EAAmB;EACxB;EACA6H,eAAS;EACP+L,aAAK,CAACJ,EAAE,CAAF,CADC;EAEPK,aAAK,CAACL,EAAE,CAAF,CAFC;EAGPM,aAAK,CAACN,EAAE,CAAF,CAHC;EAIPO,aAAK,CAACP,EAAE,EAAF,CAJC;EAKPQ,aAAK,CAACR,EAAE,CAAF,CALC;EAMPS,aAAK,CAACT,EAAE,CAAF,CANC;EAOPU,aAAK,CAACV,EAAE,CAAF,CAPC;EAQPW,aAAK,CAACX,EAAE,EAAF,CARC;EASPY,aAAK,CAACZ,EAAE,CAAF,CATC;EAUPa,aAAK,CAACb,EAAE,CAAF,CAVC;EAWPc,aAAK,CAACd,EAAE,EAAF,CAXC;EAYPe,aAAK,CAACf,EAAE,EAAF,CAZC;EAaPgB,aAAK,CAAChB,EAAE,CAAF,CAbC;EAcPiB,aAAK,CAACjB,EAAE,CAAF,CAdC;EAePkB,aAAK,CAAClB,EAAE,EAAF,CAfC;EAgBPmB,aAAK,CAACnB,EAAE,EAAF;EAhBC,OAAT;EAkBD,KApBM,MAoBA;EACL;EACA3L,eAAShH,OAAOyE,MAAP,CAAc,EAAd,EAAkBqO,cAAlB,CAAT;EACD;;EACD,WAAO9L,MAAP;EACD,GAjDD;EAkDD,CAtEoB,EAArB;EAwEA;;;AACA,EAAO,IAAMgN,sBAAsB,SAAtBA,mBAAsB,CAAUvG,EAAV,EAAa;EAC9C,MAAI6E,gBAAgBhE,iBAAiBb,EAAjB,EAAqB,IAArB,CAApB;EACA,MAAI2E,MAAUE,cAAc5H,SAAd,IAA2B4H,cAAcE,eAAzC,IAA4DF,cAAcG,YAA1E,IAA0FH,cAAcI,WAAtH;EACA,MAAI1L,SAAU6L,YAAYT,GAAZ,CAAd;EACA,MAAI6B,UAAU1R,KAAK2R,IAAL,CAAU,CAAClN,OAAOuM,GAAlB,CAAd;EACA,MAAIY,UAAU5R,KAAK6R,KAAL,CAAWpN,OAAOwM,GAAlB,EAAuBxM,OAAOyM,GAA9B,CAAd;EACA,MAAIY,UAAU9R,KAAK6R,KAAL,CAAWpN,OAAOmM,GAAlB,EAAuBnM,OAAO+L,GAA9B,CAAd;EAEA,SAAO;EACLuB,YAAQ;EACNxO,SAAGqO,OADG;EAENpO,SAAGkO,OAFG;EAGNjO,SAAGqO;EAHG,KADH;EAMLpJ,eAAW;EACTnF,SAAGkB,OAAOkM,GADD;EAETnN,SAAGiB,OAAOsM,GAFD;EAGTtN,SAAGgB,OAAO0M;EAHD,KANN;EAWL1M,YAAgBA,MAXX;EAYLuN,oBAAgBnC;EAZX,GAAP;EAcD,CAtBM;AAwBP,EAAO,IAAMoC,mBAAoB,UAAUxT,aAAV,EAAsBH,UAAtB,EAA8B;EAC7D,MAAM4T,sBAAsB,GAA5B;;EAEA,MAAMC,sBAAsB,SAAtBA,mBAAsB,CAAUnQ,KAAV,EAAiBoQ,OAAjB,EAAyB;EACnD3T,kBAAWuD,KAAX,KAAqBoQ,QAAQpQ,KAAR,CAArB;EACD,GAFD;;EAIA,MAAMqQ,2BAA2B,SAA3BA,wBAA2B,CAAUrQ,KAAV,EAAiBoQ,OAAjB,EAAyB;EACxD9T,eAAQ0D,KAAR,KAAkBoQ,QAAQpQ,KAAR,CAAlB;EACD,GAFD;;EAIA,MAAMsQ,eAAe,SAAfA,YAAe,CAAUtQ,KAAV,EAAiBuQ,IAAjB,EAAsB;EACzC,QAAG,OAAOvQ,KAAP,KAAiB,QAApB,EAA6B;EAC3B,kBAAUA,KAAV,GAAkBuQ,IAAlB;EACD;;EACD,QAAG,OAAOvQ,KAAP,KAAiB,QAAjB,IAA6BA,MAAMsH,IAAN,OAAiB,EAAjD,EAAoD;EAClD,aAAOtH,KAAP;EACD;;EACD,WAAO3G,SAAP;EACD,GARD;;EAUA,MAAMmX,kBAAkB,SAAlBA,eAAkB,CAAUC,GAAV,EAAeF,IAAf,EAAqB/S,CAArB,EAAuB;EAC7C,WAAO,UAACwC,KAAD,EAAS;EACd,UAAM0Q,aAAaJ,aAAatQ,KAAb,EAAoBuQ,IAApB,CAAnB;EACA,UAAGG,eAAerX,SAAlB,EAA6B;EAC7BoX,UAAIjT,CAAJ,IAASkT,UAAT;EACD,KAJD;EAKD,GAND;;EAQA,MAAMC,iBAAiB,SAAjBA,cAAiB,CAAUF,GAAV,EAAeF,IAAf,EAAoB;EACzC,WAAO,UAACK,UAAD,EAAc;EACnBA,iBAAWjV,OAAX,CAAmB,UAACqE,KAAD,EAAQxC,CAAR,EAAY;EAC7B,YAAMkT,aAAaJ,aAAatQ,KAAb,EAAoBuQ,IAApB,CAAnB;EACA,YAAGG,eAAerX,SAAlB,EAA6B;EAC7BoX,YAAIjT,CAAJ,IAASkT,UAAT;EACD,OAJD;EAKD,KAND;EAOD,GARD;;EAUA,MAAMG,sBAAsB,SAAtBA,mBAAsB,CAAUC,GAAV,EAAc;EACxC,WAAO,OAAOA,GAAP,KAAe,QAAf,GAA0B,CAACA,GAAD,EAAMA,GAAN,CAA1B,GAAuCA,GAA9C;EACD,GAFD;;EAIA,SAAO,UAAUC,KAAV,EAAgB;EACrB,QAAG,OAAOA,KAAP,KAAiB,QAApB,EAA6B;EAC3B,aAAO,EAAP;EACD;;EAHoB,QAIbC,UAJa,GAIiED,KAJjE,CAIbC,UAJa;EAAA,QAIDC,UAJC,GAIiEF,KAJjE,CAIDE,UAJC;EAAA,QAIWC,MAJX,GAIiEH,KAJjE,CAIWG,MAJX;EAAA,QAImBC,MAJnB,GAIiEJ,KAJjE,CAImBI,MAJnB;EAAA,QAI2BC,MAJ3B,GAIiEL,KAJjE,CAI2BK,MAJ3B;EAAA,QAImCxB,OAJnC,GAIiEmB,KAJjE,CAImCnB,OAJnC;EAAA,QAI4CF,OAJ5C,GAIiEqB,KAJjE,CAI4CrB,OAJ5C;EAAA,QAIqDI,OAJrD,GAIiEiB,KAJjE,CAIqDjB,OAJrD;EAAA,QAKfpJ,SALe,GAK8CqK,KAL9C,CAKfrK,SALe;EAAA,QAKJ2K,WALI,GAK8CN,KAL9C,CAKJM,WALI;EAAA,QAKSC,KALT,GAK8CP,KAL9C,CAKSO,KALT;EAAA,QAKgBC,OALhB,GAK8CR,KAL9C,CAKgBQ,OALhB;EAAA,QAKyBxB,MALzB,GAK8CgB,KAL9C,CAKyBhB,MALzB;EAAA,QAKiCyB,QALjC,GAK8CT,KAL9C,CAKiCS,QALjC;EAMrB9K,gBAAYmK,oBAAoBnK,SAApB,CAAZ;EACA2K,kBAAcR,oBAAoBQ,WAApB,CAAd;EACAC,YAAQT,oBAAoBS,KAApB,CAAR;EACAC,cAAUV,oBAAoBU,OAApB,CAAV;;EACA,QAAG,OAAOxB,MAAP,KAAkB,QAArB,EAA8B;EAC5BA,eAAS,CAAC1W,SAAD,EAAYA,SAAZ,EAAuB0W,MAAvB,CAAT;EACD;;EACD,QAAG,OAAOyB,QAAP,KAAoB,QAAvB,EAAgC;EAC9BA,iBAAW,CAACA,QAAD,CAAX;EACD;;EAED,QAAMC,gBAAgBlV,MAAM,CAAN,EAASmV,IAAT,CAAcxB,mBAAd,CAAtB;EACA,QAAMyB,YAAapV,MAAM,CAAN,EAASmV,IAAT,CAAcxB,mBAAd,CAAnB;EACA,QAAM0B,aAAarV,MAAM,CAAN,EAASmV,IAAT,CAAcxB,mBAAd,CAAnB;EACA,QAAMvI,cAAc2I,aAAaS,MAAMpJ,WAAnB,EAAgC,IAAhC,CAApB;EACA,QAAMpK,SAAS,EAAf;EAEA8S,6BAAyB3J,SAAzB,EAAoCiK,eAAec,aAAf,EAA8B,IAA9B,CAApC;EACApB,6BAAyBgB,WAAzB,EAAsCV,eAAec,aAAf,EAA8B,IAA9B,CAAtC;EACApB,6BAAyBiB,KAAzB,EAAgCX,eAAegB,SAAf,EAA0B,GAA1B,CAAhC;EACAtB,6BAAyBkB,OAAzB,EAAkCZ,eAAegB,SAAf,EAA0B,GAA1B,CAAlC;EACAtB,6BAAyBN,MAAzB,EAAiCY,eAAeiB,UAAf,EAA2B,KAA3B,CAAjC;EACAvB,6BAAyBmB,QAAzB,EAAmCb,eAAeiB,UAAf,EAA2B,KAA3B,CAAnC;EACAzB,wBAAoBa,UAApB,EAAgCR,gBAAgBiB,aAAhB,EAA+B,IAA/B,EAAqC,CAArC,CAAhC;EACAtB,wBAAoBc,UAApB,EAAgCT,gBAAgBiB,aAAhB,EAA+B,IAA/B,EAAqC,CAArC,CAAhC;EACAtB,wBAAoBe,MAApB,EAA4BV,gBAAgBmB,SAAhB,EAA2B,GAA3B,EAAgC,CAAhC,CAA5B;EACAxB,wBAAoBgB,MAApB,EAA4BX,gBAAgBmB,SAAhB,EAA2B,GAA3B,EAAgC,CAAhC,CAA5B;EACAxB,wBAAoBiB,MAApB,EAA4BZ,gBAAgBmB,SAAhB,EAA2B,GAA3B,EAAgC,CAAhC,CAA5B;EACAxB,wBAAoBP,OAApB,EAA6BY,gBAAgBoB,UAAhB,EAA4B,KAA5B,EAAmC,CAAnC,CAA7B;EACAzB,wBAAoBT,OAApB,EAA6Bc,gBAAgBoB,UAAhB,EAA4B,KAA5B,EAAmC,CAAnC,CAA7B;EACAzB,wBAAoBL,OAApB,EAA6BU,gBAAgBoB,UAAhB,EAA4B,KAA5B,EAAmC,CAAnC,CAA7B;EAEAjK,mBAAepK,OAAOG,IAAP,kBAA2BiK,WAA3B,OAAf;;EAEA,QAAG8J,cAAclT,IAAd,CAAmB;EAAA,aAAGnD,MAAM8U,mBAAT;EAAA,KAAnB,CAAH,EAAoD;EAClDuB,oBAAc,CAAd,MAAqBvB,mBAArB,GACI3S,OAAOG,IAAP,gBAAyB+T,cAAc,CAAd,CAAzB,SAA6CA,cAAc,CAAd,CAA7C,OADJ,GAEIlU,OAAOG,IAAP,kBAA2B+T,cAAc,CAAd,CAA3B,SAA+CA,cAAc,CAAd,CAA/C,SAAmEA,cAAc,CAAd,CAAnE,OAFJ;EAGD;;EACD,QAAGE,UAAUpT,IAAV,CAAe;EAAA,aAAGnD,MAAM8U,mBAAT;EAAA,KAAf,CAAH,EAAgD;EAC9CyB,gBAAU,CAAV,MAAiBzB,mBAAjB,GACI3S,OAAOG,IAAP,YAAqBiU,UAAU,CAAV,CAArB,SAAqCA,UAAU,CAAV,CAArC,OADJ,GAEIpU,OAAOG,IAAP,cAAuBiU,UAAU,CAAV,CAAvB,SAAuCA,UAAU,CAAV,CAAvC,SAAuDA,UAAU,CAAV,CAAvD,OAFJ;EAGD;;EACD,QAAGC,WAAWrT,IAAX,CAAgB;EAAA,aAAGnD,MAAM8U,mBAAT;EAAA,KAAhB,CAAH,EAAiD;EAC/C,UAAG0B,WAAW,CAAX,MAAkB1B,mBAAlB,IAAyC0B,WAAW,CAAX,MAAkB1B,mBAA3D,IAAkF0B,WAAW,CAAX,MAAkB1B,mBAAvG,EAA2H;EACzH,eAAO3S,OAAOG,IAAP,aAAsBkU,WAAW,CAAX,CAAtB,OAAP;EACD;;EACD,UAAGA,WAAW,CAAX,MAAkB1B,mBAArB,EAAyC;EACvC3S,eAAOG,IAAP,qBAA8BkU,WAAW,CAAX,CAA9B;EACD;;EACD,UAAGA,WAAW,CAAX,MAAkB1B,mBAArB,EAAyC;EACvC3S,eAAOG,IAAP,qBAA8BkU,WAAW,CAAX,CAA9B;EACD;;EACD,UAAGA,WAAW,CAAX,MAAkB1B,mBAArB,EAAyC;EACvC3S,eAAOG,IAAP,qBAA8BkU,WAAW,CAAX,CAA9B;EACD;EACF;;EAED,WAAOrU,OAAO0H,IAAP,CAAY,GAAZ,CAAP;EACD,GAlED;EAmED,CA9GgC,CA8G/BxI,UA9G+B,EA8GnBH,OA9GmB,CAA1B;;ECzHA,IAAMuV,oBAAoB,SAApBA,iBAAoB,CAAUpK,MAAV,EAAkBpN,KAAlB,EAAwB;EACvD,MAAIyX,SAAS,EAAb;EAEArK,SAAO9L,OAAP,CAAe,UAACgJ,KAAD,EAAQlF,KAAR,EAAgB;EAC7B,QAAMsS,SAAStS,UAAU,CAAV,GAAc,GAAd,GAAoB,GAAnC;EACAqS,mBAAaC,MAAb,GAAsBpN,MAAMpD,CAA5B,SAAiCoD,MAAMnD,CAAvC;EACD,GAHD;;EAKA,MAAG,CAAC,CAACsQ,MAAF,IAAYzX,UAAU,IAAzB,EAA8B;EAC5ByX,cAAU,IAAV;EACD;;EAED,SAAOA,MAAP;EACD,CAbM;;EAeP,IAAME,aAAa,SAAbA,UAAa,GAAW;EAC5B,OAAKC,YAAL,GAAoB,EAApB;EACD,CAFD;;EAIAD,WAAW/R,SAAX,GAAuB;EACrBiS,SADqB,mBACZhO,MADY,EACJiO,UADI,EACO;EAC1B,SAAKF,YAAL,CAAkBvU,IAAlB,CAAuB;EACrB0U,WAAQ,MADa;EAErBD,4BAFqB;EAGrB/E,cAAQlJ;EAHa,KAAvB;EAKA,WAAO,IAAP;EACD,GARoB;EASrBmO,eATqB,2BASL;EACd,QAAMC,SAASnI,SAASoI,eAAT,CAAyB,4BAAzB,EAAuD,KAAvD,CAAf;EACA,QAAIC,eAAgB,CAApB;EACA,QAAIC,gBAAgB,CAApB;EAEA,SAAKR,YAAL,CAAkBtW,OAAlB,CAA0B,gBAA8B;EAAA,UAA3ByW,GAA2B,QAA3BA,GAA2B;EAAA,UAAtBD,UAAsB,QAAtBA,UAAsB;EAAA,UAAV/E,MAAU,QAAVA,MAAU;;EACtD,UAAGgF,QAAQ,MAAX,EAAkB;EAChB,YAAMM,cAAcvI,SAASoI,eAAT,CAAyB,4BAAzB,EAAuD,MAAvD,CAApB;;EAEA,YAAG,OAAOJ,UAAP,KAAsB,QAAzB,EAAkC;EAChCA,uBAAa,EAAb;EACD;;EAEDO,oBAAYC,YAAZ,CAAyB,MAAzB,EAAiCR,WAAW,MAAX,KAAsB,aAAvD;EACAO,oBAAYC,YAAZ,CAAyB,QAAzB,EAAmCR,WAAW,QAAX,KAAwB,MAA3D;EACAO,oBAAYC,YAAZ,CAAyB,cAAzB,EAAyCR,WAAW,aAAX,KAA6BA,WAAW,cAAX,CAA7B,IAA2D,GAApG;EACAO,oBAAYC,YAAZ,CAAyB,gBAAzB,EAA2C,MAA3C;EACAD,oBAAYC,YAAZ,CAAyB,iBAAzB,EAA4C,OAA5C;EAEA,YAAMb,SAASD,kBAAkBzE,MAAlB,CAAf;EACAA,eAAOzR,OAAP,CAAe,iBAAO;EACpB,cAAGgJ,MAAMpD,CAAN,GAAUiR,YAAb,EAA2BA,eAAe7N,MAAMpD,CAArB;EAC3B,cAAGoD,MAAMnD,CAAN,GAAUiR,aAAb,EAA4BA,gBAAgB9N,MAAMnD,CAAtB;EAC7B,SAHD;EAKAkR,oBAAYC,YAAZ,CAAyB,GAAzB,EAA8Bb,MAA9B;EACAQ,eAAOM,WAAP,CAAmBF,WAAnB;EACD;EACF,KAvBD;EAwBAJ,WAAOK,YAAP,CAAoB,OAApB,EAA6B,mBAA7B;EACAL,WAAOK,YAAP,CAAoB,OAApB,EAA6BH,YAA7B;EACAF,WAAOK,YAAP,CAAoB,QAApB,EAA8BF,aAA9B;EACA,WAAOH,MAAP;EACD;EA1CoB,CAAvB;AA6CA,EAAO,IAAMO,UAAU,SAAVA,OAAU,GAAW;EAChC,SAAO,IAAIb,UAAJ,EAAP;EACD,CAFM;;EC/DP,IAAMc,IAAIC,QAAQ,QAAR,CAAV;;EAEA,IAAMC,mBAAmB,SAAnBA,gBAAmB,CAAUC,aAAV,EAAyBC,eAAzB,EAAyC;EAChE,MAAI3V,SAAS0V,cAAcE,aAAd,IAA+BF,cAAcG,MAA1D;EACA,SAAQ7V,UAAUA,OAAOgN,eAAlB,GAAsC2I,mBAAmB3V,OAAOgN,eAAhE,GAAmFJ,SAASI,eAAnG;EACD,CAHD;;EAKA,IAAM8I,iBAAiBP,EAAEO,cAAF,GAAmB,UAAU/a,CAAV,EAAY;EACpD,SAAO,OAAOA,EAAEgb,eAAT,KAA6B,UAApC;EACD,CAFD;;EAIA,IAAMC,qBAAqBT,EAAES,kBAAF,GAAuB,UAAUrK,EAAV,EAAa;EAAA,WAC3C4J,EAAE5J,EAAF,CAD2C;EAAA,MACvDsK,OADuD;;EAG7D,MAAG,CAACA,OAAJ,EAAa,OAAO,IAAP;EAEb,MAAIC,YAAY,CAAhB;EACA,MAAIC,YAAY,CAAhB;;EAEA,SAAMF,WAAW,CAACA,QAAQjJ,eAA1B,EAA0C;EACxCkJ,iBAAcD,QAAQjK,UAAR,GAAqBiK,QAAQ/I,UAA7B,GAA0C+I,QAAQG,UAAhE;EACAD,iBAAcF,QAAQhK,SAAR,GAAoBgK,QAAQ5I,SAA5B,GAAwC4I,QAAQI,SAA9D;EACAJ,cAAUA,QAAQ7J,YAAlB;EACD;;EAED,SAAO;EAACpI,OAAGkS,SAAJ;EAAejS,OAAGkS;EAAlB,GAAP;EACD,CAfD;;EAkBA,IAAMG,qBAAqBf,EAAEe,kBAAF,GAAuB,UAAUvb,CAAV,EAAawb,IAAb,EAAkB;EAClEA,SAAO,CAACA,IAAD,GAAQ3J,SAASI,eAAjB,GAAmCuJ,IAA1C;EAEA,MAAMC,MAAMR,mBAAmBO,IAAnB,CAAZ;EAEA,MAAG,CAACC,GAAJ,EAAS;EAETA,MAAIxS,CAAJ,GAAQ,CAACjJ,EAAE0b,OAAF,GAAY1b,EAAE2b,aAAF,CAAgB,CAAhB,EAAmBC,KAA/B,GAAuC5b,EAAE4b,KAA1C,IAAmDH,IAAIxS,CAA/D;EACAwS,MAAIvS,CAAJ,GAAQ,CAAClJ,EAAE0b,OAAF,GAAY1b,EAAE2b,aAAF,CAAgB,CAAhB,EAAmBE,KAA/B,GAAuC7b,EAAE6b,KAA1C,IAAmDJ,IAAIvS,CAA/D;EAEA,SAAOuS,GAAP;EACD,CAXD;;EAaAjB,EAAExV,EAAF,CAAK8W,MAAL,CAAY;EACV;EACAC,YAFU,sBAEEC,IAFF,EAEO;EAAA,gBACExB,EAAEwB,IAAF,EAAQtP,EAAR,CAAW,CAAX,CADF;EAAA,QACToO,MADS;;EAEf,QAAGA,MAAH,EAAU;EACR,WAAI,IAAI5V,IAAI,CAAR,EAAWC,IAAI,KAAK7C,MAAxB,EAAgC4C,IAAIC,CAApC,EAAuCD,GAAvC,EAA2C;EACzC,YAAG,KAAKA,CAAL,MAAY4V,MAAf,EAAuB,OAAO,IAAP;EACvB,YAAG,KAAKpO,EAAL,CAAQxH,CAAR,EAAW+W,IAAX,CAAgBnB,MAAhB,EAAwBxY,MAA3B,EAAmC,OAAO,IAAP;EACpC;EACF;;EACD,WAAO,KAAP;EACD,GAXS;EAYV;EACA4Z,aAbU,uBAaGF,IAbH,EAaQ;EAChB,WAAO,CAAC,KAAKD,UAAL,CAAgBC,IAAhB,CAAR;EACD,GAfS;;EAgBV;;;;;;;;;;EAUAG,SA1BU,mBA0BDC,MA1BC,EA0BOZ,IA1BP,EA0BY;EAAA,mBACA,KAAK9O,EAAL,CAAQ,CAAR,CADA;EAAA,QACZwO,OADY;;EAEpB,QAAG,CAACA,OAAJ,EAAa;;EAFO,eAIyCA,QAAQ,YAAR,IAAwB;EACnFhK,iBAAc,CADqE;EAEnFD,kBAAc,CAFqE;EAGnFE,mBAAcxR,OAAO0c,UAH8D;EAInFjL,oBAAczR,OAAO2c;EAJ8D,KAAxB,GAKzDpB,OATgB;EAAA,QAIZhK,SAJY,QAIZA,SAJY;EAAA,QAIDD,UAJC,QAIDA,UAJC;EAAA,QAIWE,WAJX,QAIWA,WAJX;EAAA,QAIwBC,YAJxB,QAIwBA,YAJxB;;EAWpB,QAAMnM,SAAS;EACbgJ,WAAQiD,SADK;EAEblD,YAAQiD,UAFK;EAGbxG,aAAQ0G,WAHK;EAIbvG,cAAQwG,YAJK;EAKb7C,aAAQ0C,aAAaE,WALR;EAMb3C,cAAQ0C,YAAYE,YANP;EAObmL,cAAQtL,aAAaE,cAAc,CAPtB;EAQbqL,cAAQtL,YAAYE,eAAe,CARtB;EAaf;EACA;EACA;;EAfe,KAAf;;EAiBA,QAAG7M,cAAc6X,MAAd,CAAH,EAAyB;EACvB;EACA,UAAMK,WAAW,CAAC,KAAD,EAAQ,MAAR,EAAgB,OAAhB,EAAyB,QAAzB,EAAmC,OAAnC,EAA4C,QAA5C,EAAsD,QAAtD,EAAgE,QAAhE,EAA0EC,MAA1E,CAAiF;EAAA,eAAKN,OAAO9X,cAAP,CAAsBf,GAAtB,CAAL;EAAA,OAAjF,CAAjB,CAFuB;;EAKvBkZ,eAASpZ,OAAT,CAAiB,UAACE,GAAD,EAAO;EACtB,YAAMoZ,cAAcP,OAAO7Y,GAAP,CAApB;EACA,YAAG,CAACwX,eAAe4B,WAAf,CAAJ,EAAiC;EACjC,YAAMC,kBAAkBrB,mBAAmBoB,WAAnB,EAAgCnB,QAAQd,iBAAiBiC,WAAjB,EAA8BzB,OAA9B,CAAR,IAAkDA,OAAlF,CAAxB;EACA,YAAG,CAAC0B,eAAJ,EAAqB;;EAErB,YAAG,0BAA0BpL,IAA1B,CAA+BjO,GAA/B,CAAH,EAAuC;EACrC6Y,iBAAO7Y,GAAP,IAAcqZ,gBAAgB,GAAhB,CAAd;EACD;;EAED,YAAG,2BAA2BpL,IAA3B,CAAgCjO,GAAhC,CAAH,EAAwC;EACtC6Y,iBAAO7Y,GAAP,IAAcqZ,gBAAgB,GAAhB,CAAd;EACD;EACF,OAbD;EAeAH,eAASpZ,OAAT,CAAiB,UAACE,GAAD,EAAO;EACtB,YAAG,OAAO6Y,OAAO7Y,GAAP,CAAP,KAAuB,QAA1B,EAAoC;EAEpC,YAAMsZ,aAAa5X,OAAO1B,GAAP,CAAnB;EACA,YAAIuZ,QAAJ;;EAEA,gBAAQvZ,GAAR;EACE,eAAK,KAAL;EACA,eAAK,QAAL;EACEuZ,uBAAW,CAAC,GAAD,EAAMV,OAAO7Y,GAAP,IAAcsZ,UAApB,CAAX;EACA;;EACF,eAAK,MAAL;EACA,eAAK,QAAL;EACEC,uBAAW,CAAC,GAAD,EAAMV,OAAO7Y,GAAP,IAAcsZ,UAApB,CAAX;EACA;;EACF,eAAK,OAAL;EACEC,uBAAW,CAAC,OAAD,EAAUV,OAAO7Y,GAAP,IAAcsZ,UAAxB,CAAX;EACA;;EACF,eAAK,QAAL;EACEC,uBAAW,CAAC,QAAD,EAAWV,OAAO7Y,GAAP,IAAcsZ,UAAzB,CAAX;EACA;;EACF,eAAK,OAAL;EACE;;EACF,eAAK,QAAL;EACE;EAlBJ;;EAqBA,gBAAQC,YAAYA,SAAS,CAAT,CAApB;EACE,eAAK,GAAL;EACE7X,mBAAO,MAAP,KAAkB6X,SAAS,CAAT,CAAlB;EACA7X,mBAAO,QAAP,KAAoB6X,SAAS,CAAT,CAApB;EACA7X,mBAAO,OAAP,KAAmB6X,SAAS,CAAT,CAAnB;EACA;;EACF,eAAK,GAAL;EACE7X,mBAAO,KAAP,KAAiB6X,SAAS,CAAT,CAAjB;EACA7X,mBAAO,QAAP,KAAoB6X,SAAS,CAAT,CAApB;EACA7X,mBAAO,QAAP,KAAoB6X,SAAS,CAAT,CAApB;EACA;;EACF,eAAK,OAAL;EACE7X,mBAAO,OAAP,KAAmB6X,SAAS,CAAT,CAAnB;EACA7X,mBAAO,OAAP,KAAmB6X,SAAS,CAAT,CAAnB;EACA7X,mBAAO,QAAP,KAAqBA,OAAO,OAAP,IAAkBA,OAAO,MAAP,IAAiB,CAAxD;EACA;;EACF,eAAK,QAAL;EACEA,mBAAO,QAAP,KAAoB6X,SAAS,CAAT,CAApB;EACA7X,mBAAO,QAAP,KAAoB6X,SAAS,CAAT,CAApB;EACA7X,mBAAO,QAAP,KAAqBA,OAAO,QAAP,IAAmBA,OAAO,KAAP,IAAgB,CAAxD;EACA;EApBJ;EAsBD,OAjDD;EAkDD;;EAED,WAAOA,MAAP;EACD;EA/HS,CAAZ;;ECxCA,IAAM8X,eAAiB,kBAAkBpd,MAAnB,IAA8BA,OAAOqd,aAAP,IAAwBnL,oBAAoBmL,aAA3E,GACjB;EACAC,gBAAc,IADd;EAEAC,SAAc,YAFd;EAGAC,QAAc,WAHd;EAIAC,OAAc;EAJd,CADiB,GAOjB;EACAH,gBAAc,KADd;EAEAC,SAAc,WAFd;EAGAC,QAAc,WAHd;EAIAC,OAAc,SAJd;;EAAA,CAPJ;EAeA,IAAIC,kBAAkB,CAAtB;;EAGA,IAAMC,wBAAwB,SAAxBA,qBAAwB,GAAW;EACvC,MAAGD,kBAAkB,CAArB,EAAuB;EACrBxL,aAASN,IAAT,CAAc8I,YAAd,CAA2B,UAA3B,EAAuC,EAAvC;EACD,GAFD,MAEO;EACLxI,aAASN,IAAT,CAAcgM,eAAd,CAA8B,UAA9B;EACD;EACF,CAND;;;EASAR,aAAaE,YAAb,IAA6Btd,OAAOU,gBAAP,CAAwB,WAAxB,EAAqC,UAACL,CAAD,EAAK;EACrEqd,oBAAkB,CAAlB,IAAuBrd,EAAEwd,cAAF,EAAvB;EACD,CAF4B,EAE1B;EAACC,WAAS;EAAV,CAF0B,CAA7B;;EAMA,IAAIC,SAAJ;EACA,IAAIC,SAAJ;;EACA,IAAMC,eAAe,SAAfA,YAAe,OAAiC;EAAA,MAA9BC,OAA8B,QAA9BA,OAA8B;EAAA,MAArBC,OAAqB,QAArBA,OAAqB;EAAA,MAAZpC,OAAY,QAAZA,OAAY;;EACpD,MAAGA,OAAH,EAAW;EACT,QAAG,CAACA,QAAQ,CAAR,CAAJ,EAAe;EACb,aAAO;EACLzS,WAAGyU,SADE;EAELxU,WAAGyU;EAFE,OAAP;EAID;EANQ,oBAQ8CjC,QAAQ,CAAR,CAR9C;EAAA,QAQOqC,YARP,aAQDF,OARC;EAAA,QAQ6BG,YAR7B,aAQqBF,OARrB;EASTJ,gBAAYK,YAAZ;EACAJ,gBAAYK,YAAZ;EAEA,WAAO;EACL/U,SAAG8U,YADE;EAEL7U,SAAG8U;EAFE,KAAP;EAID;;EACD,SAAO;EACL/U,OAAG4U,OADE;EAEL3U,OAAG4U;EAFE,GAAP;EAID,CAtBD;;AAwBA,EAAe,SAASG,UAAT,CAAqB/C,OAArB,EAA8BkB,MAA9B,EAAqC;EAClD,MAAM8B,WAAW1D,EAAEU,OAAF,EAAWxO,EAAX,CAAc,CAAd,CAAjB;EADkD,MAE1CyR,WAF0C,GAE1BD,QAF0B;EAGlD,MAAIE,OAAJ;EACA,MAAIC,MAAJ;EACA,MAAIC,KAAJ;EAEA,MAAIC,aAAa,IAAjB;EACA,MAAIC,YAAa,IAAjB;EACA,MAAIC,WAAa,IAAjB;;EAEA,MAAMC,eAAe,SAAfA,YAAe,GAAW;EAC9B,QAAMC,aAAatL,OAAO,OAAO+I,MAAP,KAAkB,UAAlB,GAA+BA,OAAO;EAAElB,eAASgD;EAAX,KAAP,CAA/B,GAA+D9B,MAAtE,CAAnB;EACAgC,cAAUO,WAAW,OAAX,CAAV;EACAN,aAASM,WAAW,MAAX,CAAT;EACAL,YAAQK,WAAW,KAAX,CAAR;EACD,GALD;;EAOA,MAAMC,wBAAwB,SAAxBA,qBAAwB,CAAUjE,aAAV,EAAwB;EACpD,QAAMkE,cAAcjB,aAAajD,aAAb,CAApB,CADoD;;EAIpDkE,gBAAYC,KAAZ,GAAoBD,YAAY5V,CAAZ,GAAgBwV,SAASxV,CAA7C;EACA4V,gBAAYE,KAAZ,GAAoBF,YAAY3V,CAAZ,GAAgBuV,SAASvV,CAA7C,CALoD;;EAQpD2V,gBAAY9M,OAAZ,GAAsB8M,YAAY5V,CAAZ,GAAgBuV,UAAUvV,CAAhD;EACA4V,gBAAYzM,OAAZ,GAAsByM,YAAY3V,CAAZ,GAAgBsV,UAAUtV,CAAhD,CAToD;;EAYpD2V,gBAAYG,SAAZ,GAAwBT,WAAWU,MAAX,CAAkBjR,IAAlB,GAAyB6Q,YAAY9M,OAA7D;EACA8M,gBAAYK,QAAZ,GAAuBX,WAAWU,MAAX,CAAkBhR,GAAlB,GAAwB4Q,YAAYzM,OAA3D;EAEAyM,gBAAY7Q,IAAZ,GAAmB6Q,YAAYG,SAAZ,GAAwB,IAA3C;EACAH,gBAAY5Q,GAAZ,GAAkB4Q,YAAYK,QAAZ,GAAuBL,YAAYzM,OAAnC,GAA6C,IAA/D;EAEA,WAAOyM,WAAP;EACD,GAnBD;;EAqBA,MAAMM,YAAY,SAAZA,SAAY,CAAUxE,aAAV,EAAwB;EACxC;EACA+D,mBAFwC;;EAKxC,QAAMU,gBAAgBlB,SAAS/B,OAAT,EAAtB;EACA,QAAM0C,cAAgBjB,aAAajD,aAAb,CAAtB;EAEA6D,gBAAYK,WAAZ;EACAJ,eAAWI,WAAX;EAEAN,iBAAa;EAAEU,cAAQG,aAAV;EAAyBC,eAASte,SAAlC;EAA6Cue,aAAO3E;EAApD,KAAb;EACA4D,eAAWc,OAAX,GAAqBT,sBAAsBjE,aAAtB,CAArB;EAEAyD,eAAWA,QAAQG,UAAR,CAAX;EAEA1M,aAASxR,gBAAT,CAA0B0c,aAAaI,IAAvC,EAA6CoC,QAA7C;EACA1N,aAASxR,gBAAT,CAA0B0c,aAAaK,GAAvC,EAA4CoC,QAA5C;EAEAnC,uBAAmB,CAAnB;EACAC;EACD,GArBD;;EAuBA,MAAMiC,WAAW,SAAXA,QAAW,CAAU5E,aAAV,EAAwB;EACvC,QAAMkE,cAAcjB,aAAajD,aAAb,CAApB;;EAEA,QAAG,CAAC0D,MAAJ,EAAW;EACTI,iBAAWI,WAAX;EACA;EACD,KAHD,MAGO;EACLN,iBAAWc,OAAX,GAAqBT,sBAAsBjE,aAAtB,CAArB;EACA4D,iBAAWe,KAAX,GAAmB3E,aAAnB;EACA0D,aAAOE,UAAP;EACAE,iBAAWI,WAAX;EACD;EACF,GAZD;;EAcA,MAAMW,WAAW,SAAXA,QAAW,CAAU7E,aAAV,EAAwB;EACvC4D,eAAWc,OAAX,GAAqBT,sBAAsBjE,aAAtB,CAArB;EACA4D,eAAWe,KAAX,GAAmB3E,aAAnB;EACA2D,aAASA,MAAMC,UAAN,CAAT;EACAA,iBAAaxd,SAAb;EAEA8Q,aAAS4N,mBAAT,CAA6B1C,aAAaI,IAA1C,EAAgDoC,QAAhD;EACA1N,aAAS4N,mBAAT,CAA6B1C,aAAaK,GAA1C,EAA+CoC,QAA/C;EAEAnC,uBAAmB,CAAnB;EACAC;EACD,GAXD;;EAaAa,cAAY9d,gBAAZ,CAA6B,WAA7B,EAA0C,UAAUL,CAAV,EAAY;EACpDA,MAAEwd,cAAF;EACD,GAFD;EAIAW,cAAY9d,gBAAZ,CAA6B0c,aAAaG,KAA1C,EAAiDiC,SAAjD;EAEA,SAAOjB,QAAP;EACD;;EC7Jc,SAASwB,YAAT,OAA4E;EAAA,MAAnDnc,GAAmD,QAAnDA,GAAmD;EAAA,MAAxCoc,OAAwC,QAA9CC,KAA8C;EAAA,MAAxBC,QAAwB,QAA/BC,MAA+B;EAAA,MAATC,MAAS,QAAdC,IAAc;EACzF;EACA,MAAIC,SAAS,EAAb,CAFyF;;EAKzF,MAAMC,SAAS,OAAO3c,GAAP,KAAe,UAAf,GAA4BA,GAA5B,GAAkC,UAAUgE,KAAV,EAAgB;EAC/D,WAAOA,MAAMhE,GAAN,CAAP;EACD,GAFD,CALyF;;EAUzF,MAAM4c,WAAW,SAAXA,QAAW,CAAU1gB,IAAV,EAAe;EAC9B,QAAI2gB,UAAUxb,QAAQnF,IAAR,CAAd;EACA,QAAI4gB,SAAU,EAAd,CAF8B;;EAK9BD,YAAQ/c,OAAR,CAAgB,UAACkE,KAAD,EAAQJ,KAAR,EAAgB;EAC9B;EACA,UAAMmZ,cAAcJ,OAAO3Y,KAAP,KAAiBJ,KAArC,CAF8B;;EAK9B,UAAMoZ,UAAU;EACdhd,aAAO+c,WADO;EAEd/Y,eAAOA,KAFO;;EAAA,OAAhB;EAMA,UAAMiZ,eAAeP,OAAOhE,IAAP,CAAY;EAAA,eAAKwE,IAAIld,GAAJ,KAAY+c,WAAjB;EAAA,OAAZ,CAArB,CAX8B;;EAc9B,UAAGE,YAAH,EAAgB;EACd;EACAD,gBAAQG,EAAR,GAAaF,aAAaE,EAA1B;EACAF,qBAAaG,SAAb,GAAyB,IAAzB;EACD;;EAEDN,aAAOjb,IAAP,CAAYmb,OAAZ;EACD,KArBD,EAL8B;;EA6B9BN,WAAO5c,OAAP,CAAe,mBAAS;EACtB,UAAG,CAACud,QAAQD,SAAZ,EAAsB;EACpBZ,eAAOa,OAAP;EACD;EACF,KAJD,EA7B8B;;EAoC9BP,WAAOhd,OAAP,CAAe,UAACkd,OAAD,EAAUpZ,KAAV,EAAkB;EAC/B,UAAM0Z,WAAWR,OAAOlZ,QAAQ,CAAf,CAAjB;;EACA,UAAG0Z,YAAYA,SAAS,IAAT,CAAf,EAA8B;EAC5BN,gBAAQ,QAAR,IAAoBM,SAAS,IAAT,CAApB;EACD;EACF,KALD,EApC8B;;EA4C9BR,WAAOhd,OAAP,CAAe,UAACkd,OAAD,EAAUpZ,KAAV,EAAkB;EAC/B,UAAG,CAACoZ,QAAQG,EAAZ,EAAe;EACb,YAAIzb,SAAS0a,QAAQY,OAAR,EAAiBpZ,KAAjB,CAAb;;EACA,YAAG,CAAClC,MAAJ,EAAW;EACT,gBAAM,IAAI6F,KAAJ,CAAU,yBAAV,CAAN;EACD,SAFD,MAEO;EACLyV,kBAAQ,IAAR,IAAgBtb,MAAhB;EACD;EACF;EACF,KATD,EA5C8B;;EAwD9B4a,gBAAYQ,OAAOhd,OAAP,CAAe,UAACkd,OAAD,EAAUpZ,KAAV,EAAkB;EAC3C0Y,eAASU,OAAT,EAAkBpZ,KAAlB;EACD,KAFW,CAAZ,CAxD8B;;EA6D9B8Y,aAASI,MAAT;EACD,GA9DD,CAVyF;;;EA2EzFF,WAAS,IAAT,IAAiB,YAAW;EAC1B,WAAOF,OAAO1X,GAAP,CAAW;EAAA,aAAGiL,EAAEkN,EAAL;EAAA,KAAX,CAAP;EACD,GAFD;;EAIA,SAAOP,QAAP;EACD;;EC/EM,IAAMW,aAAeC,UAArB;AACP,EAAO,IAAMC,eAAeC,YAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECHP,IAAMC,4BAAeC,OAAf,CAAN;;;;;;;;"}