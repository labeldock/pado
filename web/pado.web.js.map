{"version":3,"file":"pado.web.js","sources":["../.src/web/env/window.js","../.src/web/env/storage.js","../.src/functions/isLike.js","../.src/functions/cast.js","../.src/functions/enumerable.js","../.src/functions/matrix.js","../.src/modules/dimension.js","../.src/web/env/dom.js","../.src/functions/functions.js","../.src/functions/draw.js","../.src/web/env/url.js","../.src/web/plugins/jquery.js","../.src/web/helper/dragHelper.js","../.src/web/helper/repeatHelper.js","../.src/web/helper/index.js","../.src/pado.web.js"],"sourcesContent":["const { windowServiceReserveSession, getOpenerPresenceProperties } = (function(){\n  //to children\n  const reservedSessionStorage = {};\n  \n  //my window\n  let pulledWindowToken;\n  let pulledWindowSession;\n  let openerPresenceProps;\n  \n  //(부모) 윈도우의 정보를 저장\n  const windowServiceReserveSession = function(name,data,listenHandshake){\n    if(listenHandshake === true){\n      window.windowServiceHandshake = function(){\n        delete window.windowServiceHandshake;\n        return name;\n      };\n    }\n    reservedSessionStorage[name] = data;\n    console.log('reservedSessionStorage',reservedSessionStorage);\n    return reservedSessionStorage[name];\n  };\n\n  //자식에게 세션을 당겨올수 있도록 지원\n  const windowServicePullSession = function(name){\n    //console.log(\"windowServicePullSession\",name);\n    var data = reservedSessionStorage[name];\n    delete reservedSessionStorage[name];\n    return data;\n  };\n  \n  //\n  const getOpenerPresenceProperties = function(){\n    if(typeof openerPresenceProps === \"function\"){\n      return openerPresenceProps()\n    }\n    return openerPresenceProps;\n  };\n  \n  window.windowServiceReserveSession = windowServiceReserveSession;\n  window.windowServicePullSession    = windowServicePullSession;\n\n  try {\n    if(window.opener && window.opener.windowServiceHandshake){\n      pulledWindowToken = window.opener.windowServiceHandshake();\n    }\n  } catch(e){\n    console.warn(\"window.opener.windowServiceHandshake error\");\n  }\n    \n  if(pulledWindowToken && window.opener && window.opener.windowServicePullSession){\n    pulledWindowSession  = window.opener.windowServicePullSession(pulledWindowToken);\n    openerPresenceProps = pulledWindowSession;\n    \n    //임의로 언로드 됐을때 세션을 임시 저장\n    var saveSessionFn = function(){\n      try {\n        window.opener &&\n        window.opener.windowServiceReserveSession &&\n        window.opener.windowServiceReserveSession(pulledWindowSession.token,pulledWindowSession,true);\n      } catch(e) {\n        console.warn(\"Parent window not found.\",e);\n      }\n    };\n    \n    window.addEventListener(\"beforeunload\",saveSessionFn);\n  }\n  \n  return { windowServiceReserveSession, getOpenerPresenceProperties };\n}());\n\nexport const windowProps = getOpenerPresenceProperties;\n\nconst WINDOW_POPUP_DEFAULT_WIDTH = 1100;\nconst WINDOW_POPUP_DEFAULT_HEIGHT = 900;\n\nexport const openWindow = function(href, windowParam) {\n  const hasParam   = typeof windowParam === \"object\";\n  const windowName = hasParam && windowParam[\"name\"] || \"_blank\";\n  const useResize  = (hasParam && windowParam[\"resize\"]+\"\") !== \"false\";\n\n  let destWindowWidth  = (hasParam && windowParam[\"width\"] || WINDOW_POPUP_DEFAULT_WIDTH);\n  let destWindowHeight = (hasParam && windowParam[\"height\"] || WINDOW_POPUP_DEFAULT_HEIGHT);\n  let destWindowTop    = (hasParam && windowParam[\"top\"] || windowParam[\"y\"] || 0);\n  let destWindowLeft   = (hasParam && windowParam[\"left\"] || windowParam[\"x\"] || 0);\n\n  const availMaxWidth = screen.availWidth;\n  let availMaxHeight = screen.availHeight;\n\n  // IE bottom bar\n  if(navigator.platform.indexOf(\"Win\") === 0) {\n    availMaxHeight -= 65;\n  }\n\n  if(destWindowWidth > availMaxWidth) destWindowWidth = availMaxWidth;\n  if(destWindowHeight > availMaxHeight) destWindowHeight = availMaxHeight;\n  \n  windowServiceReserveSession(windowName,windowProps,true);\n  \n  const newWindow = window.open(\n    href,\n    windowName,\n    `top=${destWindowTop},left=${destWindowLeft},width=${destWindowWidth},height=${destWindowHeight}${useResize ? \",resizable=1\" : \",resizable=0\"},scrollbars=yes,status=1`\n  );\n\n  return newWindow;\n};\n\nexport const closeWindow = function(){\n  window.close();\n};\n\nexport const openTab = function(href) {\n  const newWindow = window.open(href, '_blank');\n  newWindow.focus();\n  return newWindow;\n};\n\nexport const historyBack = function({ catchFallback }) {\n  try {\n    const history = window.history;\n    const initialPage = history.length < 2;\n\n    if(initialPage && catchFallback) {\n      if(typeof catchFallback === \"string\") {\n        location.href = catchFallback;\n      }\n      if(typeof catchFallback === \"function\") {\n        return catchFallback();\n      }\n    } else {\n      history.back();\n    }\n  } catch (e) {\n    return null;\n  }\n};","const toDataString = function(tods){ \n\tswitch(typeof tods){\n\t\tcase \"string\":\n      return `\"${tods}\"`\n\t\tcase \"object\":\n      return JSON.stringify(tods)\n    case \"boolean\": case \"undefined\": case \"number\":\n\t\tdefault:\n      return `${tods}`;\n\t}\n};\n\nconst fromDataString = function(v){ \n  return eval(\"(\" + v + \")\");\n};\n\n//로컬스토리지 데이터 저장\nexport const setLocalData = function(k,v){\n  const localStorage = window.localStorage;\n  if(typeof k === \"object\"){\n    Object.keys(k).forEach(key=>{\n      localStorage.setItem(key,toDataString(k[key]));\n    });\n  } else {\n    localStorage.setItem(k,toDataString(v));\n  }\n  return true;\n};\n\n//로컬스토리지 데이터 불러오기\nexport const getLocalData = function(k){\n  const localStorage = window.localStorage;\n  if(!arguments.length) return localStorage;\n  let stringData = localStorage.getItem(k);\n  return (stringData==null) ? undefined : fromDataString(stringData);\n};","export const isAbsoluteNaN = function(it){\n  return it!==it && typeof it === \"number\"\n}\n\nexport const isNone = function(data) {\n  return isAbsoluteNaN(data) || data === undefined || data === null\n}\n\nexport const isNumber = function(it){\n  return (typeof it === \"number\" && !isAbsoluteNaN(it))\n}\n\nexport const isInfinity = function(it){\n  return it === Number.POSITIVE_INFINITY || it === Number.NEGATIVE_INFINITY\n}\n\nexport const isInteger = function(value) {\n  //NaN, null, undefined\n  if(isNone(value) === true) return false\n  \n  if(typeof value === \"string\") {\n    value = value.trim()\n  }\n\n  if(!(/string|number/.test(typeof value)) || isInfinity(value) || isNaN(value)) {\n    return false\n  }\n\n  return value == parseInt(value, 10);\n}\n\nexport const isArray = function(data) {\n  return Array.isArray(data) || data instanceof Array;\n}\n\nexport const isObject   = it=>(it !== null && typeof it === \"object\") ? true : false\nexport const isFunction = (it)=>typeof it === \"function\"\n\n/*\n  * likeObject is have hasOwnProperty\n*/\nexport const likeObject = (it)=>isObject(it) || isFunction(it)\n\nexport const likeString = function(data) {\n  if(typeof data === \"string\") return true\n  if(isNumber(data)) return true\n  return false\n}\n\nexport const likeNumber = function(data) {\n  if(isNumber(data) || isInfinity(data)) return true\n  if(typeof data === \"string\") return String(parseFloat(data)) === String(data)\n  return false\n}\n\nexport const likeArray = (function(nodeFn,webFn){\n  let definedNodeList\n  \n  try {\n    definedNodeList = (0 instanceof NodeList)\n    definedNodeList = true\n  } catch(e) {\n    definedNodeList = false;\n  }\n  \n  return definedNodeList ? webFn : nodeFn;\n}(\n  //nodeFn\n  function(data){\n    return (typeof data === \"object\" && data.hasOwnProperty(\"length\")) ? \n    true :\n    isArray(data);\n  },\n  //webFn\n  function(data){\n    return (typeof data === \"object\" && data.hasOwnProperty(\"length\")) ?\n    true :\n    isArray(data) || data instanceof NodeList;\n  }\n))\n\n//TODO : native isPlainObject\nexport const isNode = (a)=>isObject(a) && typeof a.nodeType === \"number\"\n\nexport const isEmpty = function(it){\n  if (typeof it === \"undefined\") return true;\n  if (typeof it === \"string\")return it.trim().length < 1 ? true : false;\n  if (typeof it === \"object\"){\n    if(it == null) return true;\n    if(it instanceof RegExp) return false;      \n    if(isArray(it)) {\n      return !it.length;\n    } else {\n      for (var prop in it) return false; return true;\n    }\n  }\n  if (typeof it === \"number\"){\n    //NaN check || false\n    return it!==it || false;\n  }\n  if (typeof it === \"function\")return false;\n  if (typeof it === \"boolean\")return false;\n  return true;\n}\n\n// check JSON, input.value possible value\nexport const isPresence = function(it){\n  return it === undefined || isAbsoluteNaN(it) ? false : true;\n}\n\nexport const likeRegexp = (s)=> (typeof s === \"string\") || (s instanceof RegExp)\n\nexport const isPlainObject = data => typeof data === \"object\" && data.constructor === Object\n\nexport const isEnumerableObject = data => isPlainObject(data) || isArray(data)\n\n// none(undfinec, null, NaN), value(1,\"1\"), hash({}), array([]), node, object(new, Date), function, boolean\nexport const eqof = function(it){\n  const typeIt = typeof it;\n  switch(typeIt){\n  case \"number\":\n    if(isAbsoluteNaN(it)) return \"none\";\n  case \"string\":\n    return \"value\";\n    break;\n  case \"object\":\n    if(isNone(it)) return \"none\";\n    if(likeArray(it)) return \"array\";\n    if(isNode(it)) return \"node\";\n    if(!isPlainObject(it)) return \"object\";\n    return \"hash\";\n    break;\n  case \"undefined\":\n    return \"none\";\n    break;\n  case \"function\":\n  case \"boolean\":\n  default:\n    return typeIt;\n    break;\n  }\n}\n\nconst baseEq = function(value, other, filter, depth=0, strict){\n  if(arguments.length < 2) return false;\n  \n  const valueType = eqof(value);\n  const otherType = eqof(other);\n  \n  if(valueType !== otherType) return false;\n  \n  switch(valueType){\n  case \"none\":\n    return true;\n  case \"array\":\n    if(value.length !== other.length){\n      return false;\n    }\n    return value.every((vValue,i)=>{\n      const oValue = other[i];\n      return (typeof filter === \"function\" && filter(i,[vValue,oValue],depth) === false) ? true : baseEq(vValue,oValue,filter,depth+1,strict);\n    });\n    break;\n  case \"hash\":\n    const vKeys = Object.keys(value), oKeys = Object.keys(other);\n    if(vKeys.length !== oKeys.length || !baseEq(vKeys.sort(),oKeys.sort())) return false;\n    return vKeys.every((key)=>{\n      const vValue = value[key];\n      const oValue = other[key];\n      return (typeof filter === \"function\" && filter(key,[vValue,oValue],depth) === false) ? true : baseEq(vValue,oValue,filter,depth+1,strict);\n    });\n    break;\n  case \"node\":\n  case \"object\":\n  case \"function\":\n  case \"boolean\":\n  case \"value\":\n  default:\n    return strict ? value === other : value == other;\n  }\n}\n\nexport const isEqual   = (value, other, filter, depth)=>baseEq(value, other, filter, depth, true);\nexport const likeEqual = (value, other, filter, depth)=>baseEq(\n  value,\n  other,\n  (key,values,depth)=>/^(\\$|\\_)/.test(key) ? false : typeof filter === \"function\" ? filter(key,values,depth) : true, \n  depth, \n  true\n);\nexport const eqeq      = (value, other, filter, depth)=>baseEq(value, other, filter, depth, false);\n\nexport const isExsist = function(value){\n  if(value === true){\n    return true;\n  }\n  if(value === false){\n    return false;\n  }\n  if(typeof value === \"string\" || typeof value === \"number\"){\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport const notExsist = value=>!isExsist(value)\n\nexport const likePromise = (target)=>(typeof target === \"object\" && target !== null && typeof target['then'] === \"function\" && typeof target['catch'] === \"function\");","import {\n  isArray,\n  isNone,\n  isAbsoluteNaN,\n  isPlainObject,\n  isObject\n} from './isLike'\n\nexport const asArray = function(data, defaultArray = undefined) {\n  if(isArray(data)) {\n    return data;\n  }\n  if(isNone(data)) {\n    return isArray(defaultArray) ? defaultArray\n      : isNone(defaultArray) ? [] : [defaultArray];\n  }\n  if(typeof data === \"object\" && typeof data.toArray === \"function\") {\n    return data.toArray();\n  }\n  return [data];\n};\n\nexport const toArray = function(data,option){\n  if(typeof data === \"undefined\" || data === null || data === NaN ) return [];\n  if(isArray(data)) return Array.prototype.slice.call(data);\n  if(typeof data === \"object\" && typeof data.toArray === \"function\") return data.toArray();\n  if(typeof data === \"string\", typeof option === \"string\") return data.split(option);\n  return [data];\n}\n\nexport const asObject = function(data, defaultKey = \"default\") {\n  if(isPlainObject(data)){\n    return data;\n  } else {\n    return { [defaultKey]:data }\n  }\n};\n\nexport const toNumber = function(v,d){\n  switch(typeof v){ case \"number\":return v;case \"string\":var r=v.replace(/[^.\\d\\-]/g,\"\")*1;return isAbsoluteNaN(r)?0:r;break; }\n  switch(typeof d){ case \"number\":return d;case \"string\":var r=d*1;return isAbsoluteNaN(r)?0:r;break; }\n  return 0;\n}\n\nexport const cleanObject = function(data){\n  if(data instanceof Array){\n    Array.prototype.splice.call(data,0,data.length)\n  } else if(typeof data == \"object\") {\n    Object.keys(data).forEach(key=>{ delete data[key] })\n  }\n  return data\n}\n\nexport const clone = function(target){\n  switch(typeof target){\n  case \"undefined\": case \"function\": case \"boolean\": case \"number\": case \"string\": return target; break;\n  case \"object\":\n    if(target === null) return target;\n    \n    if(isArray(target)){\n      let r=[];\n      for(let i=0,length=target.length;i<length;i++)r.push(target[i]);\n      return r;\n    }\n    \n    if(!isPlainObject(target)){\n      if(target instanceof Date){\n        let r=new Date();\n        r.setTime(target.getTime());\n        return r;\n      }\n      return target;\n    }\n    \n    let r={};\n    \n    Object.keys(target).forEach(k=>{\n      if(target.hasOwnProperty(k)) r[k]=target[k];\n    });\n    return r;\n    break;\n  default : \n    console.error(\"clone::copy failed : target => \",target);\n    return target; \n    break\n  }\n}\n\nexport const cloneDeep = function(target){\n  if(typeof target === \"object\"){\n    let d;\n    if(isArray(target)) {\n      if(!isArray(d)) { d = [] };\n      for (var i=0,l=target.length;i<l;i++) d.push( ((typeof target[i] === \"object\" && target[i] !== null ) ? clone(target[i]) : target[i]) )\n        return d;\n    } else {\n      d = {}\n      Object.keys(target).forEach(p=>{\n        (typeof target[p] === \"object\" && target[p] !== null && d[p]) ? clone(target[p],d[p]) : d[p] = target[p];\n      });\n      return d;\n    }\n  } else {\n    return clone(target);\n  }\n};\n\nexport const free = function(datum){\n  const dest = {}\n  Object.keys(datum).forEach(key=>{\n    if(!/^\\$/.test(key)){\n      dest[key] = cloneDeep(datum[key])\n    }\n  });\n  return dest;\n}\n\nconst getKeyWithValue = function(obj,value){\n  if(isArray(obj)){\n    for(var i=0,l=obj.length;i<l;i++) if(obj[i]===value) return i;\n  } \n  if(isObject(obj)){\n    for(var key in obj) if(obj[key]===value) return key;\n  }\n  return undefined;\n};\n\nexport const removeValue = function(obj,value){\n  var detect = true;\n  var array  = isArray(obj);\n\n  while(detect) {\n    var key = getKeyWithValue(obj,value);\n    if(typeof key === \"undefined\"){\n      detect = false;\n    } else {\n      if(array){\n        obj.splice(key,1);\n      } else {\n        delete obj[key];\n      }\n    }\n  }\n\n  return obj;\n};\n\nexport const instance = function(func,proto){\n  var ins,DummyInstance=function(param){ if(typeof param === \"object\") for(var k in param) this[k] = param[k]; };\n  if(typeof func == \"object\"){\n    if(typeof proto === \"object\") DummyInstance.prototype = proto;\n    ins = new DummyInstance(func);\n  }\n  if(typeof func == \"function\"){\n    if(typeof proto === \"object\") func.prototype = proto;\n    ins = (new func());\n  }\n  return ins;\n}\n\nexport const alloc = function(init) {\n  let fn = init();\n  const rn = function(...args) {\n    return fn.apply(this, args);\n  };\n  rn['reset'] = function() { fn = init(rn, rn); };\n  rn['$constructor'] = fn;\n  return rn;\n};\n\nconst syncData = (function(){\n  const ENTER_HOOK  = (newDatum)=>_.assign({}, newDatum);\n  const UPDATE_HOOK = (oldDatum, newDatum)=>_.assign({}, oldDatum, newDatum);\n  \n  return function(oldData, newData, getId, options) {\n    if(!/string|function/.test(typeof getId)) throw new Error(\"syncData need getId\");\n  \n    if(typeof getId === \"string\") {\n      const getIdString = getId;\n      getId = e=>_.get(e, getIdString);\n    }\n\n    oldData = asArray(oldData);\n    newData = asArray(newData);\n\n    const result = [];\n    const hooks  = asObject(options,\"afterEach\")\n    \n    if(typeof hooks[\"enter\"] !== \"function\"){\n      hooks[\"enter\"] = ENTER_HOOK;\n    }\n    \n    if(typeof hooks[\"update\"] !== \"function\"){\n      hooks[\"update\"] = UPDATE_HOOK;\n    }\n    \n    const oldDataMap = _.map(oldData, e=>{\n      return { id: getId(e), ref: e };\n    });\n    \n    \n    asArray(newData).forEach((newDatum, i)=>{\n      const newId = getId(newDatum);\n      let oldDatum = _.get(oldDataMap[_.findIndex(oldDataMap, e=>e.id === newId)], \"ref\");\n      let genDatum;\n      let dirty = false;\n\n      if(oldDatum) {\n        // change is not dirty, modify is dirty\n        if(typeof oldDatum !== typeof newDatum) {\n          dirty = false;\n        } else { // same type\n          const oldOwnKeys = Object.keys(oldDatum).filter(key=>!(key.indexOf(\"$\") === 0));\n          const newOwnKeys = Object.keys(newDatum).filter(key=>!(key.indexOf(\"$\") === 0));\n\n          // inspect key chnage\n          if(_.isEqual(oldOwnKeys, newOwnKeys)) {\n            dirty = !_.isEqual(_.pick(oldDatum, oldOwnKeys), _.pick(newDatum, newOwnKeys));\n          } else {\n            dirty = true;\n          }\n        }\n        \n        if(typeof hooks[\"beforeUpdate\"] === \"function\"){\n          if(hooks[\"beforeUpdate\"](oldDatum, newDatum) === false){\n            return;\n          }\n        }\n        \n        genDatum = hooks[\"update\"](oldDatum, newDatum);\n        \n        if(typeof hooks[\"afterUpdate\"] === \"function\"){\n          genDatum = hooks[\"afterUpdate\"](genDatum, oldDatum, newDatum);\n        }\n      } else {\n        if(typeof hooks[\"beforeEnter\"] === \"function\"){\n          if(hooks[\"beforeEnter\"](newDatum) === false){\n            return;\n          }\n        }\n        \n        genDatum = hooks[\"enter\"](newDatum);\n        \n        if(typeof hooks[\"afterEnter\"] === \"function\"){\n          genDatum = hooks[\"afterEnter\"](genDatum, newDatum);\n        }\n      }\n\n      if(typeof hooks[\"afterEach\"] === \"function\") {\n        hooks[\"afterEach\"](genDatum, i, dirty);\n      }\n\n      result.push(genDatum);\n    });\n\n    return result;\n  }\n}())","import {\n  asArray\n} from './cast'\n\nexport const all = function(data,fn){\n  data = asArray(data);\n  \n  if(data.length === 0){\n    return false;\n  }\n  \n  for(let i=0,l=data.length;i<l;i++) if(!fn(data[i],i)){\n    return false;\n  };\n  \n  return true;\n};\n\nexport const deep = function(data){\n  \n}\n\nexport const times = function(length,fn){\n  const result = [];\n  for(var i=0,l=length;i<l;i++){\n    result.push(fn(i));\n  }\n  return result;\n};\n\nexport const forMap = function(object,fn){\n  return Object.keys(object).reduce((dest,key)=>{\n    dest[key]=fn(object[key],key);\n    return dest;\n  },object);\n};","import { asArray, cloneDeep } from './cast'\nimport { isArray, likeArray, isNumber, isAbsoluteNaN } from './isLike'\nimport { top } from './reduce';\nimport { turn, limitOf } from './nice';\nimport { times } from './enumerable';\n\nexport const rangeModel = function(value,step,sizeBase){\n  var start,end,reverse;\n  \n  if(typeof value === \"number\"){\n    end   = value;\n    start = 0;\n  } else if(typeof value === \"object\"){\n    start = value[0];\n    end   = value[1];\n      \n    if(!step && typeof value[2] === \"number\"){\n      step = value[2];\n    }\n      \n    if(typeof sizeBase !== \"boolean\"){\n      sizeBase=false;\n    }\n  }\n  \n  if(typeof start !== \"number\" || typeof end !== \"number\"){\n    if(typeof start !== \"number\" && typeof end !== \"number\") return r;\n    if(typeof start === \"number\") return r.push(start),r;\n    if(typeof end   === \"number\") return r.push(end)  ,r;\n  }\n  \n  if(start > end){\n    reverse = end;\n    end     = start;\n    start   = reverse;\n    reverse = true;\n  }\n  \n  end=parseFloat(end),end=isAbsoluteNaN(end)?0:end;\n  start=parseFloat(start),start=isAbsoluteNaN(start)?0:start;\n  step=parseFloat(step),step=isAbsoluteNaN(step)||step==0?1:step;\n  \n  return {\n    start,\n    end,\n    step,\n    reverse,\n    sizeBase\n  }\n};\n\nexport const range = function(value,stepSize,sizeBaseRange){\n  let r=[];\n  let {\n    start,\n    end,\n    step,\n    reverse,\n    sizeBase\n  } = rangeModel(value,stepSize,sizeBaseRange);\n  \n  if(step <= 0){ return console.warn(\"range::not support minus step\"),r;};\n  if(sizeBase==false){ for(var i=start,l=end;i<=l;i=i+step) r.push(i); } else { for(var i=start,l=end;i<l;i=i+step) r.push(i); }\n  return reverse ? r.reverse() : r;\n}\n\n//TODO : move to ?\nexport const hashMap = function(d,f){\n  if(typeof d === \"object\" && !isArray(d)){\n    for(let k in d) d[k] = f(d[k],k); \n  } else {\n    return f(d,(void 0));\n  }\n  return d;\n};\n\nexport const domainRangeValue = function(domain,range,vs,nice,limit){\n  return hashMap(cloneDeep(vs),function(v,sel){\n    const $range  = sel ? range[sel]  : range;\n    const $domain = sel ? domain[sel] : domain;\n    if(!$range || !$domain){ return v; }\n                    \n    const dSize = $domain[1] - $domain[0];\n    const sSize = $range[1] - $range[0];\n    const dRate = (v - $domain[0]) / dSize;\n    const calc  = $range[0] + sSize * dRate;\n    const result = nice ? Math.floor(calc) : calc;\n    \n    return limit ? \n    $range[1] > $range[0] ? \n    limitOf(result,$range[1],$range[0]) :\n    limitOf(result,$range[0],$range[1]) :\n    result;\n  });\n};\n\nexport const domainRangeInterpolate = function(domain,range,nice,limit){\n  let _domain = domain;\n  let _range  = range;\n  let _nice   = nice;\n  \n  const interpolate = (value)=>domainRangeValue(_domain,_range,value,_nice,limit);\n  \n  interpolate.domain = (domain)=>{\n    _domain = domain;\n    return interpolate;\n  }\n  interpolate.range = (range)=>{\n    _range = range\n    return interpolate;\n  }\n  interpolate.nice = (nice)=>{\n    _nice = nice;\n    return interpolate;\n  }\n  \n  return interpolate;\n};\n\n//matrixRange([1],[3]) // [[1], [2], [3]] \n//matrixRange([1,1],[3,3]) // [[1, 1], [2, 1], [3, 1], [1, 2], [2, 2], [3, 2], [1, 3], [2, 3], [3, 3]]\n\nexport const matrixRange = function(start,end,step,sizeBase){\n  var scales=[];\n  var maxLength = top([start.length,end.length]);\n    \n  var selectLengthes = times(maxLength,function(scaleIndex){\n    var range = range([start[scaleIndex],end[scaleIndex]],step,sizeBase)\n    scales.push(range);\n    return range.length;\n  });\n\n  var result = times(reduce(selectLengthes,function(redu,value){\n    return redu * value;\n  },1),function(){ return new Array(maxLength); });\n    \n  var turnSize = 1;\n  \n  \n  asArray(scales).forEach((scaleCase,scaleIndex)=>{\n    var scaleCaseLength = scaleCase.length;\n    times(result.length,function(time){\n      result[time][scaleIndex] = scaleCase[turn(time,scaleCaseLength,turnSize)];\n    });\n    turnSize = turnSize * scaleCaseLength;\n  });\n    \n  return result;\n};\n\n//validate matrix format\nexport const validMatrix = function(arr){\n  // Matrix must be array\n  if(!likeArray(arr)){\n    return false;\n  }\n  \n  // Empty is valid\n  if(arr.length === 0){\n    return true;\n  }\n  \n  //find some error ( return true => false)\n  return Array.from(arr).some((v)=>{\n    if(likeArray(v)){\n      //length check\n      if(v.length !== arr.length) return true;\n      //type check\n      return v.some(likeError=>!(likeError == undefined || isNumber(likeError)));\n    }\n    return true;\n  }) ? false : true;\n};\n\n// real matrix model\nexport const asMatrix = function(arr,columnSize){\n  const result = [];\n  if(typeof columnSize === \"number\" && columnSize > 0){\n    const rowCount = Math.ceil(arr.length / columnSize);\n    times(rowCount,i=>{\n      const column = [];\n      times(columnSize,ci=>{ column.push(arr[i*columnSize+ci]); })\n      result.push(column);\n    });\n  } else {\n    return [arr];\n  }\n  return result;\n};\n\nexport const multiplyMatrix = function(aMatrix,bMatrix){\n  if(!validMatrix(aMatrix) && validMatrix(bMatrix)){\n    return null;\n  }\n  if(aMatrix[0].length !== bMatrix.length){\n    return null;\n  }\n  const result = [];\n  times(bMatrix.length, rRowIndex=>{\n    const columnLength = bMatrix[rRowIndex].length;\n    const columnResult = [];\n    times(columnLength, rColumnIndex=>{\n      //var calcLog = [];\n      const multiplied = aMatrix[rRowIndex].reduce((dist,num,index)=>{\n        //calcLog.push(`${num} * ${bMatrix[index][rColumnIndex]}`)\n        return num * bMatrix[index][rColumnIndex] + dist;\n      },0);\n      //console.log(\"calcLog\",calcLog.join(\" + \"))\n      columnResult.push(multiplied);\n    });\n    result.push(columnResult);\n  });\n  return result;\n}","import { isArray } from '../functions/isLike';\nimport { asArray } from '../functions/cast';\nimport { asMatrix, validMatrix, multiplyMatrix } from '../functions/matrix';\n\n\nconst likePoint = function(p){\n  return typeof p === \"object\" && p.hasOwnProperty(\"x\") && p.hasOwnProperty(\"y\");\n}\n\n\nconst Point = function(x=0,y=0,z=0,w=1,meta){\n  // base point config\n  const __ref = { x,y,z,w };\n  let __meta;\n  \n  // compute matrix\n  const __matrix   = [];\n  const __computed = {\n    matrixVersion:0,\n    computedVersion:0,\n    memoizeRef:null,\n    memoizeOutput:null\n  };\n  \n  const compute = (key)=>{\n    const { matrixVersion, computedVersion } = __computed;\n    //why un used?\n    //const { memoizeRef } = __computed;\n    \n    let needCompute = !__computed.memoizeRef || matrixVersion !== computedVersion || !(\n      __computed.memoizeRef.x === __ref.x &&\n      __computed.memoizeRef.y === __ref.y &&\n      __computed.memoizeRef.z === __ref.z &&\n      __computed.memoizeRef.w === __ref.w \n    );\n    \n    if(needCompute){\n      const newMemoizeRef = {\n        x:__ref.x,\n        y:__ref.y,\n        z:__ref.z,\n        w:__ref.w\n      };\n      const newComputedMatrix = __matrix.reduce(\n        (dest, matrix)=>multiplyMatrix(matrix,dest),\n        asMatrix([newMemoizeRef.x,newMemoizeRef.y,newMemoizeRef.z,newMemoizeRef.w],1)\n      );\n      //\n      __computed.memoizeOutput   = {\n        x:newComputedMatrix[0][0],\n        y:newComputedMatrix[0][1],\n        z:newComputedMatrix[0][2],\n        w:newComputedMatrix[0][3]\n      };\n      __computed.memoizeRef      = newMemoizeRef;\n      __computed.computedVersion = matrixVersion;\n    } \n    //else {\n    //  console.log(`compute cache ${key}`);\n    //}\n    return key && __computed.memoizeOutput[key] || __computed.memoizeOutput;\n  };\n  \n  Object.defineProperties(this,{\n    x:{ enumerable:true, get:()=>(__matrix.length &&  compute('x') || __ref.x), set:v=>__ref.x = v},\n    y:{ enumerable:true, get:()=>(__matrix.length &&  compute('y') || __ref.y), set:v=>__ref.y = v},\n    z:{ enumerable:true, get:()=>(__matrix.length &&  compute('z') || __ref.z), set:v=>__ref.z = v},\n    w:{ enumerable:true, get:()=>(__matrix.length &&  compute('w') || __ref.w), set:v=>__ref.w = v},\n    meta:{\n      enumerable:false, \n      get(){ return __meta },\n      set(it){ this.__meta = typeof it === \"object\" ? it : null; return this.__meta; }\n    },\n    addMatrix: {\n      enumerable:false,\n      value:function(matrix){\n        if(!validMatrix(matrix)) throw new Error(\"invalid addMatrix param\");\n        __matrix.push(matrix);\n        __computed.matrixVersion+=1;\n        return this;\n      }\n    }\n  });\n  \n  this.meta = meta;\n};\n\nPoint.prototype = {\n  addMeta (obj){\n    if(typeof obj === \"object\") this.meta = Object.assign(this.meta&&this.meta||{},obj);\n    return this;\n  },\n  clone (){\n    return new Point(this.x,this.y,this.z,this.w);\n  },\n  toJSON (withMeta){\n    const json = { x:this.x, y:this.y, z:this.z, w:this.w };\n    if(withMeta === true && this.meta) json.meta = this.meta;\n    return json;\n  },\n  pull (width=0, angle=\"horizontal\"){\n    const { x, y, z, w } = this;\n    switch(angle){\n      case \"h\": case \"horizontal\":\n        const xHalf = width <= 0 ? 0 : width/2;\n        return new Vertex([{x:x-xHalf, y, z, w}, {x:x+xHalf, y, z, w}]);\n      default:\n    }\n  },\n  vertexWith (destPoint){\n    const points = asArray(destPoint);\n    points.unshift(this);\n    return new Vertex(points);\n  },\n  rectWith ({x, y}){\n    const [largeX, smallX] = this.x > x ? [ this.x, x ] : [ x, this.x ];\n    const [largeY, smallY] = this.y > y ? [ this.y, y ] : [ y, this.y ];\n    return new Rect(smallX,smallY,largeX-smallX,largeY-smallY,0,0);\n  }\n};\n\nconst Vertex = function(pointArray,meta){\n  let __meta;\n  \n  Object.defineProperties(this,{\n    meta:{\n      enumerable:false, \n      get(){ return __meta },\n      set(it){ this.__meta = typeof it === \"object\" ? it : null; return this.__meta; }\n    }\n  });\n  \n  this.meta = meta;\n  \n  asArray(pointArray).forEach(point=>{\n    if(!likePoint(point)) return;\n    const {x,y,z,w} = point;\n    this.push(new Point(x,y,z,w,__meta));\n  });\n};\n\n(function(classFunction, methods){\n  const prototype = [];\n  \n  classFunction.prototype = prototype;\n  \n  Object.keys(methods).forEach(key=>{\n    prototype[key] = methods[key]\n  });\n  \n  Object.defineProperties(prototype,{\n    start:{\n      enumerable:false,\n      get (){\n        return this[0];\n      }\n    },\n    end:{\n      enumerable:false,\n      get (){\n        return !this.length ? void 0 : this[this.length-1];\n      }\n    }\n  });\n}(Vertex, {\n  addMeta (obj){\n    if(typeof obj === \"object\") this.meta = Object.assign(this.meta&&this.meta||{},obj);\n    return this;\n  },\n  toJSON (withMeta){\n    const result = [];\n    this.forEach(p=>result.push(p.toJSON(withMeta)));\n    return result;\n  },\n  clone (){\n    return new Vertex(this);\n  },\n  eq (index){\n    return this[index];\n  },\n  join:function(fn){\n    const joins = [];\n    this.forEach((refp,i)=>{\n      joins.push(refp);\n      if(!this[i+1]) return;\n      const newp = fn(refp, this[i+1], i);\n      if(!likePoint(newp)) return;\n      const {x,y,z,w,meta} = newp;\n      joins.push(new Point(x,y,z,w,meta));\n    });\n    this.splice(0,this.length);\n    joins.forEach(p=>this.push(p));\n    return this;\n  },\n  point (order){\n    switch(order){\n    case \"e\": case \"end\":\n    case \"d\": case \"down\": case \"r\": case \"right\":\n      const { x:px,y:py,z:pz,w:pw } = this.end;\n      return new Point(px,py,pz,pw);\n    case \"c\": case \"m\": case \"center\": case \"middle\":\n      const { x:sx, y:sy, z:sz, w:sw } = this.start;\n      const { x:ex, y:ey, z:ez, w:ew } = this.end;\n      return new Point(\n        sx/2 + ex/2,\n        sy/2 + ey/2,\n        sz/2 + ez/2,\n        sw/2 + ew/2\n      );\n    case \"s\": case \"start\":\n    case \"u\": case \"up\": case \"l\": case \"left\":\n    default:\n      const { x,y,z,w } = this.start;\n      return new Point(x,y,z,w,this.meta);\n    }\n  },\n  transform (transform,rect){\n    const useRect = !!rect;\n    \n    if(useRect){\n      const { left, top, width, height } = rect;;\n      \n      //rotateOrigin\n      const originX = left + width/2;\n      const originY = top + height/2;\n      \n      this.forEach(point=>{\n        const { left, top } = rect;\n        point.translate({ x:-originX, y:-originY });\n        point.transform(transform);\n        point.translate({ x:originX, y:originY });\n      });\n    } else {\n      this.forEach(point=>{\n        point.transform(transform)\n      });\n    }\n    return this;\n  }\n}));\n\n\n\nconst Rect = function(left=0,top=0,width=0,height=0,meta=null){\n  const __ref = { left,top,width,height }\n  let __meta;\n  Object.defineProperties(this,{\n    width:{ \n        enumerable:true, \n        get(){ return __ref.width; },\n        set(newValue){\n            const oldValue = __ref.width;\n            const offsetValue = newValue - oldValue;\n            __ref.width = newValue;\n            __ref.right += offsetValue;\n            return newValue;\n        }\n    },\n    height:{ \n        enumerable:true, \n        get(){ return __ref.height; },\n        set(newValue){\n            const oldValue = __ref.height;\n            const offsetValue = newValue - oldValue;\n            __ref.height = newValue;\n            __ref.bottom    += offsetValue;\n            return newValue;\n        }\n    },\n    left:{ enumerable:true, get(){ return __ref.left; } },\n    top:{ enumerable:true, get(){ return __ref.top; } },\n    right:{ enumerable:true, get(){ return this.left + this.width; } },\n    bottom:{ enumerable:true, get(){ return this.top + this.height; } },\n    meta:{\n      enumerable:false, \n      get(){ return __meta },\n      set(it){ this.__meta = typeof it === \"object\" ? it : null; return this.__meta; }\n    }\n  });\n  \n  this.meta = meta;\n};\n\nRect.prototype = {\n  addMeta (obj){\n    if(typeof obj === \"object\") this.meta = Object.assign(this.meta&&this.meta||{},obj);\n    return this;\n  },\n  toJSON (withMeta){\n    const json = {width:this.width, height:this.height, left:this.left, top:this.top, right:this.right, bottom:this.bottom };\n    if(withMeta === true && this.meta) json.meta = this.meta;\n    return json;\n  },\n  findPoint (findWord){\n    const [ lineFind, pointFind ] = isArray(findWord) ? findWord : findWord.trim().split(/\\s+/);\n    return this.vertex(lineFind).point(pointFind);\n  },\n  vertex (order){\n    const inheritMeta = Object.assign({\n      perspective:0,\n      perspectiveOrigin:{\n        x:this.left + (this.width / 2),\n        y:this.top  + (this.top / 2),\n        z:0\n      }\n    },this.meta);\n    \n    switch(order){\n    case \"right\": case \"r\":\n      return new Vertex([{x:this.right, y:this.top, z:0, w:0},{x:this.right,y:this.bottom,z:0,w:0}],inheritMeta);\n    case \"bottom\": case \"b\":\n      return new Vertex([{x:this.left, y:this.bottom, z:0, w:0},{x:this.right,y:this.bottom,z:0,w:0}],inheritMeta);\n    case \"left\": case \"l\":\n      return new Vertex([{x:this.left, y:this.top, z:0, w:0},{x:this.left,y:this.bottom,z:0,w:0}],inheritMeta);\n    case \"top\": case \"t\":\n      return new Vertex([{x:this.left, y:this.top, z:0, w:0},{x:this.right,y:this.top,z:0,w:0}],inheritMeta);\n    default:\n      return new Vertex([{x:this.left, y:this.top, z:0, w:0},{x:this.left,y:this.bottom,z:0,w:0},{x:this.right,y:this.bottom,z:0,w:0},{x:this.right, y:this.top, z:0, w:0}],inheritMeta);\n    }\n  },\n  //TODO : incompleted sticky(parent, position, offset);\n  sticky ({left:refX, top:refY, width:refWidth, height:refHeight}, position=\"bottom left\"){\n    const { left, top, width, height } = this;\n    switch(position){\n    case \"bl\": case \"obl\": case \"bottom left\": case \"outer bottom left\":\n      return rect({\n        left:refX,\n        top:refY+refHeight,\n        width,\n        height\n      });\n    case \"c\": case \"m\": case \"mc\": case \"center\": case \"middle\": case \"middle center\":\n      return rect({\n        left:refX + refWidth/2 - width/2,\n        top:refY + refHeight/2 - height/2,\n        width,\n        height\n      });\n    default:\n      return rect({ left, top, width, height });\n    }\n  }\n};\n\nexport const point = function(x,y,z,w){\n  return typeof x === \"object\" ? \n  new Point(x.x,x.y,x.z,x.w) : \n  new Point(x,y,z,w);\n};\n\nexport const vertex = function(start,end){\n  new Vertex([{x:start.x,y:start.y,z:start.z,w:start.w},{x:end.x,y:end.y,z:end.z,w:end.w}]);\n};\n\nexport const rect = function(left,top,width,height,x,y,valid){\n  return typeof left === \"object\" ?\n  new Rect(left.left,left.top,left.width,left.height,left.x,left.y,left.valid) :\n  new Rect(left,top,width,height,x,y,valid);\n};\n","import { rect } from \"../../modules/dimension\";\nimport { likeString, isArray, likeArray, isNode } from \"../../functions/isLike\";\nimport { asArray } from \"../../functions/cast\";\n\nexport const getNode = function(el){\n  let select = likeArray(el) ? el[0] : el;\n  return isNode(select) ? select : undefined;\n};\n\nexport const isElement = function(el){\n  return el instanceof Element;\n};\n\nexport const getElementOffsetRect = function(el){\n  el = getNode(el);\n  \n  if(!isElement(el)){\n    return rect({\n      x:0,y:0,left:0,top:0,width:0,height:0,right:0,bottom:0,valid:false\n    });\n  }\n  \n  let offsetLeft = 0;\n  let offsetTop  = 0;\n  let offsetWidth = el.offsetWidth;\n  let offsetHeight = el.offsetHeight;\n  \n  do{\n      offsetLeft += el.offsetLeft;\n      offsetTop  += el.offsetTop;\n      el = el.offsetParent;\n      \n      if((!el.html && !el.body) && /absoute|relative|fixed/.test(window.getComputedStyle(el).getPropertyValue(\"position\"))){\n        el = null;\n      }\n  } while( el );\n  \n  \n  return rect({\n    x:offsetLeft,\n    y:offsetTop,\n    left:offsetLeft,\n    top:offsetTop,\n    width:offsetWidth,\n    height:offsetHeight,\n    valid:true\n  });\n  \n}\n\nconst getBoundingRect = function(el){\n  el = getNode(el);\n  \n  if(!isElement(el)){\n    return rect({\n      x:0,y:0,left:0,top:0,width:0,height:0,right:0,bottom:0,valid:false\n    });\n  }\n  \n  const doc = document;\n  const win = window;\n  const body = doc.body;\n\n  let offsetX = win.pageXOffset !== undefined ? win.pageXOffset :\n  (doc.documentElement || body.parentNode || body).scrollLeft;\n  let offsetY = win.pageYOffset !== undefined ? win.pageYOffset :\n  (doc.documentElement || body.parentNode || body).scrollTop;\n  \n  const boundingRect = el.getBoundingClientRect();\n\n  if (el !== body) {\n    var parent = el.parentNode;\n\n    while (parent !== body) {\n      offsetX += parent.scrollLeft;\n      offsetY += parent.scrollTop;\n      parent   = parent.parentNode;\n    }\n  }\n  \n  return rect({\n    x     : boundingRect.left + offsetX,\n    y     : boundingRect.top + offsetY,\n    left  : boundingRect.left + offsetX,\n    top   : boundingRect.top + offsetY,\n    width : boundingRect.width,\n    height: boundingRect.height,\n    right : boundingRect.right + offsetX,\n    bottom: boundingRect.bottom + offsetY,\n    valid : true\n  });\n}\n\nexport const getElementBoundingRect = function(el){\n  el = getNode(el);\n  \n  const doc  = document;\n  const win  = window;\n  \n  const elRect = getBoundingRect(el).toJSON();\n  \n  if(elRect.valid === false){\n    return rect(elRect);\n  }\n  \n  let current = el;\n  let parent  = el.parentNode;\n  \n  do {\n    if(parent && (!parent.html && !parent.body)  && /absoute|relative|fixed/.test(win.getComputedStyle(parent).getPropertyValue(\"position\"))){\n      const { top, left } = getBoundingRect(parent);\n      elRect.top   -= top;\n      elRect.left  -= left;\n      elRect.right  = elRect.left + elRect.width;\n      elRect.bottom = elRect.top + elRect.height;\n      current = parent = null;\n    } else if(!parent) {\n      current = null;\n    } else {\n      current = parent;\n      parent = current.parentNode;\n    }\n  } while( !!parent )\n  \n  return rect(elRect);\n}\n\nexport const getElementTransformMatrix = function(el){\n  const computedStyle       = getComputedStyle(el, null);\n  const computedMatrixParam = computedStyle.transform || computedStyle.webkitTransform || computedStyle.MozTransform || computedStyle.msTransform;\n  const c = computedMatrixParam.split(/\\s*[(),]\\s*/).slice(1,-1);\n  if (c.length === 6) {\n    return [\n      [+c[0],+c[2],0,+c[4]],\n      [+c[1],+c[3],0,+c[5]],\n      [0,0,1,0],\n      [0,0,0,1]\n    ];\n  } else if (c.length === 16) {\n    return [\n      [+c[0],+c[4],+c[8],+c[12]],\n      [+c[1],+c[5],+c[9],+c[13]],\n      [+c[2],+c[6],+c[10],+c[14]],\n      [+c[3],+c[7],+c[11],+c[15]]\n    ];\n  }\n  return null;\n};\n\n/* https://keithclark.co.uk/articles/calculating-element-vertex-data-from-css-transforms/ */\nconst parseMatrix = (function(){\n  const DEFAULT_MATRIX = {\n    \n    m11: 1, m21: 0, m31: 0, m41: 0,\n    m12: 0, m22: 1, m32: 0, m42: 0,\n    m13: 0, m23: 0, m33: 1, m43: 0,\n    m14: 0, m24: 0, m34: 0, m44: 1\n  };\n  \n  return function(matrixParam) {\n    let c = matrixParam.split(/\\s*[(),]\\s*/).slice(1,-1);\n    let matrix;\n\n    if (c.length === 6) {\n      // 'matrix()' (3x2)\n      matrix = {\n        m11: +c[0], m21: +c[2], m31: 0, m41: +c[4],\n        m12: +c[1], m22: +c[3], m32: 0, m42: +c[5],\n        m13: 0,     m23: 0,     m33: 1, m43: 0,\n        m14: 0,     m24: 0,     m34: 0, m44: 1\n      };\n    } else if (c.length === 16) {\n      // matrix3d() (4x4)\n      matrix = {\n        m11: +c[0], m21: +c[4], m31: +c[8], m41: +c[12],\n        m12: +c[1], m22: +c[5], m32: +c[9], m42: +c[13],\n        m13: +c[2], m23: +c[6], m33: +c[10], m43: +c[14],\n        m14: +c[3], m24: +c[7], m34: +c[11], m44: +c[15]\n      };\n\n    } else {\n      // handle 'none' or invalid values.\n      matrix = Object.assign({},DEFAULT_MATRIX);\n    }\n    return matrix;\n  }\n}());\n\n/* https://keithclark.co.uk/articles/calculating-element-vertex-data-from-css-transforms/ */\nexport const getElementTransform = function(el){\n  let computedStyle = getComputedStyle(el, null);\n  let val     = computedStyle.transform || computedStyle.webkitTransform || computedStyle.MozTransform || computedStyle.msTransform;\n  let matrix  = parseMatrix(val);\n  let rotateY = Math.asin(-matrix.m13);\n  let rotateX = Math.atan2(matrix.m23, matrix.m33)\n  let rotateZ = Math.atan2(matrix.m12, matrix.m11);\n  \n  return {\n    rotate: {\n      x: rotateX,\n      y: rotateY,\n      z: rotateZ\n    },\n    translate: {\n      x: matrix.m41,\n      y: matrix.m42,\n      z: matrix.m43\n    },\n    matrix: matrix,\n    transformStyle: val\n  };\n};\n\nexport const windowRect = function(){\n  return rect({\n    left:window.screenLeft || window.screenX,\n    top:window.screenTop || window.screenY,\n    width:window.outerWidth,\n    height:window.outerHeight\n  });\n}\n\nexport const screenRect = function(){\n  return rect({\n    left:0,\n    top:0,\n    width:screen.width,\n    height:screen.height\n  });\n}\n\n\nexport const transformVariant = (function(){\n  const TRANSFORM_UNDEFINED = \"0\";\n  \n  const parseTransformValue = function(value,matched){\n    likeString(value) && matched(value);\n  };\n  \n  const parseTransformMultivalue = function(value,matched){\n    isArray(value) && matched(value);\n  };\n  \n  const valueProcess = function(value,unit){\n    if(typeof value === \"number\"){\n      return `${value}${unit}`;\n    }\n    if(typeof value === \"string\" && value.trim() !== \"\"){\n      return value;\n    }\n    return undefined;\n  };\n  \n  const singleValueHook = function(bag,unit,i){\n    return (value)=>{\n      const parseValue = valueProcess(value,unit);\n      if(parseValue === undefined) return;\n      bag[i] = parseValue;\n    }\n  };\n  \n  const multiValueHook = function(bag,unit){\n    return (multiValue)=>{\n      multiValue.forEach((value,i)=>{\n        const parseValue = valueProcess(value,unit);\n        if(parseValue === undefined) return;\n        bag[i] = parseValue;\n      })\n    }\n  };\n  \n  const oneNumberToTwoArray = function(one){\n    return typeof one === \"number\" ? [one, one] : one;\n  };\n  \n  return function(props){\n    if(typeof props !== \"object\"){\n      return \"\";\n    }\n    const { translateX, translateY, scaleX, scaleY, scaleZ, rotateX, rotateY, rotateZ } = props;\n    let { translate, translate3d, scale, scale3d, rotate, rotate3d } = props;\n    translate   = oneNumberToTwoArray(translate);\n    translate3d = oneNumberToTwoArray(translate3d);\n    scale       = oneNumberToTwoArray(scale);\n    scale3d     = oneNumberToTwoArray(scale3d);\n    if(typeof rotate === \"number\"){\n      rotate = [undefined,undefined,rotate];\n    }\n    if(typeof rotate3d === \"number\"){\n      rotate3d = [rotate3d];\n    }\n    \n    const translateVars = Array(3).fill(TRANSFORM_UNDEFINED);\n    const scaleVars  = Array(3).fill(TRANSFORM_UNDEFINED);\n    const rotateVars = Array(4).fill(TRANSFORM_UNDEFINED);\n    const perspective = valueProcess(props.perspective,\"px\");\n    const result = [];\n    \n    parseTransformMultivalue(translate,multiValueHook(translateVars,\"px\"));\n    parseTransformMultivalue(translate3d,multiValueHook(translateVars,\"px\"));\n    parseTransformMultivalue(scale,multiValueHook(scaleVars,\"%\"));\n    parseTransformMultivalue(scale3d,multiValueHook(scaleVars,\"%\"));\n    parseTransformMultivalue(rotate,multiValueHook(rotateVars,\"deg\"));\n    parseTransformMultivalue(rotate3d,multiValueHook(rotateVars,\"deg\"));\n    parseTransformValue(translateX,singleValueHook(translateVars,\"px\",0))\n    parseTransformValue(translateY,singleValueHook(translateVars,\"px\",1))\n    parseTransformValue(scaleX,singleValueHook(scaleVars,\"%\",0))\n    parseTransformValue(scaleY,singleValueHook(scaleVars,\"%\",1))\n    parseTransformValue(scaleZ,singleValueHook(scaleVars,\"%\",2))\n    parseTransformValue(rotateX,singleValueHook(rotateVars,\"deg\",0))\n    parseTransformValue(rotateY,singleValueHook(rotateVars,\"deg\",1))\n    parseTransformValue(rotateZ,singleValueHook(rotateVars,\"deg\",2))\n    \n    perspective && result.push(`perspective(${perspective})`);\n    \n    if(translateVars.some(v=>v !== TRANSFORM_UNDEFINED)){\n      translateVars[2] === TRANSFORM_UNDEFINED ? \n      result.push(`translate(${translateVars[0]},${translateVars[1]})`) :\n      result.push(`translate3d(${translateVars[0]},${translateVars[1]},${translateVars[2]})`)\n    }\n    if(scaleVars.some(v=>v !== TRANSFORM_UNDEFINED)){\n      scaleVars[2] === TRANSFORM_UNDEFINED ? \n      result.push(`scale(${scaleVars[0]},${scaleVars[1]})`) :\n      result.push(`scale3d(${scaleVars[0]},${scaleVars[1]},${scaleVars[2]})`)\n    }\n    if(rotateVars.some(v=>v !== TRANSFORM_UNDEFINED)){\n      if(rotateVars[0] === TRANSFORM_UNDEFINED && rotateVars[1] === TRANSFORM_UNDEFINED && rotateVars[2] !== TRANSFORM_UNDEFINED ){\n        return result.push(`rotate(${rotateVars[2]})`);\n      }\n      if(rotateVars[0] !== TRANSFORM_UNDEFINED){\n        result.push(`rotate3d(1,0,0,${rotateVars[0]})`)\n      }\n      if(rotateVars[1] !== TRANSFORM_UNDEFINED){\n        result.push(`rotate3d(0,1,0,${rotateVars[1]})`)\n      }\n      if(rotateVars[2] !== TRANSFORM_UNDEFINED){\n        result.push(`rotate3d(0,0,1,${rotateVars[2]})`)\n      }\n    }\n    \n    return result.join(\" \");\n  }\n}())\n\nexport const svgPathWithVertex = function(vertex, close){\n  let dValue = \"\";\n  \n  vertex.forEach((point, index)=>{\n    const prefix = index === 0 ? 'M' : 'L';\n    dValue += `${prefix}${point.x} ${point.y} `;\n  });\n  \n  if(!!dValue && close === true){\n    dValue += \" Z\";\n  }\n  \n  return dValue;\n}\n\nconst SVGBuilder = function(){\n  this.drawVariants = [];\n};\n\nSVGBuilder.prototype = {\n  addPath (points,attributes){\n    this.drawVariants.push({\n      tag:\"path\",\n      attributes,\n      params:points\n    })\n    return this;\n  },\n  createElement (){\n    const svgTag = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\n    let realMaxWidth  = 0;\n    let realMaxHeigth = 0; \n    \n    this.drawVariants.forEach(({ tag, attributes, params})=>{\n      if( tag === \"path\"){\n        const pathElement = document.createElementNS('http://www.w3.org/2000/svg', \"path\");\n        \n        if(typeof attributes !== \"object\"){\n          attributes = {};\n        }\n        \n        pathElement.setAttribute(\"fill\", attributes['fill'] || \"transparent\");\n        pathElement.setAttribute(\"stroke\", attributes['stroke'] || \"gray\");\n        pathElement.setAttribute(\"stroke-width\", attributes['strokeWidth'] || attributes['stroke-width'] || \"1\");\n        pathElement.setAttribute(\"stroke-linecap\",\"butt\");\n        pathElement.setAttribute(\"stroke-linejoin\",\"miter\");\n        \n        const dValue = svgPathWithVertex(params);\n        params.forEach(point=>{\n          if(point.x > realMaxWidth) realMaxWidth = point.x;\n          if(point.y > realMaxHeigth) realMaxHeigth = point.y;\n        });\n        \n        pathElement.setAttribute(\"d\",dValue);\n        svgTag.appendChild(pathElement);\n      }\n    });\n    svgTag.setAttribute(\"style\",\"overflow:visible;\");\n    svgTag.setAttribute(\"width\",realMaxWidth);\n    svgTag.setAttribute(\"height\",realMaxHeigth);\n    return svgTag;\n  }\n}\n\nexport const makeSVG = function(){\n  return new SVGBuilder();\n}","import { \n  isObject,\n  isArray,\n  isFunction,\n  isNode,\n  isEmpty,\n  likeRegexp,\n} from './isLike'\n\nimport {\n  toArray,\n  asArray,\n  instance\n} from './cast'\n\nimport {\n  get\n} from './read';\n\nexport const unique = function(array){\n  var value = [],result = [], array = toArray(array);\n  for(var i=0,l=array.length;i<l;i++){\n    var unique = true;\n    for(var i2=0,l2=result.length;i2<l2;i2++){\n      if(array[i] == result[i2]){\n        unique = false; break;\n      }\n    }\n    if(unique==true) result.push(array[i]);\n  }\n  return result;\n}\n\nexport const unique2 = function(array,findKey){\n  const result    = [];\n  const uniqueSet = new Set();\n  if(typeof findKey === \"undefined\") { findKey=(v)=>v; }\n  if(typeof findKey === \"string\")    {  const keyPath = findKey; findKey=(v)=>v[keyPath]; }\n  array.forEach((v)=>{\n    const key = findKey(v);\n    if(uniqueSet.has(key)) return;\n    uniqueSet.add(key);\n    result.push(v);\n  })\n  return result;\n}\n\nexport const getKeyBy = function(object,value){\n  if(isFunction(value)){\n    if(isArray(object)) for(var i=0,l=object.length;i<l;i++) if(value(object[i],i)===true) return i;\n    if(isObject(object)) for(var key in object) if(value(object[key],key)===true) return key;\n  } else {\n    if(isArray(object)) for(var i=0,l=object.length;i<l;i++) if(object[i]===value) return i;\n    if(isObject(object)) for(var key in object) if(object[key]===value) return key;\n  }\n}\n\nexport const clearOf = function(data,fillFn,sp){\n  if(data instanceof Array){\n    sp = Array.prototype.splice.call(data,0,data.length);\n  } else if(typeof data == \"object\") {\n    sp = {};\n    for(var key in data){ sp[key] = data[key]; delete data[key]; } \n  }\n  return (fillFn && fillFn(data,sp)), data;\n}\n\nexport const insertOf = function(data,v,a){\n  isArray(data) && data.splice(typeof a === \"number\"?a:0,0,v)\n  return data;\n}\n\nexport const moveOf = function(data,oldIndex,newIndex){\n  if(oldIndex !== newIndex && isArray(data) && typeof oldIndex === \"number\" && typeof newIndex === \"number\" && oldIndex >= 0 && oldIndex < data.length){\n    Array.prototype.splice.call(data,newIndex > data.length ? data.length : newIndex,0,Array.prototype.splice.call(data,oldIndex,1)[0]);\n  }\n  return data;\n}\n\nexport const concatOf = function(data,appends){\n  var data = asArray(data);\n  return asArray(appends).forEach(value=>{ data.push(value); }), data;\n}\n\n\nexport const filterOf = function(data,func,exitFn){\n  var data    = asArray(data);\n  var exitCnt = 0;\n\n  for(var i=0,ri=0,keys=Object.keys(data),l=keys.length;i<l;i++,ri++){\n    var key   = keys[i];\n    var value = data[key];\n    var result = func(value,key);\n    if(result == false) {\n      var exit = Array.prototype.splice.call(data,i,1);\n      i--;\n      l--;\n      typeof exitFn === \"function\" && exitFn(value,ri,exitCnt++);\n    }\n  }\n  \n  return data;\n}\n\nexport const sortOf = function(data,filter){\n  if(data.length == 0){\n    return data;\n  }\n  \n  switch(filter){\n  case 'desc':\n    filter = function(a,b){ return a>b; }\n    break;\n  case undefined:\n  case 'asc':\n  default:\n    if(typeof filter !== \"function\"){\n      filter = function(a,b){ return a<b; }\n    }\n    break;\n  }\n\n  var result = [data[0]];\n\n  for(var i=1,l=data.length;i<l;i++){\n    for(var ri=0,rl=result.length;ri<rl;ri++){\n      if(filter(data[i],result[ri]) === true){\n        insertOf(result,data[i],ri);\n        break;\n      }\n      if((ri + 1) === result.length){\n        result.push(data[i]);\n      }\n    }\n  }\n\n  clearOf(data);\n\n  for(var i=0,l=result.length;i<l;data.push(result[i]),i++);\n  \n  return data;\n}\n\nexport const rebase = function(obj,ref){\n  var result = {};\n  for(var key in obj){\n    if(key === \".*\"){\n      var refValue = obj[key];\n      for(var i=0,d=Object.keys(ref),l=d.length;i<l;i++){\n        var refKey = d[i];\n        if(typeof refValue === \"function\"){\n          result[refKey] = obj[key];\n        } else {\n          if((typeof refValue !== \"object\" && typeof refValue !== \"object\") || isNode(refValue)){\n            result[refKey] = refValue;\n          } else {\n            result[refKey] = Object.assign(result[refKey],refValue);\n          }\n        }\n      }\n    } else if(key.indexOf(\",\") > -1){\n      key.split(\",\").forEach(deepKey=>{\n        deepKey = deepKey.trim();\n        if(typeof obj[key] === \"function\"){\n          result[deepKey] = obj[key];\n        } else {\n          if((!result.hasOwnProperty(deepKey) && typeof obj[key] !== \"object\") || isNode(obj[key])){\n            result[deepKey] = obj[key];\n          } else {\n            result[deepKey] = Object.assign( result[deepKey] || (isArray(obj[key]) ? [] : {}), obj[key], obj[deepKey] );\n          }\n\n        }\n      })\n    } else {\n      if(typeof obj[key] === \"function\"){\n        result[key] = obj[key];\n      } else {\n        if((typeof result[key] !== \"object\" && typeof obj[key] !== \"object\") || isNode(obj[key])){\n          result[key] = obj[key]\n        } else {\n          result[key] = Object.assign(result[key],obj[key]);\n        }\n      }\n    }\n  }\n  return result;\n}\n\n\n\n//TODO: Union hasValue\nconst NESTED_HAS_PROC = function(obj,key){\n  var keys = key.split(\".\");\n  if(!keys.length) return false;\n\n  var pointer = obj;\n  for(var ki in keys){\n    var k = keys[ki];\n\n    if(!pointer.hasOwnProperty(k)){\n      return false;\n    } else {\n      pointer = pointer[k];\n    }\n  }\n  return true;\n}\n\nexport const apart = function(text,split,block,blockEnd){\n  if(typeof text !== \"string\") return [text];\n  \n  let result = text.split(split===true?/\\s+/:split||/\\s+/);\n  \n  if(likeRegexp(block)){\n    if(!likeRegexp(blockEnd)){\n      blockEnd = block;\n    }\n    \n    let aparts = []\n    let buffer = { dept:0, parts:[] }\n    \n    for(let d=result,i=0,l=d.length;i<l;i++){\n      let part = d[i]\n      let greb = {\n        start:findIndexes(part,block), \n        end  :findIndexes(part,blockEnd) \n      }\n      \n      console.log(\"part, greb\", part, greb);\n      \n      for(let d=greb.start,i=0,l=d.length;i<l;++i){\n        let startIndex = d[i]\n      }\n    }\n    \n    return aparts;\n  } else {\n    return result;\n  }\n}\n\nexport const diffStructure = function(before,after){\n  var afterKeys = Object.keys(after);\n  var beforeKeys;\n  var canDiff = false;\n  if(isObject(before)){\n    if(isArray(before)){\n      beforeKeys = before;\n    } else {\n      beforeKeys = Object.keys(before);\n      canDiff    = true;\n    }\n  } else {\n    beforeKeys = [];\n  }\n\n  var analysis = {\n    after:after,\n    before:before,\n    keys:unique(afterKeys.concat(beforeKeys)).reduce((dest,key)=>{ dest[key] = undefined;  return dest; },{}),\n    match:[],\n    missing:[],\n    surplus:[],\n    diff:[],\n    pass:false\n  };\n  \n  //match, missing\n  for(var ki in beforeKeys){\n    if(!beforeKeys.hasOwnProperty(ki)) continue;\n      \n    var key = beforeKeys[ki];\n      \n    if(NESTED_HAS_PROC(after,key)){\n      analysis.match.push(key);\n      analysis.keys[key] = \"match\";\n\n      if(canDiff && !angular.equals(get(after,key),get(before,key))) {\n        analysis.diff.push(key);\n        analysis.keys[key] = \"diff\";\n      }\n    } else {\n      analysis.surplus.push(key);\n      analysis.keys[key] = \"surplus\";\n    }\n  }\n\n  //surplus\n  asArray(afterKeys).forEach(key=>{\n    if(!hasValue(analysis.match,key)){\n      analysis.missing.push(key);\n      analysis.keys[key] = \"missing\";\n    }\n  });\n\n  //absolute\n  analysis.pass = !analysis.missing.length && !analysis.surplus.length;\n\n  return analysis;\n}\n\n//PINPONGPOOL INTERFACE\nexport const toggle = function(ta,cv,set){\n  var index = -1;\n  for(let d=asArray(ta),l=d.length,i=0;i<l;i++){\n    if(d[i] == cv) { index = i+1; break; }\n  }\n  if(arguments.length > 2) for(var i=0,l=ta.length;i<l;i++) if( ta[i] == set ) return ta[i];\n  index = ta.length == index ? 0 : index;\n  return ta[index];\n}","/*\n  usage\n  const size = 20\n  const stroke = 1\n\n  const { x, y, radius, diameter } = drawCircleVars(size, stroke);\n  \n  const d = `M${x} ${y} \n  a ${radius} ${radius} 0 0 1 0 ${diameter}\n  a ${radius} ${radius} 0 0 1 0 -${diameter}`\n\n  <svg viewbox=\"0 0 {size} {size}\">\n    <path d=\"{d}\" stroke-width=\"stroke\"></path>\n  </svg>\n*/\nexport const drawCircleVars = function(circleWidth, strokeWidth=0, drawRatio=1){\n  const circumference = ((circleWidth - strokeWidth) / 2 ) * ( 3.14159 * 2 );\n  const radius        = (circumference / ( 3.14159 * 2 ));\n  const diameter      = (radius * 2);\n  const x             = circleWidth / 2;\n  const y             = strokeWidth / 2;\n  //const circumLength  = drawRatio == 1 ? drawRatio : drawRatio * circumference;\n    \n  return { x, y, radius, diameter, circumference, circleWidth, strokeWidth };\n};","import { isArray, asArray } from '../../functions';\n\nexport const readUrl = function(inputUrl){\n  let info;\n  let url; \n    \n  try {\n    url  = inputUrl?inputUrl:window.document.URL.toString();\n    info = /([\\w]+)(\\:[\\/]+)([^/]*\\@|)([\\w\\d\\.\\-\\_\\+]+)(\\:[\\d]+|)(\\/|)([\\w\\d\\.\\/\\-\\_\\;\\=]+|)(\\?[\\d\\w\\=\\&\\%\\,\\.\\/\\(\\)-]+|)(\\#[\\d\\w]*|)/.exec(url);\n  } catch(e) {\n    info = null;\n  }\n  \n  if(info === null) {\n    console.error(\"faild parse url\",inputUrl);\n    return {\n      url:url || null,\n      valid:false\n    };\n  }\n  \n  const protocol = info[1];\n  const divider = info[2];\n  const userinfo = info[3];\n  const hostname = info[4];\n  const port = info[5].substring(1);\n  const path = info[6]+info[7];\n  const query = info[8];\n  const fragment = info[9];\n  const filename = /(\\/|)([\\w\\d\\.\\-\\_]+|)$/.exec(info[6]+info[7])[2];\n  const host = info[1]+info[2]+info[4]+info[5];\n  const params = (function(){\n    const result = {};\n    if(query){\n      query.substr(1).split(\"&\").forEach((onePiece)=>{\n        const entry = onePiece.split(\"=\");\n        result[decodeURI(entry[0])] = decodeURI(entry[1]);\n      });\n    }\n    return result;\n  }());\n\n  return {\n    url,\n    protocol,\n    divider,\n    userinfo,\n    hostname,\n    port,\n    path,\n    query,\n    fragment,\n    filename,\n    host,\n    params,\n    valid:true\n  };\n};\n    \nexport const serialize = function(obj,transform){\n  const params = [];\n  let invalid  = [];\n  \n  Object.keys(obj).forEach(key=>{\n    let value = obj[key];\n    let stringValue = \"\";\n\n    if(typeof value === \"undefined\"){\n      return;\n    } else if(value === null){\n      stringValue = \"\";\n    } else if(isArray(value)){\n      return value.each((val)=>{\n        typeof transform === \"function\" ?\n        params.push(transform(key) + \"=\" + transform(val)):\n        params.push(key + \"=\" + val);\n      });\n    } else if(typeof value === \"object\") {\n      return invalid.push(key);\n    } else {\n      stringValue = value + \"\";\n    }\n          \n    typeof transform === \"function\" ?\n    params.push(transform(key) + \"=\" + transform(stringValue)):\n    params.push(key + \"=\" + stringValue);\n  })\n      \n  if(invalid.length){\n    invalid = null;\n  }\n  \n  return params.join(\"&\");\n}","import { isPlainObject } from '../../functions';\n\nconst $ = require('jquery');\n\nconst getCurrentTarget = function(originalEvent, fallbackElement){\n  let result = originalEvent.currentTarget || originalEvent.target;\n  return (result && result.documentElement) ? (fallbackElement || result.documentElement) : document.documentElement;\n}\n\nconst isElementEvent = $.isElementEvent = function (e){\n  return typeof e.stopPropagation === \"function\";\n}\n\nconst getOriginalEvent = $.getOriginalEvent = function(e){\n  if(!isElementEvent(e)) return undefined;\n};\n\nconst getElementPosition = $.getElementPosition = function(el){\n  let [ element ] = $(el);\n  \n  if(!element) return null;\n  \n  let xPosition = 0;\n  let yPosition = 0;\n  \n  while(element && !element.documentElement){\n    xPosition += (element.offsetLeft - element.scrollLeft + element.clientLeft);\n    yPosition += (element.offsetTop  - element.scrollTop  + element.clientTop );\n    element   = element.offsetParent;\n  }\n  \n  return {x:xPosition,y:yPosition};\n}\n\n\nconst getPointerPosition = $.getPointerPosition = function(e, root){\n  \n  root = !root ? document.documentElement : root;\n\n  const evt = getOriginalEvent(e);\n  const pos = getElementPosition(root);\n  \n  if(!pos) return;\n  \n  pos.x = (e.touches ? e.targetTouches[0].pageX : e.pageX) - pos.x;\n  pos.y = (e.touches ? e.targetTouches[0].pageY : e.pageY) - pos.y;\n  \n  if(e.touches){\n    var rect = e.target.getBoundingClientRect();\n    var x = e.targetTouches[0].pageX - rect.left;\n    var y = e.targetTouches[0].pageY - rect.top;\n  }\n  return pos;\n}\n\n$.fn.extend({\n  //파라메터 노드가 제이쿼리가 가진 노드 안에 있는지 확인\n  containsIn (node){\n    var [ target ] = $(node).eq(0);\n    if(target) for(var i=0,l=this.length;i<l;i++){\n      if(this[i] === target) return true;\n      if(this.eq(i).find(target).length) return true;\n    }\n    return false;\n  },\n  //파라메터 노드가 제이쿼리가 가진 노드 밖에 있는지 확인\n  containsOut (node){\n    return !this.containsIn(node);\n  },\n  /*\n    //\n    $(window).predict()\n    $(window).predict({center:20});\n    $(window).predict({center:event});\n    \n    //TODO\n    $(window).predict(element)\n    $(window).predict(element, {center:20});\n  */\n  predict (option,root){\n    const [ element ] = this.eq(0);\n    if(!element) return;\n    \n    const { offsetTop, offsetLeft, offsetWidth, offsetHeight } = element[\"innerWidth\"] ? {\n      offsetTop   :0, \n      offsetLeft  :0, \n      offsetWidth :window.innerWidth, \n      offsetHeight:window.innerHeight\n    } : element;\n    \n    const result = {\n      top   :offsetTop,\n      left  :offsetLeft,\n      width :offsetWidth,\n      height:offsetHeight,\n      right :offsetLeft + offsetWidth,\n      bottom:offsetTop + offsetHeight,\n      center:offsetLeft + offsetWidth / 2,\n      middle:offsetTop + offsetHeight / 2\n    };\n    \n    \n    //if(isElementEvent(option)){\n    //  const { x:left, y:top } = getPointerPosition(offset);\n    //  option = { left, top };\n    //}\n      \n    if(isPlainObject(option)){\n      //console.log(\"option,\",option)\n      const allProps = [\"top\", \"left\", \"width\", \"height\", \"right\", \"bottom\", \"center\", \"middle\"].filter(key=>option.hasOwnProperty(key));\n      \n      //event option\n      allProps.forEach((key)=>{\n        const optionOfKey = option[key]\n        if(!isElementEvent(optionOfKey)) return;\n        const pointerPosition = getPointerPosition(optionOfKey,root || getCurrentTarget(optionOfKey, element) || element);\n        if(!pointerPosition) return;\n        \n        if(/left|width|right|center/.test(key)){\n          option[key] = pointerPosition[\"x\"]\n        }\n        \n        if(/top|middle|bottom|height/.test(key)){\n          option[key] = pointerPosition[\"y\"]\n        }\n      });\n      \n      allProps.forEach((key)=>{\n        if(typeof option[key] !== \"number\") return;\n\n        const valueOfKey = result[key];  \n        let equalize;\n        \n        switch(key){\n        case \"top\":\n        case \"middle\":\n          equalize = [\"y\", option[key] - valueOfKey];\n          break;\n        case \"left\":\n        case \"center\":\n          equalize = [\"x\", option[key] - valueOfKey];\n          break;\n        case \"width\":\n          equalize = [\"width\", option[key] - valueOfKey];\n          break;\n        case \"height\":\n          equalize = [\"height\", option[key] - valueOfKey];\n          break;\n        case \"right\":\n          break;\n        case \"bottom\":\n          break;\n        }\n          \n        switch(equalize && equalize[0]){\n        case \"x\":\n          result[\"left\"]   += equalize[1];\n          result[\"center\"] += equalize[1];\n          result[\"right\"]  += equalize[1];\n          break;\n        case \"y\":\n          result[\"top\"]    += equalize[1];\n          result[\"middle\"] += equalize[1];\n          result[\"bottom\"] += equalize[1];\n          break;\n        case \"width\":\n          result[\"width\"]  += equalize[1];\n          result[\"right\"]  += equalize[1];\n          result[\"center\"] += (result[\"right\"] - result[\"left\"] / 2);\n          break;\n        case \"height\":\n          result[\"height\"] += equalize[1];\n          result[\"bottom\"] += equalize[1];\n          result[\"middle\"] += (result[\"bottom\"] - result[\"top\"] / 2);\n          break;\n        }\n      });\n    }\n    \n    return result;\n  }\n});\n\nexport default $;","import $ from '../plugins/jquery';\nimport { rebase } from '../../functions';\n\n//\nconst DEVICE_EVENT = (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) ?\n{\n  TOUCH_DEVICE:true,\n  START:'touchstart',\n  MOVE:'touchmove',\n  END:'touchend'\n}:\n{\n  TOUCH_DEVICE:false,\n  START:'mousedown',\n  MOVE:'mousemove',\n  END:'mouseup'\n};\n\n//\nlet dragRetainCount=0;\n\n//\nconst bindDraggingAttribute = function(){\n  if(dragRetainCount > 0){\n    document.body.setAttribute(\"dragging\",\"\");\n  } else {\n    document.body.removeAttribute(\"dragging\");\n  }\n};\n\n//\nDEVICE_EVENT.TOUCH_DEVICE && window.addEventListener(\"touchmove\",(e)=>{\n  dragRetainCount > 0 && e.preventDefault();\n},{passive: false});\n\n\n//드래그\nlet touchFixX;\nlet touchFixY;\nconst pointerParse = ({ clientX, clientY, touches })=>{\n  if(touches){\n    if(!touches[0]){\n      return {\n        x:touchFixX,\n        y:touchFixY\n      }\n    };\n    \n    const { clientX:touchClientX, clientY:touchClientY } = touches[0];\n    touchFixX = touchClientX;\n    touchFixY = touchClientY;\n    \n    return {\n      x:touchClientX,\n      y:touchClientY\n    };\n  }\n  return {\n    x:clientX,\n    y:clientY\n  };\n};\n\nexport default function DragHelper(element,option){\n  const $element = $(element).eq(0);\n  const [ dragElement ] = $element;\n  let startFn;\n  let moveFn;\n  let endFn;\n  \n  let dragParams = null;\n  let firstDrag  = null;\n  let lastDrag   = null;\n  \n  const resetOptions = function(){\n    const getOptions = rebase(typeof option === \"function\" ? option({ element:$element }) : option);\n    startFn = getOptions[\"start\"];\n    moveFn = getOptions[\"move\"];\n    endFn = getOptions[\"end\"];\n  };\n  \n  const getCurrentPointerDrag = function(originalEvent){\n    const pointerDrag = pointerParse(originalEvent);\n  \n    //현재 이동한 거리\n    pointerDrag.moveX = pointerDrag.x - lastDrag.x;\n    pointerDrag.moveY = pointerDrag.y - lastDrag.y;\n    \n    //처음으로부터 변경된 거리\n    pointerDrag.offsetX = pointerDrag.x - firstDrag.x;\n    pointerDrag.offsetY = pointerDrag.y - firstDrag.y;\n    \n    //처음으로 부터 변경되어 엘리먼트 오프셋 크기\n    pointerDrag.leftValue = dragParams.offset.left + pointerDrag.offsetX;\n    pointerDrag.topValue  = dragParams.offset.top + pointerDrag.offsetY;\n    \n    pointerDrag.left = pointerDrag.leftValue + \"px\";\n    pointerDrag.top  = pointerDrag.topValue + pointerDrag.offsetY + \"px\";\n    \n    return pointerDrag;\n  }\n  \n  const dragEnter = function(originalEvent){\n    //init\n    resetOptions();\n    \n    //\n    const elementOffset = $element.predict();\n    const pointerDrag   = pointerParse(originalEvent);\n    \n    firstDrag = pointerDrag;\n    lastDrag  = pointerDrag;\n    \n    dragParams = { offset:elementOffset, pointer:undefined, event:originalEvent };\n    dragParams.pointer = getCurrentPointerDrag(originalEvent);\n    \n    startFn && startFn(dragParams);\n    \n    document.addEventListener(DEVICE_EVENT.MOVE,dragMove);\n    document.addEventListener(DEVICE_EVENT.END,dragExit);\n    \n    dragRetainCount+=1;\n    bindDraggingAttribute();\n  };\n  \n  const dragMove = function(originalEvent){\n    const pointerDrag = pointerParse(originalEvent);\n    \n    if(!moveFn){\n      lastDrag = pointerDrag;\n      return;\n    } else {\n      dragParams.pointer = getCurrentPointerDrag(originalEvent);\n      dragParams.event   = originalEvent;\n      moveFn(dragParams);\n      lastDrag = pointerDrag;\n    }\n  };\n  \n  const dragExit = function(originalEvent){\n    dragParams.pointer = getCurrentPointerDrag(originalEvent);\n    dragParams.event   = originalEvent;\n    endFn && endFn(dragParams);\n    dragParams = undefined;\n    \n    document.removeEventListener(DEVICE_EVENT.MOVE,dragMove);\n    document.removeEventListener(DEVICE_EVENT.END,dragExit);\n    \n    dragRetainCount-=1;\n    bindDraggingAttribute();\n  };\n  \n  dragElement.addEventListener(DEVICE_EVENT.START,dragEnter);\n  \n  return $element;\n}","import { asArray } from '../../functions';\n\nexport default function RepeatHelper({ key, enter:enterFn, update:updateFn, exit:exitFn }){\n  // {key:string, vm:Component}\n  let oldBag = [];\n  \n  // 모델의 키를 얻는 함수\n  const getKey = typeof key === \"function\" ? key : function(datum){\n    return datum[key];\n  }\n  \n  // ng-repeat, v-for와 같은 리피터 구현체 (d3의 data().enter().exit() 컨샙이 비슷함)\n  const repeater = function(data){\n    let newData = asArray(data);\n    let newBag  = [];\n    \n    //새 데이터를 검사합니다.\n    newData.forEach((datum, index)=>{\n      //키를 추출합니다.\n      const newDatumKey = getKey(datum) || index;\n      \n      //키 샘플입니다.\n      const newMeta = {\n        key:newDatumKey,\n        datum:datum,\n      };\n      \n      //매치되는 오래된 메타를 확인합니다.\n      const matchOldMeta = oldBag.find(old=>old.key === newDatumKey);\n      \n      //오래된 메타가 확인될 시\n      if(matchOldMeta){\n        //exit를 하지 않고 살립니다.\n        newMeta.vm = matchOldMeta.vm;\n        matchOldMeta.$continue = true;\n      }\n      \n      newBag.push(newMeta);\n    });\n    \n    //exit (require)\n    oldBag.forEach(oldMeta=>{\n      if(!oldMeta.$continue){\n        exitFn(oldMeta);\n      }\n    });\n    \n    //메타에 추가 정보 입력 (prevVm)\n    newBag.forEach((newMeta, index)=>{\n      const prevMeta = newBag[index - 1];\n      if(prevMeta && prevMeta[\"vm\"]){\n        newMeta[\"prevVm\"] = prevMeta[\"vm\"];\n      }\n    });\n    \n    //enter (require)\n    newBag.forEach((newMeta, index)=>{\n      if(!newMeta.vm){\n        let result = enterFn(newMeta, index);\n        if(!result){\n          throw new Error(\"enter는 반드시 vm을 리턴해야합니다.\");\n        } else {\n          newMeta[\"vm\"] = result;\n        }\n      }\n    });\n    \n    //update (option)\n    updateFn && newBag.forEach((newMeta, index)=>{\n      updateFn(newMeta, index);\n    });\n    \n    //history change\n    oldBag = newBag;\n  }\n  \n  //컴포넌트에서 정렬된 데이터를 얻기위한 용도로 제작. Component에서 (개발 시간상) 한계로 이곳에서 수행\n  repeater[\"vm\"] = function(){\n    return oldBag.map(d=>d.vm);\n  }\n  \n  return repeater;\n};","import _dragHelper from './dragHelper';\nimport _repeatHelper from './repeatHelper';\n\nexport const dragHelper   = _dragHelper\nexport const repeatHelper = _repeatHelper","import * as helpers from './web/index.js'\nconst DEFAULT = { ...helpers }\nexport default DEFAULT;"],"names":["reservedSessionStorage","pulledWindowToken","pulledWindowSession","openerPresenceProps","windowServiceReserveSession","name","data","listenHandshake","window","windowServiceHandshake","console","log","windowServicePullSession","getOpenerPresenceProperties","opener","e","warn","saveSessionFn","token","addEventListener","windowProps","WINDOW_POPUP_DEFAULT_WIDTH","WINDOW_POPUP_DEFAULT_HEIGHT","openWindow","href","windowParam","hasParam","windowName","useResize","destWindowWidth","destWindowHeight","destWindowTop","destWindowLeft","availMaxWidth","screen","availWidth","availMaxHeight","availHeight","navigator","platform","indexOf","newWindow","open","closeWindow","close","openTab","focus","historyBack","catchFallback","history","initialPage","length","location","back","toDataString","tods","JSON","stringify","fromDataString","v","eval","setLocalData","k","localStorage","Object","keys","forEach","setItem","key","getLocalData","arguments","stringData","getItem","undefined","isAbsoluteNaN","it","isNone","isNumber","isArray","Array","isObject","likeString","likeArray","nodeFn","webFn","definedNodeList","NodeList","hasOwnProperty","isNode","a","nodeType","isPlainObject","constructor","asArray","defaultArray","toArray","times","fn","result","i","l","push","validMatrix","arr","from","some","likeError","asMatrix","columnSize","rowCount","Math","ceil","column","ci","multiplyMatrix","aMatrix","bMatrix","columnLength","rRowIndex","columnResult","multiplied","reduce","dist","num","index","rColumnIndex","likePoint","p","Point","x","y","z","w","meta","__ref","__meta","__matrix","__computed","matrixVersion","computedVersion","memoizeRef","memoizeOutput","compute","needCompute","newMemoizeRef","newComputedMatrix","dest","matrix","defineProperties","enumerable","get","set","addMatrix","value","Error","prototype","addMeta","obj","assign","clone","toJSON","withMeta","json","pull","width","angle","xHalf","Vertex","vertexWith","destPoint","points","unshift","rectWith","largeX","smallX","largeY","smallY","Rect","pointArray","point","classFunction","methods","start","end","eq","join","joins","refp","newp","splice","order","px","py","pz","pw","sx","sy","sz","sw","ex","ey","ez","ew","transform","rect","useRect","left","top","height","originX","originY","translate","newValue","oldValue","offsetValue","right","bottom","findPoint","findWord","trim","split","lineFind","pointFind","vertex","inheritMeta","perspective","perspectiveOrigin","sticky","position","refX","refY","refWidth","refHeight","valid","getNode","el","select","isElement","Element","getElementOffsetRect","offsetLeft","offsetTop","offsetWidth","offsetHeight","offsetParent","html","body","test","getComputedStyle","getPropertyValue","getBoundingRect","doc","document","win","offsetX","pageXOffset","documentElement","parentNode","scrollLeft","offsetY","pageYOffset","scrollTop","boundingRect","getBoundingClientRect","parent","getElementBoundingRect","elRect","current","getElementTransformMatrix","computedStyle","computedMatrixParam","webkitTransform","MozTransform","msTransform","c","slice","parseMatrix","DEFAULT_MATRIX","m11","m21","m31","m41","m12","m22","m32","m42","m13","m23","m33","m43","m14","m24","m34","m44","matrixParam","getElementTransform","val","rotateY","asin","rotateX","atan2","rotateZ","rotate","transformStyle","windowRect","screenLeft","screenX","screenTop","screenY","outerWidth","outerHeight","screenRect","transformVariant","TRANSFORM_UNDEFINED","parseTransformValue","matched","parseTransformMultivalue","valueProcess","unit","singleValueHook","bag","parseValue","multiValueHook","multiValue","oneNumberToTwoArray","one","props","translateX","translateY","scaleX","scaleY","scaleZ","translate3d","scale","scale3d","rotate3d","translateVars","fill","scaleVars","rotateVars","svgPathWithVertex","dValue","prefix","SVGBuilder","drawVariants","addPath","attributes","tag","params","createElement","svgTag","createElementNS","realMaxWidth","realMaxHeigth","pathElement","setAttribute","appendChild","makeSVG","rebase","ref","refValue","d","refKey","deepKey","readUrl","inputUrl","info","url","URL","toString","exec","error","protocol","divider","userinfo","hostname","port","substring","path","query","fragment","filename","host","substr","onePiece","entry","decodeURI","serialize","invalid","stringValue","each","$","require","getCurrentTarget","originalEvent","fallbackElement","currentTarget","target","isElementEvent","stopPropagation","getOriginalEvent","getElementPosition","element","xPosition","yPosition","clientLeft","clientTop","getPointerPosition","root","evt","pos","touches","targetTouches","pageX","pageY","extend","containsIn","node","find","containsOut","predict","option","innerWidth","innerHeight","center","middle","allProps","filter","optionOfKey","pointerPosition","valueOfKey","equalize","DEVICE_EVENT","DocumentTouch","TOUCH_DEVICE","START","MOVE","END","dragRetainCount","bindDraggingAttribute","removeAttribute","preventDefault","passive","touchFixX","touchFixY","pointerParse","clientX","clientY","touchClientX","touchClientY","DragHelper","$element","dragElement","startFn","moveFn","endFn","dragParams","firstDrag","lastDrag","resetOptions","getOptions","getCurrentPointerDrag","pointerDrag","moveX","moveY","leftValue","offset","topValue","dragEnter","elementOffset","pointer","event","dragMove","dragExit","removeEventListener","RepeatHelper","enterFn","enter","updateFn","update","exitFn","exit","oldBag","getKey","datum","repeater","newData","newBag","newDatumKey","newMeta","matchOldMeta","old","vm","$continue","oldMeta","prevMeta","map","dragHelper","_dragHelper","repeatHelper","_repeatHelper","DEFAULT","helpers"],"mappings":"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"}