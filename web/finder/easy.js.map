{"version":3,"sources":["../../.src/web/finder/easy.js"],"names":["getCurrentTarget","originalEvent","fallbackElement","result","currentTarget","target","documentElement","document","isElementEvent","e","stopPropagation","getElementPosition","el","element","xPosition","yPosition","offsetLeft","scrollLeft","clientLeft","offsetTop","scrollTop","clientTop","offsetParent","x","y","getPointerPosition","$","root","pos","touches","targetTouches","pageX","pageY","containsIn","container","subjects","nodeList","asArray","length","isNode","some","subject","allChildrens","i","l","selector","querySelector","Array","from","querySelectorAll","child","containsOut","predict","option","offsetWidth","window","innerWidth","offsetHeight","innerHeight","top","left","width","height","right","bottom","center","middle","isPlainObject","allProps","filter","key","hasOwnProperty","forEach","optionOfKey","pointerPosition","test","valueOfKey","equalize"],"mappings":"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","sourcesContent":["import { queryFind } from './query-finder'\n\nconst getCurrentTarget = function (originalEvent, fallbackElement){\n  let result = originalEvent.currentTarget || originalEvent.target\n  return (result && result.documentElement) ? (fallbackElement || result.documentElement) : document.documentElement\n}\n\nconst isElementEvent = function (e){\n  return typeof e.stopPropagation === \"function\"\n}\n\nconst getElementPosition = function (el){\n  let element = queryFind(el, 0);\n  \n  if(!element) return null\n  \n  let xPosition = 0\n  let yPosition = 0\n  \n  while(element && !element.documentElement){\n    xPosition += (element.offsetLeft - element.scrollLeft + element.clientLeft)\n    yPosition += (element.offsetTop - element.scrollTop + element.clientTop)\n    element = element.offsetParent\n  }\n  \n  return {x: xPosition, y: yPosition}\n}\n\n\nconst getPointerPosition = $.getPointerPosition = function (e, root){\n  root = !root ? document.documentElement : root\n\n  const pos = getElementPosition(root)\n  \n  if(!pos) return\n  \n  pos.x = (e.touches ? e.targetTouches[0].pageX : e.pageX) - pos.x\n  pos.y = (e.touches ? e.targetTouches[0].pageY : e.pageY) - pos.y\n  \n  return pos\n}\n\nexport const containsIn = function (container, subjects){\n  container = nodeList(container, 0);\n  subjects = asArray(subjects);\n  \n  if(!subjects.length || !isNode(container) || subjects.some(subject=>typeof subject === \"string\" ? false : !isNode(subject))){\n    return false;\n  }\n  \n  let allChildrens = null;\n  \n  for(let i=0,l=subjects.length;i<l;i++){\n    const selector = subjects[i];\n    \n    if(typeof selector === \"string\"){\n      if(container.querySelector(selector)){\n        return true;\n      }\n    } else {\n      if(!allChildrens) allChildrens = Array.from(container.querySelectorAll(\"*\"));\n      if(allChildrens.some(child=>child===selector)){\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nexport const containsOut = function (container, subjects){\n  return containsIn(container, subjects);\n}\n\nexport const predict = function (container, option, root){\n  const element = nodeList(container, 0);\n  if(!isNode(element)) return;\n  \n  const { offsetTop, offsetLeft, offsetWidth, offsetHeight } = element[\"innerWidth\"] ? {\n    offsetTop   : 0, \n    offsetLeft  : 0, \n    offsetWidth : window.innerWidth, \n    offsetHeight: window.innerHeight\n  } : element\n  \n  const result = {\n    top   : offsetTop,\n    left  : offsetLeft,\n    width : offsetWidth,\n    height: offsetHeight,\n    right : offsetLeft + offsetWidth,\n    bottom: offsetTop + offsetHeight,\n    center: offsetLeft + offsetWidth / 2,\n    middle: offsetTop + offsetHeight / 2\n  }\n  \n  \n  //if(isElementEvent(option)){\n  //  const { x:left, y:top } = getPointerPosition(offset);\n  //  option = { left, top };\n  //}\n    \n  if(isPlainObject(option)){\n    //console.log(\"option,\",option)\n    const allProps = [\"top\", \"left\", \"width\", \"height\", \"right\", \"bottom\", \"center\", \"middle\"].filter(key=>option.hasOwnProperty(key))\n    \n    //event option\n    allProps.forEach((key)=>{\n      const optionOfKey = option[key]\n      if(!isElementEvent(optionOfKey)) return\n      const pointerPosition = getPointerPosition(optionOfKey, root || getCurrentTarget(optionOfKey, element) || element)\n      if(!pointerPosition) return\n      \n      if(/left|width|right|center/.test(key)){\n        option[key] = pointerPosition[\"x\"]\n      }\n      \n      if(/top|middle|bottom|height/.test(key)){\n        option[key] = pointerPosition[\"y\"]\n      }\n    })\n    \n    allProps.forEach((key)=>{\n      if(typeof option[key] !== \"number\") return\n\n      const valueOfKey = result[key]  \n      let equalize\n      \n      switch (key){\n        case \"top\":\n        case \"middle\":\n          equalize = [\"y\", option[key] - valueOfKey]\n          break\n        case \"left\":\n        case \"center\":\n          equalize = [\"x\", option[key] - valueOfKey]\n          break\n        case \"width\":\n          equalize = [\"width\", option[key] - valueOfKey]\n          break\n        case \"height\":\n          equalize = [\"height\", option[key] - valueOfKey]\n          break\n        case \"right\":\n          break\n        case \"bottom\":\n          break\n      }\n        \n      switch (equalize && equalize[0]){\n        case \"x\":\n          result[\"left\"] += equalize[1]\n          result[\"center\"] += equalize[1]\n          result[\"right\"] += equalize[1]\n          break\n        case \"y\":\n          result[\"top\"] += equalize[1]\n          result[\"middle\"] += equalize[1]\n          result[\"bottom\"] += equalize[1]\n          break\n        case \"width\":\n          result[\"width\"] += equalize[1]\n          result[\"right\"] += equalize[1]\n          result[\"center\"] += (result[\"right\"] - result[\"left\"] / 2)\n          break\n        case \"height\":\n          result[\"height\"] += equalize[1]\n          result[\"bottom\"] += equalize[1]\n          result[\"middle\"] += (result[\"bottom\"] - result[\"top\"] / 2)\n          break\n      }\n    })\n  }\n  \n  return result\n};"],"file":"easy.js"}