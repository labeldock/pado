{"version":3,"sources":["../.src/functions/functions.js"],"names":["unique","array","value","result","i","l","length","i2","l2","push","unique2","findKey","uniqueSet","Set","v","keyPath","forEach","key","has","add","getKeyBy","object","clearOf","data","fillFn","sp","Array","prototype","splice","call","insertOf","a","moveOf","oldIndex","newIndex","concatOf","appends","filterOf","func","exitFn","exitCnt","ri","keys","Object","exit","sortOf","filter","b","undefined","rl","rebase","obj","ref","refValue","d","refKey","assign","indexOf","split","deepKey","trim","hasOwnProperty","NESTED_HAS_PROC","pointer","ki","k","apart","text","block","blockEnd","aparts","buffer","dept","parts","part","greb","start","findIndexes","end","console","log","startIndex","diffStructure","before","after","afterKeys","beforeKeys","canDiff","analysis","concat","reduce","dest","match","missing","surplus","diff","pass","angular","equals","hasValue","toggle","ta","cv","set","index","arguments"],"mappings":"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","sourcesContent":["import { \n  isObject,\n  isArray,\n  isFunction,\n  isNode,\n  isEmpty,\n  likeRegexp\n} from './isLike'\n\nimport {\n  toArray,\n  asArray,\n  instance\n} from './cast'\n\nimport {\n  get\n} from './read'\n\nexport const unique = function (array){\n  var value = []; var result = []; var array = toArray(array)\n  for(var i = 0, l = array.length; i < l; i++){\n    var unique = true\n    for(var i2 = 0, l2 = result.length; i2 < l2; i2++){\n      if(array[i] == result[i2]){\n        unique = false; break\n      }\n    }\n    if(unique == true) result.push(array[i])\n  }\n  return result\n}\n\nexport const unique2 = function (array, findKey){\n  const result    = []\n  const uniqueSet = new Set()\n  if(typeof findKey === \"undefined\"){ findKey = (v)=>v }\n  if(typeof findKey === \"string\"){ const keyPath = findKey; findKey = (v)=>v[keyPath] }\n  array.forEach((v)=>{\n    const key = findKey(v)\n    if(uniqueSet.has(key)) return\n    uniqueSet.add(key)\n    result.push(v)\n  })\n  return result\n}\n\nexport const getKeyBy = function (object, value){\n  if(isFunction(value)){\n    if(isArray(object)) for(var i = 0, l = object.length; i < l; i++) if(value(object[i], i) === true) return i\n    if(isObject(object)) for(var key in object) if(value(object[key], key) === true) return key\n  } else {\n    if(isArray(object)) for(var i = 0, l = object.length; i < l; i++) if(object[i] === value) return i\n    if(isObject(object)) for(var key in object) if(object[key] === value) return key\n  }\n}\n\nexport const clearOf = function (data, fillFn, sp){\n  if(data instanceof Array){\n    sp = Array.prototype.splice.call(data, 0, data.length)\n  } else if(typeof data == \"object\"){\n    sp = {}\n    for(var key in data){ sp[key] = data[key]; delete data[key] } \n  }\n  return (fillFn && fillFn(data, sp)), data\n}\n\nexport const insertOf = function (data, v, a){\n  isArray(data) && data.splice(typeof a === \"number\" ? a : 0, 0, v)\n  return data\n}\n\nexport const moveOf = function (data, oldIndex, newIndex){\n  if(oldIndex !== newIndex && isArray(data) && typeof oldIndex === \"number\" && typeof newIndex === \"number\" && oldIndex >= 0 && oldIndex < data.length){\n    Array.prototype.splice.call(data, newIndex > data.length ? data.length : newIndex, 0, Array.prototype.splice.call(data, oldIndex, 1)[0])\n  }\n  return data\n}\n\nexport const concatOf = function (data, appends){\n  var data = asArray(data)\n  return asArray(appends).forEach(value=>{ data.push(value) }), data\n}\n\n\nexport const filterOf = function (data, func, exitFn){\n  var data    = asArray(data)\n  var exitCnt = 0\n\n  for(var i = 0, ri = 0, keys = Object.keys(data), l = keys.length; i < l; i++, ri++){\n    var key   = keys[i]\n    var value = data[key]\n    var result = func(value, key)\n    if(result == false){\n      var exit = Array.prototype.splice.call(data, i, 1)\n      i--\n      l--\n      typeof exitFn === \"function\" && exitFn(value, ri, exitCnt++)\n    }\n  }\n  \n  return data\n}\n\nexport const sortOf = function (data, filter){\n  if(data.length == 0){\n    return data\n  }\n  \n  switch (filter){\n    case 'desc':\n      filter = function (a, b){ return a > b }\n      break\n    case undefined:\n    case 'asc':\n    default:\n      if(typeof filter !== \"function\"){\n        filter = function (a, b){ return a < b }\n      }\n      break\n  }\n\n  var result = [data[0]]\n\n  for(var i = 1, l = data.length; i < l; i++){\n    for(var ri = 0, rl = result.length; ri < rl; ri++){\n      if(filter(data[i], result[ri]) === true){\n        insertOf(result, data[i], ri)\n        break\n      }\n      if((ri + 1) === result.length){\n        result.push(data[i])\n      }\n    }\n  }\n\n  clearOf(data)\n\n  for(var i = 0, l = result.length; i < l; data.push(result[i]), i++);\n  \n  return data\n}\n\nexport const rebase = function (obj, ref){\n  var result = {}\n  for(var key in obj){\n    if(key === \".*\"){\n      var refValue = obj[key]\n      for(var i = 0, d = Object.keys(ref), l = d.length; i < l; i++){\n        var refKey = d[i]\n        if(typeof refValue === \"function\"){\n          result[refKey] = obj[key]\n        } else {\n          if((typeof refValue !== \"object\" && typeof refValue !== \"object\") || isNode(refValue)){\n            result[refKey] = refValue\n          } else {\n            result[refKey] = Object.assign(result[refKey], refValue)\n          }\n        }\n      }\n    } else if(key.indexOf(\",\") > -1){\n      key.split(\",\").forEach(deepKey=>{\n        deepKey = deepKey.trim()\n        if(typeof obj[key] === \"function\"){\n          result[deepKey] = obj[key]\n        } else {\n          if((!result.hasOwnProperty(deepKey) && typeof obj[key] !== \"object\") || isNode(obj[key])){\n            result[deepKey] = obj[key]\n          } else {\n            result[deepKey] = Object.assign(result[deepKey] || (isArray(obj[key]) ? [] : {}), obj[key], obj[deepKey])\n          }\n        }\n      })\n    } else {\n      if(typeof obj[key] === \"function\"){\n        result[key] = obj[key]\n      } else {\n        if((typeof result[key] !== \"object\" && typeof obj[key] !== \"object\") || isNode(obj[key])){\n          result[key] = obj[key]\n        } else {\n          result[key] = Object.assign(result[key], obj[key])\n        }\n      }\n    }\n  }\n  return result\n}\n\n\n//TODO: Union hasValue\nconst NESTED_HAS_PROC = function (obj, key){\n  var keys = key.split(\".\")\n  if(!keys.length) return false\n\n  var pointer = obj\n  for(var ki in keys){\n    var k = keys[ki]\n\n    if(!pointer.hasOwnProperty(k)){\n      return false\n    } else {\n      pointer = pointer[k]\n    }\n  }\n  return true\n}\n\nexport const apart = function (text, split, block, blockEnd){\n  if(typeof text !== \"string\") return [text]\n  \n  let result = text.split(split === true ? /\\s+/ : split || /\\s+/)\n  \n  if(likeRegexp(block)){\n    if(!likeRegexp(blockEnd)){\n      blockEnd = block\n    }\n    \n    let aparts = []\n    let buffer = { dept: 0, parts: [] }\n    \n    for(let d = result, i = 0, l = d.length; i < l; i++){\n      let part = d[i]\n      let greb = {\n        start: findIndexes(part, block), \n        end  : findIndexes(part, blockEnd) \n      }\n      \n      console.log(\"part, greb\", part, greb)\n      \n      for(let d = greb.start, i = 0, l = d.length; i < l; ++i){\n        let startIndex = d[i]\n      }\n    }\n    \n    return aparts\n  } else {\n    return result\n  }\n}\n\nexport const diffStructure = function (before, after){\n  var afterKeys = Object.keys(after)\n  var beforeKeys\n  var canDiff = false\n  if(isObject(before)){\n    if(isArray(before)){\n      beforeKeys = before\n    } else {\n      beforeKeys = Object.keys(before)\n      canDiff = true\n    }\n  } else {\n    beforeKeys = []\n  }\n\n  var analysis = {\n    after  : after,\n    before : before,\n    keys   : unique(afterKeys.concat(beforeKeys)).reduce((dest, key)=>{ dest[key] = undefined; return dest }, {}),\n    match  : [],\n    missing: [],\n    surplus: [],\n    diff   : [],\n    pass   : false\n  }\n  \n  //match, missing\n  for(var ki in beforeKeys){\n    if(!beforeKeys.hasOwnProperty(ki)) continue\n      \n    var key = beforeKeys[ki]\n      \n    if(NESTED_HAS_PROC(after, key)){\n      analysis.match.push(key)\n      analysis.keys[key] = \"match\"\n\n      if(canDiff && !angular.equals(get(after, key), get(before, key))){\n        analysis.diff.push(key)\n        analysis.keys[key] = \"diff\"\n      }\n    } else {\n      analysis.surplus.push(key)\n      analysis.keys[key] = \"surplus\"\n    }\n  }\n\n  //surplus\n  asArray(afterKeys).forEach(key=>{\n    if(!hasValue(analysis.match, key)){\n      analysis.missing.push(key)\n      analysis.keys[key] = \"missing\"\n    }\n  })\n\n  //absolute\n  analysis.pass = !analysis.missing.length && !analysis.surplus.length\n\n  return analysis\n}\n\n//PINPONGPOOL INTERFACE\nexport const toggle = function (ta, cv, set){\n  var index = -1\n  for(let d = asArray(ta), l = d.length, i = 0; i < l; i++){\n    if(d[i] == cv){ index = i + 1; break }\n  }\n  if(arguments.length > 2) for(var i = 0, l = ta.length; i < l; i++) if(ta[i] == set) return ta[i]\n  index = ta.length == index ? 0 : index\n  return ta[index]\n}\n"],"file":"functions.js"}