{"version":3,"sources":["../.src/functions/functions.js"],"names":["unique","array","value","result","i","l","length","i2","l2","push","unique2","findKey","uniqueSet","Set","v","keyPath","forEach","key","has","add","getKeyBy","object","clearOf","data","fillFn","sp","Array","prototype","splice","call","insertOf","a","moveOf","oldIndex","newIndex","concatOf","appends","filterOf","func","exitFn","exitCnt","ri","keys","Object","exit","sortOf","filter","b","undefined","rl","rebase","obj","ref","refValue","d","refKey","assign","indexOf","split","deepKey","trim","hasOwnProperty","NESTED_HAS_PROC","pointer","ki","k","apart","text","block","blockEnd","aparts","buffer","dept","parts","part","greb","start","findIndexes","end","console","log","startIndex","diffStructure","before","after","afterKeys","beforeKeys","canDiff","analysis","concat","reduce","dest","match","missing","surplus","diff","pass","angular","equals","hasValue","toggle","ta","cv","set","index","arguments"],"mappings":"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","sourcesContent":["import { \n  isObject,\n  isArray,\n  isFunction,\n  isNode,\n  isEmpty,\n  likeRegexp,\n} from './isLike'\n\nimport {\n  toArray,\n  asArray,\n  instance\n} from './cast'\n\nimport {\n  get\n} from './read';\n\nexport const unique = function(array){\n  var value = [],result = [], array = toArray(array);\n  for(var i=0,l=array.length;i<l;i++){\n    var unique = true;\n    for(var i2=0,l2=result.length;i2<l2;i2++){\n      if(array[i] == result[i2]){\n        unique = false; break;\n      }\n    }\n    if(unique==true) result.push(array[i]);\n  }\n  return result;\n}\n\nexport const unique2 = function(array,findKey){\n  const result    = [];\n  const uniqueSet = new Set();\n  if(typeof findKey === \"undefined\") { findKey=(v)=>v; }\n  if(typeof findKey === \"string\")    {  const keyPath = findKey; findKey=(v)=>v[keyPath]; }\n  array.forEach((v)=>{\n    const key = findKey(v);\n    if(uniqueSet.has(key)) return;\n    uniqueSet.add(key);\n    result.push(v);\n  })\n  return result;\n}\n\nexport const getKeyBy = function(object,value){\n  if(isFunction(value)){\n    if(isArray(object)) for(var i=0,l=object.length;i<l;i++) if(value(object[i],i)===true) return i;\n    if(isObject(object)) for(var key in object) if(value(object[key],key)===true) return key;\n  } else {\n    if(isArray(object)) for(var i=0,l=object.length;i<l;i++) if(object[i]===value) return i;\n    if(isObject(object)) for(var key in object) if(object[key]===value) return key;\n  }\n}\n\nexport const clearOf = function(data,fillFn,sp){\n  if(data instanceof Array){\n    sp = Array.prototype.splice.call(data,0,data.length);\n  } else if(typeof data == \"object\") {\n    sp = {};\n    for(var key in data){ sp[key] = data[key]; delete data[key]; } \n  }\n  return (fillFn && fillFn(data,sp)), data;\n}\n\nexport const insertOf = function(data,v,a){\n  isArray(data) && data.splice(typeof a === \"number\"?a:0,0,v)\n  return data;\n}\n\nexport const moveOf = function(data,oldIndex,newIndex){\n  if(oldIndex !== newIndex && isArray(data) && typeof oldIndex === \"number\" && typeof newIndex === \"number\" && oldIndex >= 0 && oldIndex < data.length){\n    Array.prototype.splice.call(data,newIndex > data.length ? data.length : newIndex,0,Array.prototype.splice.call(data,oldIndex,1)[0]);\n  }\n  return data;\n}\n\nexport const concatOf = function(data,appends){\n  var data = asArray(data);\n  return asArray(appends).forEach(value=>{ data.push(value); }), data;\n}\n\n\nexport const filterOf = function(data,func,exitFn){\n  var data    = asArray(data);\n  var exitCnt = 0;\n\n  for(var i=0,ri=0,keys=Object.keys(data),l=keys.length;i<l;i++,ri++){\n    var key   = keys[i];\n    var value = data[key];\n    var result = func(value,key);\n    if(result == false) {\n      var exit = Array.prototype.splice.call(data,i,1);\n      i--;\n      l--;\n      typeof exitFn === \"function\" && exitFn(value,ri,exitCnt++);\n    }\n  }\n  \n  return data;\n}\n\nexport const sortOf = function(data,filter){\n  if(data.length == 0){\n    return data;\n  }\n  \n  switch(filter){\n  case 'desc':\n    filter = function(a,b){ return a>b; }\n    break;\n  case undefined:\n  case 'asc':\n  default:\n    if(typeof filter !== \"function\"){\n      filter = function(a,b){ return a<b; }\n    }\n    break;\n  }\n\n  var result = [data[0]];\n\n  for(var i=1,l=data.length;i<l;i++){\n    for(var ri=0,rl=result.length;ri<rl;ri++){\n      if(filter(data[i],result[ri]) === true){\n        insertOf(result,data[i],ri);\n        break;\n      }\n      if((ri + 1) === result.length){\n        result.push(data[i]);\n      }\n    }\n  }\n\n  clearOf(data);\n\n  for(var i=0,l=result.length;i<l;data.push(result[i]),i++);\n  \n  return data;\n}\n\nexport const rebase = function(obj,ref){\n  var result = {};\n  for(var key in obj){\n    if(key === \".*\"){\n      var refValue = obj[key];\n      for(var i=0,d=Object.keys(ref),l=d.length;i<l;i++){\n        var refKey = d[i];\n        if(typeof refValue === \"function\"){\n          result[refKey] = obj[key];\n        } else {\n          if((typeof refValue !== \"object\" && typeof refValue !== \"object\") || isNode(refValue)){\n            result[refKey] = refValue;\n          } else {\n            result[refKey] = Object.assign(result[refKey],refValue);\n          }\n        }\n      }\n    } else if(key.indexOf(\",\") > -1){\n      key.split(\",\").forEach(deepKey=>{\n        deepKey = deepKey.trim();\n        if(typeof obj[key] === \"function\"){\n          result[deepKey] = obj[key];\n        } else {\n          if((!result.hasOwnProperty(deepKey) && typeof obj[key] !== \"object\") || isNode(obj[key])){\n            result[deepKey] = obj[key];\n          } else {\n            result[deepKey] = Object.assign( result[deepKey] || (isArray(obj[key]) ? [] : {}), obj[key], obj[deepKey] );\n          }\n\n        }\n      })\n    } else {\n      if(typeof obj[key] === \"function\"){\n        result[key] = obj[key];\n      } else {\n        if((typeof result[key] !== \"object\" && typeof obj[key] !== \"object\") || isNode(obj[key])){\n          result[key] = obj[key]\n        } else {\n          result[key] = Object.assign(result[key],obj[key]);\n        }\n      }\n    }\n  }\n  return result;\n}\n\n\n\n//TODO: Union hasValue\nconst NESTED_HAS_PROC = function(obj,key){\n  var keys = key.split(\".\");\n  if(!keys.length) return false;\n\n  var pointer = obj;\n  for(var ki in keys){\n    var k = keys[ki];\n\n    if(!pointer.hasOwnProperty(k)){\n      return false;\n    } else {\n      pointer = pointer[k];\n    }\n  }\n  return true;\n}\n\nexport const apart = function(text,split,block,blockEnd){\n  if(typeof text !== \"string\") return [text];\n  \n  let result = text.split(split===true?/\\s+/:split||/\\s+/);\n  \n  if(likeRegexp(block)){\n    if(!likeRegexp(blockEnd)){\n      blockEnd = block;\n    }\n    \n    let aparts = []\n    let buffer = { dept:0, parts:[] }\n    \n    for(let d=result,i=0,l=d.length;i<l;i++){\n      let part = d[i]\n      let greb = {\n        start:findIndexes(part,block), \n        end  :findIndexes(part,blockEnd) \n      }\n      \n      console.log(\"part, greb\", part, greb);\n      \n      for(let d=greb.start,i=0,l=d.length;i<l;++i){\n        let startIndex = d[i]\n      }\n    }\n    \n    return aparts;\n  } else {\n    return result;\n  }\n}\n\nexport const diffStructure = function(before,after){\n  var afterKeys = Object.keys(after);\n  var beforeKeys;\n  var canDiff = false;\n  if(isObject(before)){\n    if(isArray(before)){\n      beforeKeys = before;\n    } else {\n      beforeKeys = Object.keys(before);\n      canDiff    = true;\n    }\n  } else {\n    beforeKeys = [];\n  }\n\n  var analysis = {\n    after:after,\n    before:before,\n    keys:unique(afterKeys.concat(beforeKeys)).reduce((dest,key)=>{ dest[key] = undefined;  return dest; },{}),\n    match:[],\n    missing:[],\n    surplus:[],\n    diff:[],\n    pass:false\n  };\n  \n  //match, missing\n  for(var ki in beforeKeys){\n    if(!beforeKeys.hasOwnProperty(ki)) continue;\n      \n    var key = beforeKeys[ki];\n      \n    if(NESTED_HAS_PROC(after,key)){\n      analysis.match.push(key);\n      analysis.keys[key] = \"match\";\n\n      if(canDiff && !angular.equals(get(after,key),get(before,key))) {\n        analysis.diff.push(key);\n        analysis.keys[key] = \"diff\";\n      }\n    } else {\n      analysis.surplus.push(key);\n      analysis.keys[key] = \"surplus\";\n    }\n  }\n\n  //surplus\n  asArray(afterKeys).forEach(key=>{\n    if(!hasValue(analysis.match,key)){\n      analysis.missing.push(key);\n      analysis.keys[key] = \"missing\";\n    }\n  });\n\n  //absolute\n  analysis.pass = !analysis.missing.length && !analysis.surplus.length;\n\n  return analysis;\n}\n\n//PINPONGPOOL INTERFACE\nexport const toggle = function(ta,cv,set){\n  var index = -1;\n  for(let d=asArray(ta),l=d.length,i=0;i<l;i++){\n    if(d[i] == cv) { index = i+1; break; }\n  }\n  if(arguments.length > 2) for(var i=0,l=ta.length;i<l;i++) if( ta[i] == set ) return ta[i];\n  index = ta.length == index ? 0 : index;\n  return ta[index];\n}"],"file":"functions.js"}