{"version":3,"sources":["../packages/pado/functions/functions.js"],"names":["unique","array","findKey","result","uniqueSet","Set","v","keyPath","forEach","key","has","add","push","getKeyBy","object","value","i","l","length","moveOf","data","oldIndex","newIndex","Array","prototype","splice","call","concatOf","appends","filterOf","func","exitFn","exitCnt","ri","keys","Object","clearOf","fillFn","sp","insertOf","a","sortOf","filter","b","undefined","rl","rebase","obj","ref","refValue","d","refKey","assign","indexOf","split","deepKey","trim","hasOwnProperty","NESTED_HAS_PROC","pointer","ki","k","diffStructure","before","after","afterKeys","beforeKeys","canDiff","analysis","concat","reduce","dest","match","missing","surplus","diff","pass"],"mappings":"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","sourcesContent":["import { \n  isObject,\n  isArray,\n  isFunction,\n  isNode,\n  isEqual\n} from './isLike'\n\nimport {\n  asArray\n} from './cast'\n\nimport {\n  get,\n  hasValue\n} from './read'\n\nexport const unique = function (array, findKey){\n  const result    = []\n  const uniqueSet = new Set()\n  if(typeof findKey === \"undefined\"){ findKey = (v)=>v }\n  if(typeof findKey === \"string\"){ const keyPath = findKey; findKey = (v)=>v[keyPath] }\n  array.forEach((v)=>{\n    const key = findKey(v)\n    if(uniqueSet.has(key)) return\n    uniqueSet.add(key)\n    result.push(v)\n  })\n  return result\n}\n\nexport const getKeyBy = function (object, value){\n  if(isFunction(value)){\n    if(isArray(object)) for(var i = 0, l = object.length; i < l; i++) if(value(object[i], i) === true) return i\n    if(isObject(object)) for(var key in object) if(value(object[key], key) === true) return key\n  } else {\n    if(isArray(object)) for(var i = 0, l = object.length; i < l; i++) if(object[i] === value) return i\n    if(isObject(object)) for(var key in object) if(object[key] === value) return key\n  }\n}\n\nexport const moveOf = function (data, oldIndex, newIndex){\n  if(oldIndex !== newIndex && isArray(data) && typeof oldIndex === \"number\" && typeof newIndex === \"number\" && oldIndex >= 0 && oldIndex < data.length){\n    Array.prototype.splice.call(data, newIndex > data.length ? data.length : newIndex, 0, Array.prototype.splice.call(data, oldIndex, 1)[0])\n  }\n  return data\n}\n\nexport const concatOf = function (data, appends){\n  var data = asArray(data)\n  return asArray(appends).forEach(value=>{ data.push(value) }), data\n}\n\n\nexport const filterOf = function (data, func, exitFn){\n  var data    = asArray(data)\n  var exitCnt = 0\n\n  for(var i = 0, ri = 0, keys = Object.keys(data), l = keys.length; i < l; i++, ri++){\n    var key   = keys[i]\n    var value = data[key]\n    var result = func(value, key)\n    if(result == false){\n      /*\n      var exit = Array.prototype.splice.call(data, i, 1)\n      */\n      i--\n      l--\n      typeof exitFn === \"function\" && exitFn(value, ri, exitCnt++)\n    }\n  }\n  \n  return data\n}\n\nexport const clearOf = function (data, fillFn, sp){\n  if(data instanceof Array){\n    sp = Array.prototype.splice.call(data, 0, data.length)\n  } else if(typeof data == \"object\"){\n    sp = {}\n    for(var key in data){ sp[key] = data[key]; delete data[key] } \n  }\n  return (fillFn && fillFn(data, sp)), data\n}\n\nexport const insertOf = function (data, v, a){\n  isArray(data) && data.splice(typeof a === \"number\" ? a : 0, 0, v)\n  return data\n}\n\nexport const sortOf = function (data, filter){\n  if(data.length == 0){\n    return data\n  }\n  \n  switch (filter){\n    case 'desc':\n      filter = function (a, b){ return a > b }\n      break\n    case undefined:\n    case 'asc':\n    default:\n      if(typeof filter !== \"function\"){\n        filter = function (a, b){ return a < b }\n      }\n      break\n  }\n\n  var result = [data[0]]\n\n  for(var i = 1, l = data.length; i < l; i++){\n    for(var ri = 0, rl = result.length; ri < rl; ri++){\n      if(filter(data[i], result[ri]) === true){\n        insertOf(result, data[i], ri)\n        break\n      }\n      if((ri + 1) === result.length){\n        result.push(data[i])\n      }\n    }\n  }\n\n  clearOf(data)\n\n  for(var i = 0, l = result.length; i < l; data.push(result[i]), i++);\n  \n  return data\n}\n\nexport const rebase = function (obj, ref){\n  var result = {}\n  for(var key in obj){\n    if(key === \".*\"){\n      var refValue = obj[key]\n      for(var i = 0, d = Object.keys(ref), l = d.length; i < l; i++){\n        var refKey = d[i]\n        if(typeof refValue === \"function\"){\n          result[refKey] = obj[key]\n        } else {\n          if((typeof refValue !== \"object\" && typeof refValue !== \"object\") || isNode(refValue)){\n            result[refKey] = refValue\n          } else {\n            result[refKey] = Object.assign(result[refKey], refValue)\n          }\n        }\n      }\n    } else if(key.indexOf(\",\") > -1){\n      key.split(\",\").forEach(deepKey=>{\n        deepKey = deepKey.trim()\n        if(typeof obj[key] === \"function\"){\n          result[deepKey] = obj[key]\n        } else {\n          if((!result.hasOwnProperty(deepKey) && typeof obj[key] !== \"object\") || isNode(obj[key])){\n            result[deepKey] = obj[key]\n          } else {\n            result[deepKey] = Object.assign(result[deepKey] || (isArray(obj[key]) ? [] : {}), obj[key], obj[deepKey])\n          }\n        }\n      })\n    } else {\n      if(typeof obj[key] === \"function\"){\n        result[key] = obj[key]\n      } else {\n        if((typeof result[key] !== \"object\" && typeof obj[key] !== \"object\") || isNode(obj[key])){\n          result[key] = obj[key]\n        } else {\n          result[key] = Object.assign(result[key], obj[key])\n        }\n      }\n    }\n  }\n  return result\n}\n\n\n//TODO: Union hasValue\nconst NESTED_HAS_PROC = function (obj, key){\n  var keys = key.split(\".\")\n  if(!keys.length) return false\n\n  var pointer = obj\n  for(var ki in keys){\n    var k = keys[ki]\n\n    if(!pointer.hasOwnProperty(k)){\n      return false\n    } else {\n      pointer = pointer[k]\n    }\n  }\n  return true\n}\n\nexport const diffStructure = function (before, after){\n  var afterKeys = Object.keys(after)\n  var beforeKeys\n  var canDiff = false\n  if(isObject(before)){\n    if(isArray(before)){\n      beforeKeys = before\n    } else {\n      beforeKeys = Object.keys(before)\n      canDiff = true\n    }\n  } else {\n    beforeKeys = []\n  }\n\n  var analysis = {\n    after  : after,\n    before : before,\n    keys   : unique(afterKeys.concat(beforeKeys)).reduce((dest, key)=>{ dest[key] = undefined; return dest }, {}),\n    match  : [],\n    missing: [],\n    surplus: [],\n    diff   : [],\n    pass   : false\n  }\n  \n  //match, missing\n  for(var ki in beforeKeys){\n    if(!beforeKeys.hasOwnProperty(ki)) continue\n      \n    var key = beforeKeys[ki]\n      \n    if(NESTED_HAS_PROC(after, key)){\n      analysis.match.push(key)\n      analysis.keys[key] = \"match\"\n\n      if(canDiff && !isEqual(get(after, key), get(before, key))){\n        analysis.diff.push(key)\n        analysis.keys[key] = \"diff\"\n      }\n    } else {\n      analysis.surplus.push(key)\n      analysis.keys[key] = \"surplus\"\n    }\n  }\n\n  //surplus\n  asArray(afterKeys).forEach(key=>{\n    if(!hasValue(analysis.match, key)){\n      analysis.missing.push(key)\n      analysis.keys[key] = \"missing\"\n    }\n  })\n\n  //absolute\n  analysis.pass = !analysis.missing.length && !analysis.surplus.length\n\n  return analysis\n}\n"],"file":"functions.js"}