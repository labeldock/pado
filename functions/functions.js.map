{"version":3,"sources":["../.src/functions/functions.js"],"names":["unique","array","findKey","result","uniqueSet","Set","v","keyPath","forEach","key","has","add","push","getKeyBy","object","value","i","l","length","clearOf","data","fillFn","sp","Array","prototype","splice","call","insertOf","a","moveOf","oldIndex","newIndex","concatOf","appends","filterOf","func","exitFn","exitCnt","ri","keys","Object","sortOf","filter","b","undefined","rl","rebase","obj","ref","refValue","d","refKey","assign","indexOf","split","deepKey","trim","hasOwnProperty","NESTED_HAS_PROC","pointer","ki","k","diffStructure","before","after","afterKeys","beforeKeys","canDiff","analysis","concat","reduce","dest","match","missing","surplus","diff","pass","toggle","ta","cv","set","index","arguments"],"mappings":"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","sourcesContent":["import { \n  isObject,\n  isArray,\n  isFunction,\n  isNode,\n  isEqual\n} from './isLike'\n\nimport {\n  asArray\n} from './cast'\n\nimport {\n  get,\n  hasValue\n} from './read'\n\nexport const unique = function (array, findKey){\n  const result    = []\n  const uniqueSet = new Set()\n  if(typeof findKey === \"undefined\"){ findKey = (v)=>v }\n  if(typeof findKey === \"string\"){ const keyPath = findKey; findKey = (v)=>v[keyPath] }\n  array.forEach((v)=>{\n    const key = findKey(v)\n    if(uniqueSet.has(key)) return\n    uniqueSet.add(key)\n    result.push(v)\n  })\n  return result\n}\n\nexport const getKeyBy = function (object, value){\n  if(isFunction(value)){\n    if(isArray(object)) for(var i = 0, l = object.length; i < l; i++) if(value(object[i], i) === true) return i\n    if(isObject(object)) for(var key in object) if(value(object[key], key) === true) return key\n  } else {\n    if(isArray(object)) for(var i = 0, l = object.length; i < l; i++) if(object[i] === value) return i\n    if(isObject(object)) for(var key in object) if(object[key] === value) return key\n  }\n}\n\nexport const clearOf = function (data, fillFn, sp){\n  if(data instanceof Array){\n    sp = Array.prototype.splice.call(data, 0, data.length)\n  } else if(typeof data == \"object\"){\n    sp = {}\n    for(var key in data){ sp[key] = data[key]; delete data[key] } \n  }\n  return (fillFn && fillFn(data, sp)), data\n}\n\nexport const insertOf = function (data, v, a){\n  isArray(data) && data.splice(typeof a === \"number\" ? a : 0, 0, v)\n  return data\n}\n\nexport const moveOf = function (data, oldIndex, newIndex){\n  if(oldIndex !== newIndex && isArray(data) && typeof oldIndex === \"number\" && typeof newIndex === \"number\" && oldIndex >= 0 && oldIndex < data.length){\n    Array.prototype.splice.call(data, newIndex > data.length ? data.length : newIndex, 0, Array.prototype.splice.call(data, oldIndex, 1)[0])\n  }\n  return data\n}\n\nexport const concatOf = function (data, appends){\n  var data = asArray(data)\n  return asArray(appends).forEach(value=>{ data.push(value) }), data\n}\n\n\nexport const filterOf = function (data, func, exitFn){\n  var data    = asArray(data)\n  var exitCnt = 0\n\n  for(var i = 0, ri = 0, keys = Object.keys(data), l = keys.length; i < l; i++, ri++){\n    var key   = keys[i]\n    var value = data[key]\n    var result = func(value, key)\n    if(result == false){\n      /*\n      var exit = Array.prototype.splice.call(data, i, 1)\n      */\n      i--\n      l--\n      typeof exitFn === \"function\" && exitFn(value, ri, exitCnt++)\n    }\n  }\n  \n  return data\n}\n\nexport const sortOf = function (data, filter){\n  if(data.length == 0){\n    return data\n  }\n  \n  switch (filter){\n    case 'desc':\n      filter = function (a, b){ return a > b }\n      break\n    case undefined:\n    case 'asc':\n    default:\n      if(typeof filter !== \"function\"){\n        filter = function (a, b){ return a < b }\n      }\n      break\n  }\n\n  var result = [data[0]]\n\n  for(var i = 1, l = data.length; i < l; i++){\n    for(var ri = 0, rl = result.length; ri < rl; ri++){\n      if(filter(data[i], result[ri]) === true){\n        insertOf(result, data[i], ri)\n        break\n      }\n      if((ri + 1) === result.length){\n        result.push(data[i])\n      }\n    }\n  }\n\n  clearOf(data)\n\n  for(var i = 0, l = result.length; i < l; data.push(result[i]), i++);\n  \n  return data\n}\n\nexport const rebase = function (obj, ref){\n  var result = {}\n  for(var key in obj){\n    if(key === \".*\"){\n      var refValue = obj[key]\n      for(var i = 0, d = Object.keys(ref), l = d.length; i < l; i++){\n        var refKey = d[i]\n        if(typeof refValue === \"function\"){\n          result[refKey] = obj[key]\n        } else {\n          if((typeof refValue !== \"object\" && typeof refValue !== \"object\") || isNode(refValue)){\n            result[refKey] = refValue\n          } else {\n            result[refKey] = Object.assign(result[refKey], refValue)\n          }\n        }\n      }\n    } else if(key.indexOf(\",\") > -1){\n      key.split(\",\").forEach(deepKey=>{\n        deepKey = deepKey.trim()\n        if(typeof obj[key] === \"function\"){\n          result[deepKey] = obj[key]\n        } else {\n          if((!result.hasOwnProperty(deepKey) && typeof obj[key] !== \"object\") || isNode(obj[key])){\n            result[deepKey] = obj[key]\n          } else {\n            result[deepKey] = Object.assign(result[deepKey] || (isArray(obj[key]) ? [] : {}), obj[key], obj[deepKey])\n          }\n        }\n      })\n    } else {\n      if(typeof obj[key] === \"function\"){\n        result[key] = obj[key]\n      } else {\n        if((typeof result[key] !== \"object\" && typeof obj[key] !== \"object\") || isNode(obj[key])){\n          result[key] = obj[key]\n        } else {\n          result[key] = Object.assign(result[key], obj[key])\n        }\n      }\n    }\n  }\n  return result\n}\n\n\n//TODO: Union hasValue\nconst NESTED_HAS_PROC = function (obj, key){\n  var keys = key.split(\".\")\n  if(!keys.length) return false\n\n  var pointer = obj\n  for(var ki in keys){\n    var k = keys[ki]\n\n    if(!pointer.hasOwnProperty(k)){\n      return false\n    } else {\n      pointer = pointer[k]\n    }\n  }\n  return true\n}\n\nexport const diffStructure = function (before, after){\n  var afterKeys = Object.keys(after)\n  var beforeKeys\n  var canDiff = false\n  if(isObject(before)){\n    if(isArray(before)){\n      beforeKeys = before\n    } else {\n      beforeKeys = Object.keys(before)\n      canDiff = true\n    }\n  } else {\n    beforeKeys = []\n  }\n\n  var analysis = {\n    after  : after,\n    before : before,\n    keys   : unique(afterKeys.concat(beforeKeys)).reduce((dest, key)=>{ dest[key] = undefined; return dest }, {}),\n    match  : [],\n    missing: [],\n    surplus: [],\n    diff   : [],\n    pass   : false\n  }\n  \n  //match, missing\n  for(var ki in beforeKeys){\n    if(!beforeKeys.hasOwnProperty(ki)) continue\n      \n    var key = beforeKeys[ki]\n      \n    if(NESTED_HAS_PROC(after, key)){\n      analysis.match.push(key)\n      analysis.keys[key] = \"match\"\n\n      if(canDiff && !isEqual(get(after, key), get(before, key))){\n        analysis.diff.push(key)\n        analysis.keys[key] = \"diff\"\n      }\n    } else {\n      analysis.surplus.push(key)\n      analysis.keys[key] = \"surplus\"\n    }\n  }\n\n  //surplus\n  asArray(afterKeys).forEach(key=>{\n    if(!hasValue(analysis.match, key)){\n      analysis.missing.push(key)\n      analysis.keys[key] = \"missing\"\n    }\n  })\n\n  //absolute\n  analysis.pass = !analysis.missing.length && !analysis.surplus.length\n\n  return analysis\n}\n\n//PINPONGPOOL INTERFACE\nexport const toggle = function (ta, cv, set){\n  var index = -1\n  for(let d = asArray(ta), l = d.length, i = 0; i < l; i++){\n    if(d[i] == cv){ index = i + 1; break }\n  }\n  if(arguments.length > 2) for(var i = 0, l = ta.length; i < l; i++) if(ta[i] == set) return ta[i]\n  index = ta.length == index ? 0 : index\n  return ta[index]\n}\n"],"file":"functions.js"}