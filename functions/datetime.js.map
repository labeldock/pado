{"version":3,"sources":["../.src/functions/datetime.js"],"names":["dateExp","dv","format","pad","join","dt","exec","Date","getYear","getMonth","getDate","r","year","month","date","hour","minute","second","init","s","replace","timestampExp","exp","arguments","length","timescaleExp","scale","t","d"],"mappings":"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","sourcesContent":["import { isArray } from './isLike';\nimport { toNumber } from './cast';\n\nexport const dateExp = function(dv,format,pad){\n  if(isArray(dv)) dv = dv.join(' ');\n\t\t\t\n  var dt = /(\\d\\d\\d\\d|)[^\\d]?(\\d\\d|\\d|).?(\\d\\d|\\d|)[^\\d]?(\\d\\d|\\d|)[^\\d]?(\\d\\d|\\d|)[^\\d]?(\\d\\d|\\d|)/.exec(dv);\n  dt[1] = dt[1] || (((new Date()).getYear() + 1900) +'');\n  dt[2] = dt[2] || ((new Date()).getMonth()+1);\n  dt[3] = dt[3] || ((new Date()).getDate());\n  dt[4] = dt[4] || (\"00\");\n  dt[5] = dt[5] || (\"00\");\n  dt[6] = dt[6] || (\"00\");\n\t\t\t\n  var r    = [ dt[1],dt[2],dt[3],dt[4],dt[5],dt[6],dt[0] ];\n  r.year   = dt[1],r.month  = dt[2],r.date = dt[3],r.hour = dt[4],r.minute = dt[5],r.second = dt[6],r.init = dt[7];\n  r.format = function(s){\n    return s.replace('YYYY',r.year).replace(/(MM|M)/,r.month).replace(/(DD|D)/,r.date)\n    .replace(/(hh|h)/,r.hour).replace(/(mm|m)/,r.minute).replace(/(ss|s)/,r.second)\n    .replace(/(A)/,(toNumber(r.hour) > 12) ? 'PM' : 'AM');\n  }\n  if(typeof format === 'string') \n    return r.format(format);\n  return r;\n};\n\nexport const timestampExp = function(exp){\n  if( arguments.length === 0){\n    return (+new Date());\n  }\n  if( typeof exp === \"string\") {\n    exp = dateExp(exp);\n  }\n  if( typeof exp === \"number\") {\n    return exp;\n  }\n  if( isArray(exp) && (exp.length == 7) ){\n    exp = new Date(exp[0], exp[1], exp[2], exp[3], exp[4], exp[5]);\n  }\n  if( exp instanceof Date){\n    return (+exp);\n  }\n  return 0;\n};\n\nexport const timescaleExp = function(exp){\n  var scale = 0;\n  if(typeof exp === \"number\") {\n    return exp;\n  }\n  if(typeof exp === \"string\") {\n    // \n    exp = exp.replace(/\\d+(Y|year)/,function(t){\n      t.replace(/\\d+/,function(d){ scale += d*31536000000; });\n      return \"\";\n    })\n    exp = exp.replace(/\\d+(M|month)/,function(t){\n      t.replace(/\\d+/,function(d){ scale += d*2678400000; });\n      return \"\";\n    })\n    exp = exp.replace(/\\d+(D|day)/,function(t){\n      t.replace(/\\d+/,function(d){ scale += d*86400000; });\n      return \"\";\n    })\n    exp = exp.replace(/\\d+(h|hour)/,function(t){\n      t.replace(/\\d+/,function(d){ scale += d*3600000; });\n      return \"\";\n    })\n    exp = exp.replace(/\\d+(ms|millisecond)/,function(t){\n      t.replace(/\\d+/,function(d){ scale += d*1; });\n      return \"\";\n    })\n    exp = exp.replace(/\\d+(m|minute)/,function(t){\n      t.replace(/\\d+/,function(d){ scale += d*60000; });\n      return \"\";\n    })\n    exp = exp.replace(/\\d+(s|second)/,function(t){\n      t.replace(/\\d+/,function(d){ scale += d*1000; });\n      return \"\";\n    })\n  }\n  return scale;\n};"],"file":"datetime.js"}