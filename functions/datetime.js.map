{"version":3,"sources":["../.src/functions/datetime.js"],"names":["dateExp","dv","format","pad","join","dt","exec","Date","getYear","getMonth","getDate","r","year","month","date","hour","minute","second","init","s","replace","timestampExp","exp","arguments","length","timescaleExp","scale","t","d"],"mappings":"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","sourcesContent":["import { isArray } from './isLike'\nimport { toNumber } from './cast'\n\nexport const dateExp = function (dv, format, pad){\n  if(isArray(dv)) dv = dv.join(' ')\n\t\t\t\n  var dt = /(\\d\\d\\d\\d|)[^\\d]?(\\d\\d|\\d|).?(\\d\\d|\\d|)[^\\d]?(\\d\\d|\\d|)[^\\d]?(\\d\\d|\\d|)[^\\d]?(\\d\\d|\\d|)/.exec(dv)\n  dt[1] = dt[1] || (((new Date()).getYear() + 1900) + '')\n  dt[2] = dt[2] || ((new Date()).getMonth() + 1)\n  dt[3] = dt[3] || ((new Date()).getDate())\n  dt[4] = dt[4] || (\"00\")\n  dt[5] = dt[5] || (\"00\")\n  dt[6] = dt[6] || (\"00\")\n\t\t\t\n  var r    = [ dt[1], dt[2], dt[3], dt[4], dt[5], dt[6], dt[0] ]\n  r.year = dt[1], r.month = dt[2], r.date = dt[3], r.hour = dt[4], r.minute = dt[5], r.second = dt[6], r.init = dt[7]\n  r.format = function (s){\n    return s.replace('YYYY', r.year).replace(/(MM|M)/, r.month).replace(/(DD|D)/, r.date)\n    .replace(/(hh|h)/, r.hour).replace(/(mm|m)/, r.minute).replace(/(ss|s)/, r.second)\n    .replace(/(A)/, (toNumber(r.hour) > 12) ? 'PM' : 'AM')\n  }\n  if(typeof format === 'string'){ return r.format(format) }\n  return r\n}\n\nexport const timestampExp = function (exp){\n  if(arguments.length === 0){\n    return (+new Date())\n  }\n  if(typeof exp === \"string\"){\n    exp = dateExp(exp)\n  }\n  if(typeof exp === \"number\"){\n    return exp\n  }\n  if(isArray(exp) && (exp.length == 7)){\n    exp = new Date(exp[0], exp[1], exp[2], exp[3], exp[4], exp[5])\n  }\n  if(exp instanceof Date){\n    return (+exp)\n  }\n  return 0\n}\n\nexport const timescaleExp = function (exp){\n  var scale = 0\n  if(typeof exp === \"number\"){\n    return exp\n  }\n  if(typeof exp === \"string\"){\n    // \n    exp = exp.replace(/\\d+(Y|year)/, function (t){\n      t.replace(/\\d+/, function (d){ scale += d * 31536000000 })\n      return \"\"\n    })\n    exp = exp.replace(/\\d+(M|month)/, function (t){\n      t.replace(/\\d+/, function (d){ scale += d * 2678400000 })\n      return \"\"\n    })\n    exp = exp.replace(/\\d+(D|day)/, function (t){\n      t.replace(/\\d+/, function (d){ scale += d * 86400000 })\n      return \"\"\n    })\n    exp = exp.replace(/\\d+(h|hour)/, function (t){\n      t.replace(/\\d+/, function (d){ scale += d * 3600000 })\n      return \"\"\n    })\n    exp = exp.replace(/\\d+(ms|millisecond)/, function (t){\n      t.replace(/\\d+/, function (d){ scale += d * 1 })\n      return \"\"\n    })\n    exp = exp.replace(/\\d+(m|minute)/, function (t){\n      t.replace(/\\d+/, function (d){ scale += d * 60000 })\n      return \"\"\n    })\n    exp = exp.replace(/\\d+(s|second)/, function (t){\n      t.replace(/\\d+/, function (d){ scale += d * 1000 })\n      return \"\"\n    })\n  }\n  return scale\n}\n"],"file":"datetime.js"}