{"version":3,"sources":["../packages/pado/functions/cast.js"],"names":["asArray","data","defaultArray","undefined","toArray","option","Array","prototype","slice","call","split","asObject","defaultKey","toNumber","v","d","vr","replace","dr","cleanObject","splice","length","Object","keys","forEach","key","clone","target","r","i","push","Date","setTime","getTime","k","hasOwnProperty","console","error","cloneDeep","l","p","getKeyWithValue","obj","value","removeValue","detect","array","unique","findKey","result","uniqueSet","Set","keyPath","has","add","getKeyBy","object","moveOf","oldIndex","newIndex","move","baseConcatOf","args","concatOf","concat","filterOf","filterFn","exitFn","dataArray","dataKeys","isOnExit","exitArray","removedIndex","datumKey","datum","exitDatum","filter","func","insertOf","a","insert","clearOf","fillFn","sp","sortOf","b","ri","rl","sort","rebase","ref","refValue","refKey","assign","indexOf","deepKey","trim","removeKey","rule","removeRule","removeKeys","originalIndex","offset","removeIndex","omitOf","omit","pickOf","pick","COMPACT_MATCH_FN","compactOf","compact","FREE_MATCH_EXPRESSION","freeOf","free","purgeOf","test","purge","instance","proto","ins","DummyInstance","param","alloc","init","fn","rn","apply"],"mappings":"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","sourcesContent":["import {\n  isNumber,\n  isArray,\n  isNone,\n  isAbsoluteNaN,\n  isPlainObject,\n  isObject,\n  isFunction,\n  isNode\n} from './isLike'\n\nimport {\n  stringTest,\n  keys\n} from './remark'\n\nexport const asArray = function (data, defaultArray = undefined){\n  if(isArray(data)){\n    return data\n  }\n  if(isNone(data)){\n    return isArray(defaultArray) ? defaultArray\n      : isNone(defaultArray) ? [] : [defaultArray]\n  }\n  if(typeof data === \"object\" && typeof data.toArray === \"function\"){\n    return data.toArray()\n  }\n  return [data]\n}\n\nexport const toArray = function (data, option){\n  if(typeof data === \"undefined\" || data === null || isAbsoluteNaN(data)) return []\n  if(isArray(data)) return Array.prototype.slice.call(data)\n  if(typeof data === \"object\" && typeof data.toArray === \"function\") return data.toArray()\n  if(typeof data === \"string\" && typeof option === \"string\") return data.split(option)\n  return [data]\n}\n\nexport const asObject = function (data, defaultKey = \"default\"){\n  if(isPlainObject(data)){\n    return data\n  } else {\n    return { [defaultKey]: data }\n  }\n}\n\nexport const toNumber = function (v, d){\n  switch (typeof v){ case \"number\":return v; case \"string\":const vr = v.replace(/[^.\\d\\-]/g, \"\") * 1; return isAbsoluteNaN(vr) ? 0 : vr; break }\n  switch (typeof d){ case \"number\":return d; case \"string\":const dr = d * 1; return isAbsoluteNaN(dr) ? 0 : dr; break }\n  return 0\n}\n\nexport const cleanObject = function (data){\n  if(data instanceof Array){\n    Array.prototype.splice.call(data, 0, data.length)\n  } else if(typeof data == \"object\"){\n    Object.keys(data).forEach(key=>{ delete data[key] })\n  }\n  return data\n}\n\nexport const clone = function (target){\n  switch (typeof target){\n    case \"undefined\": case \"function\": case \"boolean\": case \"number\": case \"string\": return target; break\n    case \"object\":\n      if(target === null) return target\n    \n      if(isArray(target)){\n        let r = []\n        for(let i = 0, length = target.length; i < length; i++)r.push(target[i])\n        return r\n      }\n    \n      if(!isPlainObject(target)){\n        if(target instanceof Date){\n          let r = new Date()\n          r.setTime(target.getTime())\n          return r\n        }\n        return target\n      }\n    \n      let r = {}\n    \n      Object.keys(target).forEach(k=>{\n        if(target.hasOwnProperty(k)) r[k] = target[k]\n      })\n      return r\n      break\n    default : \n      console.error(\"clone::copy failed : target => \", target)\n      return target \n      break\n  }\n}\n\nexport const cloneDeep = function (target){\n  if(typeof target === \"object\"){\n    let d\n    if(isArray(target)){\n      if(!isArray(d)){ d = [] };\n      for(var i = 0, l = target.length; i < l; i++) d.push(((typeof target[i] === \"object\" && target[i] !== null) ? clone(target[i]) : target[i]))\n      return d\n    } else {\n      d = {}\n      Object.keys(target).forEach(p=>{\n        (typeof target[p] === \"object\" && target[p] !== null && d[p]) ? clone(target[p], d[p]) : d[p] = target[p]\n      })\n      return d\n    }\n  } else {\n    return clone(target)\n  }\n}\n\nconst getKeyWithValue = function (obj, value){\n  if(isArray(obj)){\n    for(var i = 0, l = obj.length; i < l; i++) if(obj[i] === value) return i\n  } \n  if(isObject(obj)){\n    for(var key in obj) if(obj[key] === value) return key\n  }\n  return undefined\n}\n\nexport const removeValue = function (obj, value){\n  var detect = true\n  var array  = isArray(obj)\n\n  while(detect){\n    var key = getKeyWithValue(obj, value)\n    if(typeof key === \"undefined\"){\n      detect = false\n    } else {\n      if(array){\n        obj.splice(key, 1)\n      } else {\n        delete obj[key]\n      }\n    }\n  }\n\n  return obj\n}\n\n\n// Only one unique value is left.\nexport const unique = function (array, findKey){\n  const result    = []\n  const uniqueSet = new Set()\n  if(typeof findKey === \"undefined\"){ findKey = (v)=>v }\n  if(typeof findKey === \"string\"){ const keyPath = findKey; findKey = (v)=>v[keyPath] }\n  array.forEach((v)=>{\n    const key = findKey(v)\n    if(uniqueSet.has(key)) return\n    uniqueSet.add(key)\n    result.push(v)\n  })\n  return result\n}\n\nexport const getKeyBy = function (object, value){\n  if(isFunction(value)){\n    if(isArray(object)) for(var i = 0, l = object.length; i < l; i++) if(value(object[i], i) === true) return i\n    if(isObject(object)) for(var key in object) if(value(object[key], key) === true) return key\n  } else {\n    if(isArray(object)) for(var i = 0, l = object.length; i < l; i++) if(object[i] === value) return i\n    if(isObject(object)) for(var key in object) if(object[key] === value) return key\n  }\n}\n\n// Change the positions of the specified indexes in the array\nexport const moveOf = function (data, oldIndex, newIndex){\n  data = asArray(data)\n  oldIndex !== newIndex && \n  isNumber(oldIndex) &&\n  isNumber(newIndex) &&\n  oldIndex >= 0 && oldIndex < data.length && \n  Array.prototype.splice.call(data, newIndex > data.length ? data.length : newIndex, 0, Array.prototype.splice.call(data, oldIndex, 1)[0])\n  return data\n}\nexport const move = (data, oldIndex, newIndex)=>moveOf(toArray(data), oldIndex, newIndex)\n\n\n// Supports self concat.\nconst baseConcatOf = (data, args)=>{\n  const result = asArray(data)\n  return (args.forEach(data=>{ asArray(data).forEach(value=>{ result.push(value) }) }), result)\n}\nexport const concatOf = (data, ...args)=>baseConcatOf(data, args)\nexport const concat = (data, ...args)=>baseConcatOf(toArray(data), args)\n\n\n// Removes the value of data that does not return a positive value to the filter function.\nexport const filterOf = function (data, filterFn, exitFn){\n  const dataArray = asArray(data)\n  const dataKeys = keys(data)\n  const isOnExit = typeof exitFn === \"function\"\n  const exitArray = isOnExit ? [] : null\n  for(let i = 0, removedIndex = 0, l = dataKeys.length; i < l; i++, removedIndex++){\n    const datumKey = dataKeys[i]\n    const datum = dataArray[datumKey]\n    if(filterFn(datum, datumKey) !== true){\n      const exitDatum = dataArray.splice(i, 1)\n      i--\n      l--\n      isOnExit && exitArray.push([removedIndex, exitDatum])\n    }\n  }\n  isOnExit && exitFn(exitArray, dataArray)\n  return dataArray\n}\nexport const filter = (data, func, exitFn)=>filterOf(toArray(data), func, exitFn)\n\n\n// Put the specified value in the specified index.\nexport const insertOf = function (data, v, a){\n  data = asArray(data)\n  return (data.splice(typeof a === \"number\" ? a : 0, 0, v), data)\n}\nexport const insert = (data, v, a)=>insertOf(toArray(data), v, a)\n\n\n// Removes all contents of an array or object.\nexport const clearOf = function (data, fillFn, sp){\n  if(isArray(data)){\n    sp = Array.prototype.splice.call(data, 0, data.length)\n  } else if(typeof data == \"object\"){\n    sp = {}\n    for(var key in data){ sp[key] = data[key]; delete data[key] } \n  }\n  return (fillFn && fillFn(data, sp)), data\n}\n\n// sort\nexport const sortOf = function (data, filter){\n  if(data.length == 0){\n    return data\n  }\n  \n  switch (filter){\n    case 'desc':\n      filter = function (a, b){ return a > b }\n      break\n    case undefined:\n    case 'asc':\n    default:\n      if(typeof filter !== \"function\"){\n        filter = function (a, b){ return a < b }\n      }\n      break\n  }\n\n  var result = [data[0]]\n\n  for(var i = 1, l = data.length; i < l; i++){\n    for(var ri = 0, rl = result.length; ri < rl; ri++){\n      if(filter(data[i], result[ri]) === true){\n        insertOf(result, data[i], ri)\n        break\n      }\n      if((ri + 1) === result.length){\n        result.push(data[i])\n      }\n    }\n  }\n\n  clearOf(data)\n\n  for(var i = 0, l = result.length; i < l; data.push(result[i]), i++);\n  \n  return data\n}\n\nexport const sort = (data, filter)=>sortOf(toArray(data), filter)\n\n// If have defined multiple key names in one hash, change them appropriately.\n// rebase({ \"a,b\":1 }) => { \"a\":1, \"b\":1 }\nexport const rebase = function (obj, ref){\n  var result = {}\n  for(var key in obj){\n    if(key === \".*\"){\n      var refValue = obj[key]\n      for(var i = 0, d = Object.keys(ref), l = d.length; i < l; i++){\n        var refKey = d[i]\n        if(typeof refValue === \"function\"){\n          result[refKey] = obj[key]\n        } else {\n          if((typeof refValue !== \"object\" && typeof refValue !== \"object\") || isNode(refValue)){\n            result[refKey] = refValue\n          } else {\n            result[refKey] = Object.assign(result[refKey], refValue)\n          }\n        }\n      }\n    } else if(key.indexOf(\",\") > -1){\n      key.split(\",\").forEach(deepKey=>{\n        deepKey = deepKey.trim()\n        if(typeof obj[key] === \"function\"){\n          result[deepKey] = obj[key]\n        } else {\n          if((!result.hasOwnProperty(deepKey) && typeof obj[key] !== \"object\") || isNode(obj[key])){\n            result[deepKey] = obj[key]\n          } else {\n            result[deepKey] = Object.assign(result[deepKey] || (isArray(obj[key]) ? [] : {}), obj[key], obj[deepKey])\n          }\n        }\n      })\n    } else {\n      if(typeof obj[key] === \"function\"){\n        result[key] = obj[key]\n      } else {\n        if((typeof result[key] !== \"object\" && typeof obj[key] !== \"object\") || isNode(obj[key])){\n          result[key] = obj[key]\n        } else {\n          result[key] = Object.assign(result[key], obj[key])\n        }\n      }\n    }\n  }\n  return result\n}\n\nconst removeKey = function (datum, rule){\n  if(!isObject(datum)) return datum\n  const removeRule = typeof rule === \"function\" ? (key, value)=>rule(value, key) : rule\n  const removeKeys = keys(datum, removeRule)\n  if(!removeKeys.length) return datum\n  \n  isArray(datum)\n    ? removeKeys.forEach((originalIndex, offset)=>{\n      const removeIndex = originalIndex - offset\n      datum.splice(removeIndex, 1)\n    })\n    : removeKeys.forEach(key=>{ delete datum[key] })\n\n  return datum\n}\n\n// If the rule matches the rule, remove the key\nexport const omitOf = (datum, rule)=>removeKey(datum, rule)\nexport const omit = (datum, rule)=>omitOf(clone(datum), rule)\n\n// If the rule matches the rule, preserve the key.\nexport const pickOf = (datum, rule)=>removeKey(datum, (value, key)=>!stringTest(key, rule, value))\nexport const pick = (datum, rule)=>pickOf(clone(datum), rule)\n\n// Remove the key that has a value of undefined\n//const COMPACT_MATCH_FN = value=>typeof value !== \"undefined\"\nconst COMPACT_MATCH_FN = value=>{\n  return typeof value === \"undefined\"\n}\nexport const compactOf = (datum)=>omitOf(datum, COMPACT_MATCH_FN)\nexport const compact = (datum)=>compactOf(clone(datum))\n\n// Clears key values starting with $\nconst FREE_MATCH_EXPRESSION = /^\\$/\nexport const freeOf = (datum)=>omitOf(datum, FREE_MATCH_EXPRESSION)\nexport const free = (datum)=>freeOf(clone(datum))\n\n// Remove the key that begins with $ or has a value of undefined.\nexport const purgeOf = (datum)=>omitOf(datum, (value, key)=>FREE_MATCH_EXPRESSION.test(key) || COMPACT_MATCH_FN(value))\nexport const purge = (datum)=>purgeOf(clone(datum))\n\n/* Experimental\nexport const injectOf = (data,injectFn)=>keys(data).reduce((dest, key)=>((dest[key] = injectFn(dest[key], key)), dest),asObject(data))\nexport const inject = (data, injectFn)=>injectOf(clone(data), injectFn);\n\nexport const mapOf = (data, mapFn)=>asArray(data).map(mapFn);\nexport const map = (data, mapFn)=>mapOf(clone(data), mapFn);\n*/\n\n\n//\nexport const instance = function (func, proto){\n  var ins; var DummyInstance = function (param){ if(typeof param === \"object\") for(var k in param) this[k] = param[k] }\n  if(typeof func == \"object\"){\n    if(typeof proto === \"object\") DummyInstance.prototype = proto\n    ins = new DummyInstance(func)\n  }\n  if(typeof func == \"function\"){\n    if(typeof proto === \"object\") func.prototype = proto\n    ins = (new func())\n  }\n  return ins\n}\n\nexport const alloc = function (init){\n  let fn = init()\n  const rn = function (...args){\n    return fn.apply(this, args)\n  }\n  rn['reset'] = function (){ fn = init(rn, rn) }\n  rn['$constructor'] = fn\n  return rn\n}\n\n// TODO\n/*\nconst syncData = (function (){\n  const ENTER_HOOK  = (newDatum)=>Object.assign({}, newDatum)\n  const UPDATE_HOOK = (oldDatum, newDatum)=>Object.assign({}, oldDatum, newDatum)\n  \n  return function (oldData, newData, getId, options){\n    if(!/string|function/.test(typeof getId)) throw new Error(\"syncData need getId\")\n  \n    if(typeof getId === \"string\"){\n      const getIdString = getId\n      getId = e=>_.get(e, getIdString)\n    }\n\n    oldData = asArray(oldData)\n    newData = asArray(newData)\n\n    const result = []\n    const hooks  = asObject(options, \"afterEach\")\n    \n    if(typeof hooks[\"enter\"] !== \"function\"){\n      hooks[\"enter\"] = ENTER_HOOK\n    }\n    \n    if(typeof hooks[\"update\"] !== \"function\"){\n      hooks[\"update\"] = UPDATE_HOOK\n    }\n    \n    const oldDataMap = _.map(oldData, e=>{\n      return { id: getId(e), ref: e }\n    })\n    \n    \n    asArray(newData).forEach((newDatum, i)=>{\n      const newId = getId(newDatum)\n      \n      let oldDatum = _.get(oldDataMap[_.findIndex(oldDataMap, e=>e.id === newId)], \"ref\")\n      let genDatum\n      let dirty = false\n      // eslint-disable-next-line no-undef\n      if(oldDatum){\n        // change is not dirty, modify is dirty\n        if(typeof oldDatum !== typeof newDatum){\n          dirty = false\n        } else { // same type\n          const oldOwnKeys = Object.keys(oldDatum).filter(key=>!(key.indexOf(\"$\") === 0))\n          const newOwnKeys = Object.keys(newDatum).filter(key=>!(key.indexOf(\"$\") === 0))\n\n          // inspect key chnage\n          if(_.isEqual(oldOwnKeys, newOwnKeys)){\n            dirty = !_.isEqual(_.pick(oldDatum, oldOwnKeys), _.pick(newDatum, newOwnKeys))\n          } else {\n            dirty = true\n          }\n        }\n        \n        if(typeof hooks[\"beforeUpdate\"] === \"function\"){\n          if(hooks[\"beforeUpdate\"](oldDatum, newDatum) === false){\n            return\n          }\n        }\n        \n        genDatum = hooks[\"update\"](oldDatum, newDatum)\n        \n        if(typeof hooks[\"afterUpdate\"] === \"function\"){\n          genDatum = hooks[\"afterUpdate\"](genDatum, oldDatum, newDatum)\n        }\n      } else {\n        if(typeof hooks[\"beforeEnter\"] === \"function\"){\n          if(hooks[\"beforeEnter\"](newDatum) === false){\n            return\n          }\n        }\n        \n        genDatum = hooks[\"enter\"](newDatum)\n        \n        if(typeof hooks[\"afterEnter\"] === \"function\"){\n          genDatum = hooks[\"afterEnter\"](genDatum, newDatum)\n        }\n      }\n\n      if(typeof hooks[\"afterEach\"] === \"function\"){\n        hooks[\"afterEach\"](genDatum, i, dirty)\n      }\n\n      result.push(genDatum)\n    })\n\n    return result\n  }\n}())\n*/\n"],"file":"cast.js"}