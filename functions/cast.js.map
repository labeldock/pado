{"version":3,"sources":["../packages/pado/functions/cast.js"],"names":["asArray","data","defaultArray","undefined","toArray","option","Array","prototype","slice","call","split","asObject","defaultKey","toNumber","v","d","vr","replace","dr","cleanObject","splice","length","Object","keys","forEach","key","clone","target","r","i","push","Date","setTime","getTime","k","hasOwnProperty","console","error","cloneDeep","l","p","getKeyWithValue","obj","value","removeValue","detect","array","unique","findKey","result","uniqueSet","Set","keyPath","has","add","getKeyBy","object","isFunction","moveOf","oldIndex","newIndex","concatOf","appends","filterOf","func","exitFn","exitCnt","ri","clearOf","fillFn","sp","insertOf","a","sortOf","filter","b","rl","rebase","ref","refValue","refKey","isNode","assign","indexOf","deepKey","trim","removeKey","datum","rule","removeKeys","allKeys","originalIndex","offset","removeIndex","omitOf","omit","pickOf","pick","FREE_MATCH_EXPRESSION","freeOf","free","PURGE_FILTER","test","purgeOf","purge","instance","proto","ins","DummyInstance","param","alloc","init","fn","rn","args","apply"],"mappings":"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","sourcesContent":["import {\n  isArray,\n  isNone,\n  isAbsoluteNaN,\n  isPlainObject,\n  isObject\n} from './isLike'\n\nimport {\n  stringTest,\n  keys\n} from './remark'\n\nexport const asArray = function (data, defaultArray = undefined){\n  if(isArray(data)){\n    return data\n  }\n  if(isNone(data)){\n    return isArray(defaultArray) ? defaultArray\n      : isNone(defaultArray) ? [] : [defaultArray]\n  }\n  if(typeof data === \"object\" && typeof data.toArray === \"function\"){\n    return data.toArray()\n  }\n  return [data]\n}\n\nexport const toArray = function (data, option){\n  if(typeof data === \"undefined\" || data === null || isAbsoluteNaN(data)) return []\n  if(isArray(data)) return Array.prototype.slice.call(data)\n  if(typeof data === \"object\" && typeof data.toArray === \"function\") return data.toArray()\n  if(typeof data === \"string\" && typeof option === \"string\") return data.split(option)\n  return [data]\n}\n\nexport const asObject = function (data, defaultKey = \"default\"){\n  if(isPlainObject(data)){\n    return data\n  } else {\n    return { [defaultKey]: data }\n  }\n}\n\nexport const toNumber = function (v, d){\n  switch (typeof v){ case \"number\":return v; case \"string\":const vr = v.replace(/[^.\\d\\-]/g, \"\") * 1; return isAbsoluteNaN(vr) ? 0 : vr; break }\n  switch (typeof d){ case \"number\":return d; case \"string\":const dr = d * 1; return isAbsoluteNaN(dr) ? 0 : dr; break }\n  return 0\n}\n\nexport const cleanObject = function (data){\n  if(data instanceof Array){\n    Array.prototype.splice.call(data, 0, data.length)\n  } else if(typeof data == \"object\"){\n    Object.keys(data).forEach(key=>{ delete data[key] })\n  }\n  return data\n}\n\nexport const clone = function (target){\n  switch (typeof target){\n    case \"undefined\": case \"function\": case \"boolean\": case \"number\": case \"string\": return target; break\n    case \"object\":\n      if(target === null) return target\n    \n      if(isArray(target)){\n        let r = []\n        for(let i = 0, length = target.length; i < length; i++)r.push(target[i])\n        return r\n      }\n    \n      if(!isPlainObject(target)){\n        if(target instanceof Date){\n          let r = new Date()\n          r.setTime(target.getTime())\n          return r\n        }\n        return target\n      }\n    \n      let r = {}\n    \n      Object.keys(target).forEach(k=>{\n        if(target.hasOwnProperty(k)) r[k] = target[k]\n      })\n      return r\n      break\n    default : \n      console.error(\"clone::copy failed : target => \", target)\n      return target \n      break\n  }\n}\n\nexport const cloneDeep = function (target){\n  if(typeof target === \"object\"){\n    let d\n    if(isArray(target)){\n      if(!isArray(d)){ d = [] };\n      for(var i = 0, l = target.length; i < l; i++) d.push(((typeof target[i] === \"object\" && target[i] !== null) ? clone(target[i]) : target[i]))\n      return d\n    } else {\n      d = {}\n      Object.keys(target).forEach(p=>{\n        (typeof target[p] === \"object\" && target[p] !== null && d[p]) ? clone(target[p], d[p]) : d[p] = target[p]\n      })\n      return d\n    }\n  } else {\n    return clone(target)\n  }\n}\n\nconst getKeyWithValue = function (obj, value){\n  if(isArray(obj)){\n    for(var i = 0, l = obj.length; i < l; i++) if(obj[i] === value) return i\n  } \n  if(isObject(obj)){\n    for(var key in obj) if(obj[key] === value) return key\n  }\n  return undefined\n}\n\nexport const removeValue = function (obj, value){\n  var detect = true\n  var array  = isArray(obj)\n\n  while(detect){\n    var key = getKeyWithValue(obj, value)\n    if(typeof key === \"undefined\"){\n      detect = false\n    } else {\n      if(array){\n        obj.splice(key, 1)\n      } else {\n        delete obj[key]\n      }\n    }\n  }\n\n  return obj\n}\n\nexport const unique = function (array, findKey){\n  const result    = []\n  const uniqueSet = new Set()\n  if(typeof findKey === \"undefined\"){ findKey = (v)=>v }\n  if(typeof findKey === \"string\"){ const keyPath = findKey; findKey = (v)=>v[keyPath] }\n  array.forEach((v)=>{\n    const key = findKey(v)\n    if(uniqueSet.has(key)) return\n    uniqueSet.add(key)\n    result.push(v)\n  })\n  return result\n}\n\nexport const getKeyBy = function (object, value){\n  if(isFunction(value)){\n    if(isArray(object)) for(var i = 0, l = object.length; i < l; i++) if(value(object[i], i) === true) return i\n    if(isObject(object)) for(var key in object) if(value(object[key], key) === true) return key\n  } else {\n    if(isArray(object)) for(var i = 0, l = object.length; i < l; i++) if(object[i] === value) return i\n    if(isObject(object)) for(var key in object) if(object[key] === value) return key\n  }\n}\n\nexport const moveOf = function (data, oldIndex, newIndex){\n  if(oldIndex !== newIndex && isArray(data) && typeof oldIndex === \"number\" && typeof newIndex === \"number\" && oldIndex >= 0 && oldIndex < data.length){\n    Array.prototype.splice.call(data, newIndex > data.length ? data.length : newIndex, 0, Array.prototype.splice.call(data, oldIndex, 1)[0])\n  }\n  return data\n}\n\nexport const concatOf = function (data, appends){\n  var data = asArray(data)\n  return asArray(appends).forEach(value=>{ data.push(value) }), data\n}\n\n\nexport const filterOf = function (data, func, exitFn){\n  var data    = asArray(data)\n  var exitCnt = 0\n\n  for(var i = 0, ri = 0, keys = Object.keys(data), l = keys.length; i < l; i++, ri++){\n    var key   = keys[i]\n    var value = data[key]\n    var result = func(value, key)\n    if(result == false){\n      /*\n      var exit = Array.prototype.splice.call(data, i, 1)\n      */\n      i--\n      l--\n      typeof exitFn === \"function\" && exitFn(value, ri, exitCnt++)\n    }\n  }\n  \n  return data\n}\n\nexport const clearOf = function (data, fillFn, sp){\n  if(data instanceof Array){\n    sp = Array.prototype.splice.call(data, 0, data.length)\n  } else if(typeof data == \"object\"){\n    sp = {}\n    for(var key in data){ sp[key] = data[key]; delete data[key] } \n  }\n  return (fillFn && fillFn(data, sp)), data\n}\n\nexport const insertOf = function (data, v, a){\n  isArray(data) && data.splice(typeof a === \"number\" ? a : 0, 0, v)\n  return data\n}\n\nexport const sortOf = function (data, filter){\n  if(data.length == 0){\n    return data\n  }\n  \n  switch (filter){\n    case 'desc':\n      filter = function (a, b){ return a > b }\n      break\n    case undefined:\n    case 'asc':\n    default:\n      if(typeof filter !== \"function\"){\n        filter = function (a, b){ return a < b }\n      }\n      break\n  }\n\n  var result = [data[0]]\n\n  for(var i = 1, l = data.length; i < l; i++){\n    for(var ri = 0, rl = result.length; ri < rl; ri++){\n      if(filter(data[i], result[ri]) === true){\n        insertOf(result, data[i], ri)\n        break\n      }\n      if((ri + 1) === result.length){\n        result.push(data[i])\n      }\n    }\n  }\n\n  clearOf(data)\n\n  for(var i = 0, l = result.length; i < l; data.push(result[i]), i++);\n  \n  return data\n}\n\nexport const rebase = function (obj, ref){\n  var result = {}\n  for(var key in obj){\n    if(key === \".*\"){\n      var refValue = obj[key]\n      for(var i = 0, d = Object.keys(ref), l = d.length; i < l; i++){\n        var refKey = d[i]\n        if(typeof refValue === \"function\"){\n          result[refKey] = obj[key]\n        } else {\n          if((typeof refValue !== \"object\" && typeof refValue !== \"object\") || isNode(refValue)){\n            result[refKey] = refValue\n          } else {\n            result[refKey] = Object.assign(result[refKey], refValue)\n          }\n        }\n      }\n    } else if(key.indexOf(\",\") > -1){\n      key.split(\",\").forEach(deepKey=>{\n        deepKey = deepKey.trim()\n        if(typeof obj[key] === \"function\"){\n          result[deepKey] = obj[key]\n        } else {\n          if((!result.hasOwnProperty(deepKey) && typeof obj[key] !== \"object\") || isNode(obj[key])){\n            result[deepKey] = obj[key]\n          } else {\n            result[deepKey] = Object.assign(result[deepKey] || (isArray(obj[key]) ? [] : {}), obj[key], obj[deepKey])\n          }\n        }\n      })\n    } else {\n      if(typeof obj[key] === \"function\"){\n        result[key] = obj[key]\n      } else {\n        if((typeof result[key] !== \"object\" && typeof obj[key] !== \"object\") || isNode(obj[key])){\n          result[key] = obj[key]\n        } else {\n          result[key] = Object.assign(result[key], obj[key])\n        }\n      }\n    }\n  }\n  return result\n}\n\nconst removeKey = function(datum, rule){\n  if(!isObject(datum)) return datum;\n  \n  const removeKeys = keys(datum, rule);\n  if(!removeKeys.length) return datum;\n  \n  const allKeys = keys(datum);\n  \n  isArray(datum) ?\n  removeKeys.forEach((originalIndex,offset)=>{\n    const removeIndex = originalIndex - offset;\n    datum.splice(removeIndex,1);\n  }) :\n  removeKeys.forEach(key=>{ delete datum[key] });\n\n  return datum;\n}\n\n// If the rule matches the rule, remove the key\nexport const omitOf = (datum, rule)=>removeKey(datum, rule)\nexport const omit = (datum, rule)=>omitOf(clone(datum), rule)\n\n// If the rule matches the rule, preserve the key.\nexport const pickOf = (datum, rule)=>removeKey(datum, (key)=>!stringTest(key, rule))\nexport const pick = (datum, rule)=>pickOf(clone(datum), rule)\n\n// Clears key values starting with $\nexport const FREE_MATCH_EXPRESSION = /^\\$/\nexport const freeOf = (datum)=>omitOf(datum, FREE_MATCH_EXPRESSION)\nexport const free = (datum)=>freeOf(clone(datum))\n\n// Remove the key that begins with $ or has a value of undefined.\nexport const PURGE_FILTER = (value, key)=>FREE_MATCH_EXPRESSION.test(key) || typeof value === \"undefined\"\nexport const purgeOf = (datum)=>omitOf(datum, FREE_MATCH_EXPRESSION)\nexport const purge = (datum)=>purgeOf(clone(datum))\n\nexport const instance = function (func, proto){\n  var ins; var DummyInstance = function (param){ if(typeof param === \"object\") for(var k in param) this[k] = param[k] }\n  if(typeof func == \"object\"){\n    if(typeof proto === \"object\") DummyInstance.prototype = proto\n    ins = new DummyInstance(func)\n  }\n  if(typeof func == \"function\"){\n    if(typeof proto === \"object\") func.prototype = proto\n    ins = (new func())\n  }\n  return ins\n}\n\nexport const alloc = function (init){\n  let fn = init()\n  const rn = function (...args){\n    return fn.apply(this, args)\n  }\n  rn['reset'] = function (){ fn = init(rn, rn) }\n  rn['$constructor'] = fn\n  return rn\n}\n\n// TODO\n/*\nconst syncData = (function (){\n  const ENTER_HOOK  = (newDatum)=>Object.assign({}, newDatum)\n  const UPDATE_HOOK = (oldDatum, newDatum)=>Object.assign({}, oldDatum, newDatum)\n  \n  return function (oldData, newData, getId, options){\n    if(!/string|function/.test(typeof getId)) throw new Error(\"syncData need getId\")\n  \n    if(typeof getId === \"string\"){\n      const getIdString = getId\n      getId = e=>_.get(e, getIdString)\n    }\n\n    oldData = asArray(oldData)\n    newData = asArray(newData)\n\n    const result = []\n    const hooks  = asObject(options, \"afterEach\")\n    \n    if(typeof hooks[\"enter\"] !== \"function\"){\n      hooks[\"enter\"] = ENTER_HOOK\n    }\n    \n    if(typeof hooks[\"update\"] !== \"function\"){\n      hooks[\"update\"] = UPDATE_HOOK\n    }\n    \n    const oldDataMap = _.map(oldData, e=>{\n      return { id: getId(e), ref: e }\n    })\n    \n    \n    asArray(newData).forEach((newDatum, i)=>{\n      const newId = getId(newDatum)\n      \n      let oldDatum = _.get(oldDataMap[_.findIndex(oldDataMap, e=>e.id === newId)], \"ref\")\n      let genDatum\n      let dirty = false\n      // eslint-disable-next-line no-undef\n      if(oldDatum){\n        // change is not dirty, modify is dirty\n        if(typeof oldDatum !== typeof newDatum){\n          dirty = false\n        } else { // same type\n          const oldOwnKeys = Object.keys(oldDatum).filter(key=>!(key.indexOf(\"$\") === 0))\n          const newOwnKeys = Object.keys(newDatum).filter(key=>!(key.indexOf(\"$\") === 0))\n\n          // inspect key chnage\n          if(_.isEqual(oldOwnKeys, newOwnKeys)){\n            dirty = !_.isEqual(_.pick(oldDatum, oldOwnKeys), _.pick(newDatum, newOwnKeys))\n          } else {\n            dirty = true\n          }\n        }\n        \n        if(typeof hooks[\"beforeUpdate\"] === \"function\"){\n          if(hooks[\"beforeUpdate\"](oldDatum, newDatum) === false){\n            return\n          }\n        }\n        \n        genDatum = hooks[\"update\"](oldDatum, newDatum)\n        \n        if(typeof hooks[\"afterUpdate\"] === \"function\"){\n          genDatum = hooks[\"afterUpdate\"](genDatum, oldDatum, newDatum)\n        }\n      } else {\n        if(typeof hooks[\"beforeEnter\"] === \"function\"){\n          if(hooks[\"beforeEnter\"](newDatum) === false){\n            return\n          }\n        }\n        \n        genDatum = hooks[\"enter\"](newDatum)\n        \n        if(typeof hooks[\"afterEnter\"] === \"function\"){\n          genDatum = hooks[\"afterEnter\"](genDatum, newDatum)\n        }\n      }\n\n      if(typeof hooks[\"afterEach\"] === \"function\"){\n        hooks[\"afterEach\"](genDatum, i, dirty)\n      }\n\n      result.push(genDatum)\n    })\n\n    return result\n  }\n}())\n*/\n"],"file":"cast.js"}