{"version":3,"sources":["../.src/functions/nice.js"],"names":["limitOf","limitNumber","number","max","min","Infinity","numbers","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","d","i","l","length","accurateTimeout","originalTimeout","trigger","time","resolutionRatio","coverage","destTime","Date","now","preparation","restTime","preparaTime","Math","floor","execution","setTimeout","turn","p","ts","abs"],"mappings":"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","sourcesContent":["import { isNumber, isArray, isAbsoluteNaN } from './isLike';\n\nexport const limitOf = (function() {\n  const limitNumber = function(number, max, min) {\n    if(typeof number == \"number\") {\n      if(isAbsoluteNaN(number) || number === Infinity) {\n        return min;\n      }\n      if(isNumber(min) && (number < min)) {\n        return min;\n      }\n      if(isNumber(max) && (number > max)) {\n        return max;\n      }\n    }\n    return number;\n  };\n  const limitOf = function(numbers, max, min) {\n    if(typeof max !== \"number\") { max = Number.POSITIVE_INFINITY; }\n    if(typeof min !== \"number\") {\n      if(min === null || isAbsoluteNaN(min)) {\n        min = Number.NEGATIVE_INFINITY;\n      } else {\n        min = 0;\n      }\n    }\n    if(isArray(numbers)) {\n      for(var d = numbers, i = 0, l = d.length; i < l; i++) {\n        d[i] = limitNumber(d[i], max, min);\n      }\n      return numbers;\n    } else {\n      return limitNumber(numbers, max, min);\n    }\n  };\n  return limitOf;\n}());\n\nexport const accurateTimeout = (function(originalTimeout){\n  return function(trigger,time=0,resolutionRatio=0.75,coverage=25){\n    let destTime = Date.now() + time;\n    \n    if(!isNumber(time)){\n      time=0;\n    }\n    \n    if(!isNumber(resolutionRatio)){\n      resolutionRatio = 0.75\n    }\n    \n    if(!isNumber(coverage)){\n      resolutionRatio = 25\n    }\n    \n    if(resolutionRatio > 1){\n      resolutionRatio = 1;\n    }\n        \n    if(resolutionRatio < 0.1){\n      resolutionRatio = 0.1;\n    }\n    \n    if(coverage < 5){\n      coverage = 5;\n    }\n        \n    function preparation(restTime){\n      const preparaTime = Math.floor(restTime * resolutionRatio);\n      originalTimeout(execution,preparaTime);\n    }\n        \n    function execution(){\n      const restTime = destTime - Date.now();\n        \n      if(restTime < coverage){\n        if(restTime < 1){\n          originalTimeout(trigger,0);\n        } else {\n          originalTimeout(trigger,restTime);\n        }\n      } else {\n        preparation(restTime);\n      }\n    }\n    \n    execution();\n  }\n}(setTimeout));\n\n\nexport const turn = function(i, p, ts) {\n  if(i < 0) { var abs = Math.abs(i / ts); i = p - (abs > p ? abs % p : abs); }\n  ts = ts || 1; i = Math.floor(i / ts);\n  return (p > i) ? i : i % p;\n};"],"file":"nice.js"}