{"version":3,"sources":["../.src/functions/nice.js"],"names":["limitNumber","limitOf","number","max","min","Infinity","numbers","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","d","i","l","length","accurateTimeout","originalTimeout","trigger","time","resolutionRatio","coverage","destTime","Date","now","preparation","restTime","preparaTime","Math","floor","execution","setTimeout","turn","limit","ts","resultHook","abs","fixIndex","result","turnTime","toggle","toggleArgs","currentValue","step","findIndex","val"],"mappings":"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","sourcesContent":["import { isNumber, isArray, isAbsoluteNaN } from './isLike'\nimport { asArray } from './cast'\n\nexport const limitNumber = (function (){\n  const limitOf = function (number, max, min){\n    if(typeof number == \"number\"){\n      if(isAbsoluteNaN(number) || number === Infinity){\n        return min\n      }\n      if(isNumber(min) && (number < min)){\n        return min\n      }\n      if(isNumber(max) && (number > max)){\n        return max\n      }\n    }\n    return number\n  }\n  const limitNumber = function (numbers, max, min){\n    if(typeof max !== \"number\"){ max = Number.POSITIVE_INFINITY }\n    if(typeof min !== \"number\"){\n      if(min === null || isAbsoluteNaN(min)){\n        min = Number.NEGATIVE_INFINITY\n      } else {\n        min = 0\n      }\n    }\n    if(isArray(numbers)){\n      for(var d = numbers, i = 0, l = d.length; i < l; i++){\n        d[i] = limitOf(d[i], max, min)\n      }\n      return numbers\n    } else {\n      return limitOf(numbers, max, min)\n    }\n  }\n  return limitNumber\n}())\n\nexport const accurateTimeout = (function (originalTimeout){\n  return function (trigger, time = 0, resolutionRatio = 0.75, coverage = 25){\n    let destTime = Date.now() + time\n    \n    if(!isNumber(time)){\n      time = 0\n    }\n    \n    if(!isNumber(resolutionRatio)){\n      resolutionRatio = 0.75\n    }\n    \n    if(!isNumber(coverage)){\n      resolutionRatio = 25\n    }\n    \n    if(resolutionRatio > 1){\n      resolutionRatio = 1\n    }\n        \n    if(resolutionRatio < 0.1){\n      resolutionRatio = 0.1\n    }\n    \n    if(coverage < 5){\n      coverage = 5\n    }\n        \n    function preparation (restTime){\n      const preparaTime = Math.floor(restTime * resolutionRatio)\n      originalTimeout(execution, preparaTime)\n    }\n        \n    function execution (){\n      const restTime = destTime - Date.now()\n        \n      if(restTime < coverage){\n        if(restTime < 1){\n          originalTimeout(trigger, 0)\n        } else {\n          originalTimeout(trigger, restTime)\n        }\n      } else {\n        preparation(restTime)\n      }\n    }\n    \n    execution()\n  }\n}(setTimeout))\n\nexport const turn = function (i, limit, ts, resultHook){\n  if(i < 0){ \n    let abs = Math.abs(i / ts) \n    i = limit - (abs > limit ? abs % limit : abs)\n  }\n  ts = typeof ts === \"number\" ? ts : 1\n  const fixIndex = Math.floor(i / ts)\n  const result = (limit > fixIndex) ? fixIndex : fixIndex % limit\n  return typeof resultHook === \"function\" ? resultHook(result, i, limit, ts) : result\n}\n\nexport const turnTime = function (i, limit, ts){\n  return turn(i, limit, ts, (result, i, limit, ts)=>[result, Math.floor(i / (limit * ts))])\n}\n\nexport const toggle = function (toggleArgs, currentValue, step = 1){\n  return (toggleArgs = asArray(toggleArgs)) && toggleArgs[(toggleArgs.findIndex(val=>val === currentValue) + step) % toggleArgs.length]\n}\n"],"file":"nice.js"}