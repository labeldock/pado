{"version":3,"sources":["../.src/functions/nice.js"],"names":["limitNumber","limitOf","number","max","min","Infinity","numbers","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","d","i","l","length","accurateTimeout","originalTimeout","trigger","time","resolutionRatio","coverage","destTime","Date","now","preparation","restTime","preparaTime","Math","floor","execution","setTimeout","turn","limit","ts","resultHook","abs","fixIndex","result","turnTime"],"mappings":"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","sourcesContent":["import { isNumber, isArray, isAbsoluteNaN } from './isLike'\n\nexport const limitNumber = (function (){\n  const limitOf = function (number, max, min){\n    if(typeof number == \"number\"){\n      if(isAbsoluteNaN(number) || number === Infinity){\n        return min\n      }\n      if(isNumber(min) && (number < min)){\n        return min\n      }\n      if(isNumber(max) && (number > max)){\n        return max\n      }\n    }\n    return number\n  }\n  const limitNumber = function (numbers, max, min){\n    if(typeof max !== \"number\"){ max = Number.POSITIVE_INFINITY }\n    if(typeof min !== \"number\"){\n      if(min === null || isAbsoluteNaN(min)){\n        min = Number.NEGATIVE_INFINITY\n      } else {\n        min = 0\n      }\n    }\n    if(isArray(numbers)){\n      for(var d = numbers, i = 0, l = d.length; i < l; i++){\n        d[i] = limitOf(d[i], max, min)\n      }\n      return numbers\n    } else {\n      return limitOf(numbers, max, min)\n    }\n  }\n  return limitNumber\n}())\n\nexport const accurateTimeout = (function (originalTimeout){\n  return function (trigger, time = 0, resolutionRatio = 0.75, coverage = 25){\n    let destTime = Date.now() + time\n    \n    if(!isNumber(time)){\n      time = 0\n    }\n    \n    if(!isNumber(resolutionRatio)){\n      resolutionRatio = 0.75\n    }\n    \n    if(!isNumber(coverage)){\n      resolutionRatio = 25\n    }\n    \n    if(resolutionRatio > 1){\n      resolutionRatio = 1\n    }\n        \n    if(resolutionRatio < 0.1){\n      resolutionRatio = 0.1\n    }\n    \n    if(coverage < 5){\n      coverage = 5\n    }\n        \n    function preparation (restTime){\n      const preparaTime = Math.floor(restTime * resolutionRatio)\n      originalTimeout(execution, preparaTime)\n    }\n        \n    function execution (){\n      const restTime = destTime - Date.now()\n        \n      if(restTime < coverage){\n        if(restTime < 1){\n          originalTimeout(trigger, 0)\n        } else {\n          originalTimeout(trigger, restTime)\n        }\n      } else {\n        preparation(restTime)\n      }\n    }\n    \n    execution()\n  }\n}(setTimeout))\n\nexport const turn = function (i, limit, ts, resultHook){\n  if(i < 0){ \n    let abs = Math.abs(i / ts) \n    i = limit - (abs > limit ? abs % limit : abs)\n  }\n  ts = typeof ts === \"number\" ? ts : 1\n  const fixIndex = Math.floor(i / ts)\n  const result = (limit > fixIndex) ? fixIndex : fixIndex % limit\n  return typeof resultHook === \"function\" ? resultHook(result, i, limit, ts) : result\n}\n\nexport const turnTime = function (i, limit, ts){\n  return turn(i, limit, ts, (result, i, limit, ts)=>[result, Math.floor(i / (limit * ts))])\n}\n"],"file":"nice.js"}