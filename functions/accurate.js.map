{"version":3,"sources":["../.src/src/functions/accurate.js"],"names":["accurateTimeout","originalTimeout","trigger","time","resolutionRatio","coverage","destTime","Date","now","preparation","restTime","preparaTime","Math","floor","execution","setTimeout"],"mappings":";;;;;;;;;;;;;;;;;;;;AAIO,MAAMA,kBAAmB,UAASC,eAAT,EAAyB;AACvD,WAAO,UAASC,OAAT,EAAiBC,IAAjB,EAAwBC,eAAxB,EAA6CC,QAA7C,EAAyD;AAAA,UAAxCF,IAAwC;AAAxCA,YAAwC,GAAnC,CAAmC;AAAA;;AAAA,UAAjCC,eAAiC;AAAjCA,uBAAiC,GAAjB,IAAiB;AAAA;;AAAA,UAAZC,QAAY;AAAZA,gBAAY,GAAH,EAAG;AAAA;;AAC9D,UAAIC,WAAWC,KAAKC,GAAL,KAAaL,IAA5B;;AAEA,UAAG,CAAC,sBAASA,IAAT,CAAJ,EAAmB;AACjBA,eAAK,CAAL;AACD;;AAED,UAAG,CAAC,sBAASC,eAAT,CAAJ,EAA8B;AAC5BA,0BAAkB,IAAlB;AACD;;AAED,UAAG,CAAC,sBAASC,QAAT,CAAJ,EAAuB;AACrBD,0BAAkB,EAAlB;AACD;;AAED,UAAGA,kBAAkB,CAArB,EAAuB;AACrBA,0BAAkB,CAAlB;AACD;;AAED,UAAGA,kBAAkB,GAArB,EAAyB;AACvBA,0BAAkB,GAAlB;AACD;;AAED,UAAGC,WAAW,CAAd,EAAgB;AACdA,mBAAW,CAAX;AACD;;AAED,eAASI,WAAT,CAAqBC,QAArB,EAA8B;AAC5B,YAAMC,cAAcC,KAAKC,KAAL,CAAWH,WAAWN,eAAtB,CAApB;AACAH,wBAAgBa,SAAhB,EAA0BH,WAA1B;AACD;;AAED,eAASG,SAAT,GAAoB;AAClB,YAAMJ,WAAWJ,WAAWC,KAAKC,GAAL,EAA5B;;AAEA,YAAGE,WAAWL,QAAd,EAAuB;AACrB,cAAGK,WAAW,CAAd,EAAgB;AACdT,4BAAgBC,OAAhB,EAAwB,CAAxB;AACD,WAFD,MAEO;AACLD,4BAAgBC,OAAhB,EAAwBQ,QAAxB;AACD;AACF,SAND,MAMO;AACLD,sBAAYC,QAAZ;AACD;AACF;;AAEDI;AACD,KA/CD;AAgDD,GAjD+B,CAiD9BC,UAjD8B,CAAzB","sourcesContent":["import { \n  isNumber\n} from './isLike';\n\nexport const accurateTimeout = (function(originalTimeout){\n  return function(trigger,time=0,resolutionRatio=0.75,coverage=25){\n    let destTime = Date.now() + time;\n    \n    if(!isNumber(time)){\n      time=0;\n    }\n    \n    if(!isNumber(resolutionRatio)){\n      resolutionRatio = 0.75\n    }\n    \n    if(!isNumber(coverage)){\n      resolutionRatio = 25\n    }\n    \n    if(resolutionRatio > 1){\n      resolutionRatio = 1;\n    }\n        \n    if(resolutionRatio < 0.1){\n      resolutionRatio = 0.1;\n    }\n    \n    if(coverage < 5){\n      coverage = 5;\n    }\n        \n    function preparation(restTime){\n      const preparaTime = Math.floor(restTime * resolutionRatio);\n      originalTimeout(execution,preparaTime);\n    }\n        \n    function execution(){\n      const restTime = destTime - Date.now();\n        \n      if(restTime < coverage){\n        if(restTime < 1){\n          originalTimeout(trigger,0);\n        } else {\n          originalTimeout(trigger,restTime);\n        }\n      } else {\n        preparation(restTime);\n      }\n    }\n    \n    execution();\n  }\n}(setTimeout))"],"file":"accurate.js"}