{"version":3,"sources":["../.src/src/functions/reducer.js"],"names":["matchString","it","search","at","replace","RegExp","result","substr","match","index","length","findIndex","__find_string","indexOf","__find_regexp","i","substring","findIndexes","c","s","idxs","mvc","next","push","cut","collection","cutLength","emptyDefault","undefined","data","fill","splice","Number","POSITIVE_INFINITY","dataLength","l","top","iteratee","topLength","a","b","NEGATIVE_INFINITY","sort","get","target","path","eval","call","apply","Array","prototype","slice","arguments","hasProperty","pathParam","hasOwnProperty","hasValueProperty","obj","value","key","turn","p","ts","abs","Math","floor"],"mappings":"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","sourcesContent":["import { \n  isArray,\n  isInfinity,\n  isNumber,\n  isEmpty,\n  likeRegexp,\n  likeString,\n  likeObject\n} from './isLike'\n\nimport {\n  asArray,\n  castPath\n} from './cast'\n\nimport {\n  all\n} from './enumerable'\n\nimport _get from 'lodash/get';\n\n//reducer.spec.js\nexport const matchString = (it,search,at=0)=>{\n  if(typeof search === \"string\"){\n    search = search.replace(new RegExp(\"\\\\.\",\"g\"),\"\\\\.\");\n  }\n  \n  const result = it.substr(at).match(search);\n  return result ? [result.index+at, result[0].length] : [-1, 0];\n};\n\nexport const findIndex = (function(){\n  const __find_string = (it,search,at)=>it.indexOf(search,at);\n  const __find_regexp = (it,search,at)=>{\n    let i = it.substring(at || 0).search(search);\n    return (i >= 0) ? (i + (at || 0)) : i;\n  };\n  return (it,search,at)=>((search instanceof RegExp)?__find_regexp:__find_string)(it,search,at);\n}());\n\n//reducer.spec.js\nexport const findIndexes = (function(){\n  return function(c,s,at){\n      if(typeof c === \"string\" || typeof c === \"number\"){\n        var idxs=[], mvc=c+\"\", s=likeRegexp(s)?s:s+\"\", at=(!at || !isNumber(at) || at < 0)?0:at, next;\n        do {\n          let i = findIndex(c,s,at);\n          if(i > -1){\n            at = (s.length || 1) + i;\n            idxs.push(i); \n            next = true;\n          } else {\n            next = false;\n          }\n        } while(next)\n        return idxs;\n      }\n    }\n}());\n\n//reducer.spec.js\nexport const cut = function(collection,cutLength=1,emptyDefault=undefined){\n  let data = asArray(collection);\n  let fill = emptyDefault;\n  \n  if(data.length > cutLength){\n    data.splice(cutLength,Number.POSITIVE_INFINITY);\n    return data;\n  }\n  \n  let dataLength = data.length;\n  \n  if(typeof emptyDefault !== \"function\"){\n    fill = ()=>emptyDefault;\n  }\n  \n  for(let i=0,l=cutLength-dataLength;i<l;i++){\n    data.push(fill( dataLength++, i ));\n  }\n  \n  return data;\n}\n\n//reducer.spec.js\nexport const top = function(data,iteratee,topLength){\n  switch(typeof iteratee){\n  case \"function\":\n    //iteratee=iteratee;\n    break;\n  case \"boolean\":\n    iteratee=iteratee?(a,b)=>a<b:(a,b)=>a>b;\n    break;\n  default:\n    iteratee=(a,b)=>a<b;\n    break;\n  }\n  \n  if(typeof topLength === \"boolean\"){\n    topLength = topLength ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;\n  }\n  \n  return isNumber(topLength) || isInfinity(topLength) ?\n  asArray(data).sort((a,b)=>iteratee(a,b)).splice(0,topLength):\n  asArray(data).sort((a,b)=>iteratee(a,b))[0];\n};\n\nexport const get = function(target,path){\n  if(typeof target === \"object\"){\n    switch(typeof path){\n      case \"number\": path += \"\";\n      case \"string\": return path.indexOf(\"[\") == 0 ? eval(\"target\"+path) : eval(\"target.\"+path);\n      case \"function\": return path.call(this,target);\n    }\n  } else if(typeof target === \"function\"){\n    return target.apply(this,Array.prototype.slice.call(arguments,1));\n  }\n  return target;\n}\n\nexport const hasProperty = function(target,pathParam){\n  return all(castPath(pathParam),path=>{\n    if(likeObject(target) && likeString(path) && target.hasOwnProperty(path)){\n      target = target[path];\n      return true;\n    }\n    return false;\n  });\n}\n\nexport const hasValueProperty = function(obj,value,key){\n  if(arguments.length == 1 && likeObject(obj)) return isEmpty(obj);\n  if(isArray(obj)) for(var i=0,l=obj.length;i<l;i++) if(obj[i] === value) return true;\n  if(likeObject(obj)){\n    if(key){\n      return _get(obj,key) === value;\n    } else {\n      for(var key in obj) if(_get(obj,key) === value) return true;\n    }\n  }\n  return false;\n};\n\nexport const turn = function(i, p, ts) {\n  if(i < 0) { var abs = Math.abs(i / ts); i = p - (abs > p ? abs % p : abs); }\n  ts = ts || 1; i = Math.floor(i / ts);\n  return (p > i) ? i : i % p;\n};"],"file":"reducer.js"}